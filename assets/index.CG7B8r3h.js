var vR=Object.defineProperty;var _R=(n,t,e)=>t in n?vR(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Nt=(n,t,e)=>_R(n,typeof t!="symbol"?t+"":t,e);function bR(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function xR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wg={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function wR(){if(Bb)return Mc;Bb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Mc.Fragment=t,Mc.jsx=e,Mc.jsxs=e,Mc}var Fb;function TR(){return Fb||(Fb=1,Wg.exports=wR()),Wg.exports}var _=TR(),Kg={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function ER(){if(Hb)return It;Hb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function x(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function A(V,rt,dt){this.props=V,this.context=rt,this.refs=S,this.updater=dt||T}A.prototype.isReactComponent={},A.prototype.setState=function(V,rt){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,rt,"setState")},A.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function L(){}L.prototype=A.prototype;function G(V,rt,dt){this.props=V,this.context=rt,this.refs=S,this.updater=dt||T}var F=G.prototype=new L;F.constructor=G,C(F,A.prototype),F.isPureReactComponent=!0;var Y=Array.isArray,X={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function O(V,rt,dt,ct,lt,Et){return dt=Et.ref,{$$typeof:n,type:V,key:rt,ref:dt!==void 0?dt:null,props:Et}}function N(V,rt){return O(V.type,rt,void 0,void 0,void 0,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function k(V){var rt={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(dt){return rt[dt]})}var j=/\/+/g;function U(V,rt){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):rt.toString(36)}function M(){}function ft(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(M,M):(V.status="pending",V.then(function(rt){V.status==="pending"&&(V.status="fulfilled",V.value=rt)},function(rt){V.status==="pending"&&(V.status="rejected",V.reason=rt)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function gt(V,rt,dt,ct,lt){var Et=typeof V;(Et==="undefined"||Et==="boolean")&&(V=null);var wt=!1;if(V===null)wt=!0;else switch(Et){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(V.$$typeof){case n:case t:wt=!0;break;case p:return wt=V._init,gt(wt(V._payload),rt,dt,ct,lt)}}if(wt)return lt=lt(V),wt=ct===""?"."+U(V,0):ct,Y(lt)?(dt="",wt!=null&&(dt=wt.replace(j,"$&/")+"/"),gt(lt,rt,dt,"",function(ge){return ge})):lt!=null&&(D(lt)&&(lt=N(lt,dt+(lt.key==null||V&&V.key===lt.key?"":(""+lt.key).replace(j,"$&/")+"/")+wt)),rt.push(lt)),1;wt=0;var Ce=ct===""?".":ct+":";if(Y(V))for(var Gt=0;Gt<V.length;Gt++)ct=V[Gt],Et=Ce+U(ct,Gt),wt+=gt(ct,rt,dt,Et,lt);else if(Gt=x(V),typeof Gt=="function")for(V=Gt.call(V),Gt=0;!(ct=V.next()).done;)ct=ct.value,Et=Ce+U(ct,Gt++),wt+=gt(ct,rt,dt,Et,lt);else if(Et==="object"){if(typeof V.then=="function")return gt(ft(V),rt,dt,ct,lt);throw rt=String(V),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return wt}function tt(V,rt,dt){if(V==null)return V;var ct=[],lt=0;return gt(V,ct,"","",function(Et){return rt.call(dt,Et,lt++)}),ct}function ut(V){if(V._status===-1){var rt=V._result;rt=rt(),rt.then(function(dt){(V._status===0||V._status===-1)&&(V._status=1,V._result=dt)},function(dt){(V._status===0||V._status===-1)&&(V._status=2,V._result=dt)}),V._status===-1&&(V._status=0,V._result=rt)}if(V._status===1)return V._result.default;throw V._result}var yt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Pt(){}return It.Children={map:tt,forEach:function(V,rt,dt){tt(V,function(){rt.apply(this,arguments)},dt)},count:function(V){var rt=0;return tt(V,function(){rt++}),rt},toArray:function(V){return tt(V,function(rt){return rt})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},It.Component=A,It.Fragment=e,It.Profiler=r,It.PureComponent=G,It.StrictMode=i,It.Suspense=d,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,It.act=function(){throw Error("act(...) is not supported in production builds of React.")},It.cache=function(V){return function(){return V.apply(null,arguments)}},It.cloneElement=function(V,rt,dt){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ct=C({},V.props),lt=V.key,Et=void 0;if(rt!=null)for(wt in rt.ref!==void 0&&(Et=void 0),rt.key!==void 0&&(lt=""+rt.key),rt)!Z.call(rt,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&rt.ref===void 0||(ct[wt]=rt[wt]);var wt=arguments.length-2;if(wt===1)ct.children=dt;else if(1<wt){for(var Ce=Array(wt),Gt=0;Gt<wt;Gt++)Ce[Gt]=arguments[Gt+2];ct.children=Ce}return O(V.type,lt,void 0,void 0,Et,ct)},It.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},It.createElement=function(V,rt,dt){var ct,lt={},Et=null;if(rt!=null)for(ct in rt.key!==void 0&&(Et=""+rt.key),rt)Z.call(rt,ct)&&ct!=="key"&&ct!=="__self"&&ct!=="__source"&&(lt[ct]=rt[ct]);var wt=arguments.length-2;if(wt===1)lt.children=dt;else if(1<wt){for(var Ce=Array(wt),Gt=0;Gt<wt;Gt++)Ce[Gt]=arguments[Gt+2];lt.children=Ce}if(V&&V.defaultProps)for(ct in wt=V.defaultProps,wt)lt[ct]===void 0&&(lt[ct]=wt[ct]);return O(V,Et,void 0,void 0,null,lt)},It.createRef=function(){return{current:null}},It.forwardRef=function(V){return{$$typeof:u,render:V}},It.isValidElement=D,It.lazy=function(V){return{$$typeof:p,_payload:{_status:-1,_result:V},_init:ut}},It.memo=function(V,rt){return{$$typeof:f,type:V,compare:rt===void 0?null:rt}},It.startTransition=function(V){var rt=X.T,dt={};X.T=dt;try{var ct=V(),lt=X.S;lt!==null&&lt(dt,ct),typeof ct=="object"&&ct!==null&&typeof ct.then=="function"&&ct.then(Pt,yt)}catch(Et){yt(Et)}finally{X.T=rt}},It.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},It.use=function(V){return X.H.use(V)},It.useActionState=function(V,rt,dt){return X.H.useActionState(V,rt,dt)},It.useCallback=function(V,rt){return X.H.useCallback(V,rt)},It.useContext=function(V){return X.H.useContext(V)},It.useDebugValue=function(){},It.useDeferredValue=function(V,rt){return X.H.useDeferredValue(V,rt)},It.useEffect=function(V,rt){return X.H.useEffect(V,rt)},It.useId=function(){return X.H.useId()},It.useImperativeHandle=function(V,rt,dt){return X.H.useImperativeHandle(V,rt,dt)},It.useInsertionEffect=function(V,rt){return X.H.useInsertionEffect(V,rt)},It.useLayoutEffect=function(V,rt){return X.H.useLayoutEffect(V,rt)},It.useMemo=function(V,rt){return X.H.useMemo(V,rt)},It.useOptimistic=function(V,rt){return X.H.useOptimistic(V,rt)},It.useReducer=function(V,rt,dt){return X.H.useReducer(V,rt,dt)},It.useRef=function(V){return X.H.useRef(V)},It.useState=function(V){return X.H.useState(V)},It.useSyncExternalStore=function(V,rt,dt){return X.H.useSyncExternalStore(V,rt,dt)},It.useTransition=function(){return X.H.useTransition()},It.version="19.0.0",It}var qb;function gy(){return qb||(qb=1,Kg.exports=ER()),Kg.exports}var Q=gy();const py=xR(Q),SR=bR({__proto__:null,default:py},[Q]);var Yg={exports:{}},kc={},Xg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function AR(){return Gb||(Gb=1,function(n){function t(tt,ut){var yt=tt.length;tt.push(ut);t:for(;0<yt;){var Pt=yt-1>>>1,V=tt[Pt];if(0<r(V,ut))tt[Pt]=ut,tt[yt]=V,yt=Pt;else break t}}function e(tt){return tt.length===0?null:tt[0]}function i(tt){if(tt.length===0)return null;var ut=tt[0],yt=tt.pop();if(yt!==ut){tt[0]=yt;t:for(var Pt=0,V=tt.length,rt=V>>>1;Pt<rt;){var dt=2*(Pt+1)-1,ct=tt[dt],lt=dt+1,Et=tt[lt];if(0>r(ct,yt))lt<V&&0>r(Et,ct)?(tt[Pt]=Et,tt[lt]=yt,Pt=lt):(tt[Pt]=ct,tt[dt]=yt,Pt=dt);else if(lt<V&&0>r(Et,yt))tt[Pt]=Et,tt[lt]=yt,Pt=lt;else break t}}return ut}function r(tt,ut){var yt=tt.sortIndex-ut.sortIndex;return yt!==0?yt:tt.id-ut.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,v=null,x=3,T=!1,C=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function F(tt){for(var ut=e(f);ut!==null;){if(ut.callback===null)i(f);else if(ut.startTime<=tt)i(f),ut.sortIndex=ut.expirationTime,t(d,ut);else break;ut=e(f)}}function Y(tt){if(S=!1,F(tt),!C)if(e(d)!==null)C=!0,ft();else{var ut=e(f);ut!==null&&gt(Y,ut.startTime-tt)}}var X=!1,Z=-1,O=5,N=-1;function D(){return!(n.unstable_now()-N<O)}function k(){if(X){var tt=n.unstable_now();N=tt;var ut=!0;try{t:{C=!1,S&&(S=!1,L(Z),Z=-1),T=!0;var yt=x;try{e:{for(F(tt),v=e(d);v!==null&&!(v.expirationTime>tt&&D());){var Pt=v.callback;if(typeof Pt=="function"){v.callback=null,x=v.priorityLevel;var V=Pt(v.expirationTime<=tt);if(tt=n.unstable_now(),typeof V=="function"){v.callback=V,F(tt),ut=!0;break e}v===e(d)&&i(d),F(tt)}else i(d);v=e(d)}if(v!==null)ut=!0;else{var rt=e(f);rt!==null&&gt(Y,rt.startTime-tt),ut=!1}}break t}finally{v=null,x=yt,T=!1}ut=void 0}}finally{ut?j():X=!1}}}var j;if(typeof G=="function")j=function(){G(k)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,M=U.port2;U.port1.onmessage=k,j=function(){M.postMessage(null)}}else j=function(){A(k,0)};function ft(){X||(X=!0,j())}function gt(tt,ut){Z=A(function(){tt(n.unstable_now())},ut)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(tt){tt.callback=null},n.unstable_continueExecution=function(){C||T||(C=!0,ft())},n.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<tt?Math.floor(1e3/tt):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return e(d)},n.unstable_next=function(tt){switch(x){case 1:case 2:case 3:var ut=3;break;default:ut=x}var yt=x;x=ut;try{return tt()}finally{x=yt}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(tt,ut){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var yt=x;x=tt;try{return ut()}finally{x=yt}},n.unstable_scheduleCallback=function(tt,ut,yt){var Pt=n.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Pt+yt:Pt):yt=Pt,tt){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=yt+V,tt={id:p++,callback:ut,priorityLevel:tt,startTime:yt,expirationTime:V,sortIndex:-1},yt>Pt?(tt.sortIndex=yt,t(f,tt),e(d)===null&&tt===e(f)&&(S?(L(Z),Z=-1):S=!0,gt(Y,yt-Pt))):(tt.sortIndex=V,t(d,tt),C||T||(C=!0,ft())),tt},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(tt){var ut=x;return function(){var yt=x;x=ut;try{return tt.apply(this,arguments)}finally{x=yt}}}}(Zg)),Zg}var $b;function CR(){return $b||($b=1,Xg.exports=AR()),Xg.exports}var Jg={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function RR(){if(Qb)return cn;Qb=1;var n=gy();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},cn.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},cn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},cn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},cn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:T}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:x,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},cn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},cn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},cn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},cn.requestFormReset=function(d){i.d.r(d)},cn.unstable_batchedUpdates=function(d,f){return d(f)},cn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},cn.version="19.0.0",cn}var Wb;function tE(){if(Wb)return Jg.exports;Wb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Jg.exports=RR(),Jg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function IR(){if(Kb)return kc;Kb=1;var n=CR(),t=gy(),e=tE();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var o=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),Y=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Z(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function N(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case S:return"Suspense";case A:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case T:return(s.displayName||"Context")+".Provider";case x:return(s._context.displayName||"Context")+".Consumer";case C:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return a=s.displayName||null,a!==null?a:N(s.type)||"Memo";case G:a=s._payload,s=s._init;try{return N(s(a))}catch{}}return null}var D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=Object.assign,j,U;function M(s){if(j===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);j=a&&a[1]||"",U=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+s+U}var ft=!1;function gt(s,a){if(!s||ft)return"";ft=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(J){var W=J}Reflect.construct(s,[],st)}else{try{st.call()}catch(J){W=J}s.call(st.prototype)}}else{try{throw Error()}catch(J){W=J}(st=s())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),E=y[0],R=y[1];if(E&&R){var P=E.split(`
`),B=R.split(`
`);for(g=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(h===P.length||g===B.length)for(h=P.length-1,g=B.length-1;1<=h&&0<=g&&P[h]!==B[g];)g--;for(;1<=h&&0<=g;h--,g--)if(P[h]!==B[g]){if(h!==1||g!==1)do if(h--,g--,0>g||P[h]!==B[g]){var et=`
`+P[h].replace(" at new "," at ");return s.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",s.displayName)),et}while(1<=h&&0<=g);break}}}finally{ft=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?M(c):""}function tt(s){switch(s.tag){case 26:case 27:case 5:return M(s.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return s=gt(s.type,!1),s;case 11:return s=gt(s.type.render,!1),s;case 1:return s=gt(s.type,!0),s;default:return""}}function ut(s){try{var a="";do a+=tt(s),s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function yt(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function Pt(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function V(s){if(yt(s)!==s)throw Error(i(188))}function rt(s){var a=s.alternate;if(!a){if(a=yt(s),a===null)throw Error(i(188));return a!==s?null:s}for(var c=s,h=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return V(g),s;if(y===h)return V(g),a;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=g,h=y;else{for(var E=!1,R=g.child;R;){if(R===c){E=!0,c=g,h=y;break}if(R===h){E=!0,h=g,c=y;break}R=R.sibling}if(!E){for(R=y.child;R;){if(R===c){E=!0,c=y,h=g;break}if(R===h){E=!0,h=y,c=g;break}R=R.sibling}if(!E)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:a}function dt(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=dt(s),a!==null)return a;s=s.sibling}return null}var ct=Array.isArray,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et={pending:!1,data:null,method:null,action:null},wt=[],Ce=-1;function Gt(s){return{current:s}}function ge(s){0>Ce||(s.current=wt[Ce],wt[Ce]=null,Ce--)}function Jt(s,a){Ce++,wt[Ce]=s.current,s.current=a}var pn=Gt(null),$i=Gt(null),qn=Gt(null),Ps=Gt(null);function js(s,a){switch(Jt(qn,a),Jt($i,s),Jt(pn,null),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?pb(a):0;break;default:if(s=s===8?a.parentNode:a,a=s.tagName,s=s.namespaceURI)s=pb(s),a=yb(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ge(pn),Jt(pn,a)}function Qi(){ge(pn),ge($i),ge(qn)}function Cl(s){s.memoizedState!==null&&Jt(Ps,s);var a=pn.current,c=yb(a,s.type);a!==c&&(Jt($i,s),Jt(pn,c))}function Xa(s){$i.current===s&&(ge(pn),ge($i)),Ps.current===s&&(ge(Ps),Cc._currentValue=Et)}var Za=Object.prototype.hasOwnProperty,Qr=n.unstable_scheduleCallback,Ja=n.unstable_cancelCallback,Yf=n.unstable_shouldYield,Rl=n.unstable_requestPaint,Tn=n.unstable_now,Bu=n.unstable_getCurrentPriorityLevel,Pe=n.unstable_ImmediatePriority,Be=n.unstable_UserBlockingPriority,Wi=n.unstable_NormalPriority,Fu=n.unstable_LowPriority,Il=n.unstable_IdlePriority,Xf=n.log,Wr=n.unstable_setDisableYieldValue,Ls=null,on=null;function Nl(s){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Ls,s,void 0,(s.current.flags&128)===128)}catch{}}function bi(s){if(typeof Xf=="function"&&Wr(s),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Ls,s)}catch{}}var yn=Math.clz32?Math.clz32:qu,Dl=Math.log,Hu=Math.LN2;function qu(s){return s>>>=0,s===0?32:31-(Dl(s)/Hu|0)|0}var xi=128,Vs=4194304;function ci(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gn(s,a){var c=s.pendingLanes;if(c===0)return 0;var h=0,g=s.suspendedLanes,y=s.pingedLanes,E=s.warmLanes;s=s.finishedLanes!==0;var R=c&134217727;return R!==0?(c=R&~g,c!==0?h=ci(c):(y&=R,y!==0?h=ci(y):s||(E=R&~E,E!==0&&(h=ci(E))))):(R=c&~g,R!==0?h=ci(R):y!==0?h=ci(y):s||(E=c&~E,E!==0&&(h=ci(E)))),h===0?0:a!==0&&a!==h&&(a&g)===0&&(g=h&-h,E=a&-a,g>=E||g===32&&(E&4194176)!==0)?a:h}function Us(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function to(s,a){switch(s){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var s=xi;return xi<<=1,(xi&4194176)===0&&(xi=128),s}function zs(){var s=Vs;return Vs<<=1,(Vs&62914560)===0&&(Vs=4194304),s}function eo(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function Te(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Gu(s,a,c,h,g,y){var E=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var R=s.entanglements,P=s.expirationTimes,B=s.hiddenUpdates;for(c=E&~c;0<c;){var et=31-yn(c),st=1<<et;R[et]=0,P[et]=-1;var W=B[et];if(W!==null)for(B[et]=null,et=0;et<W.length;et++){var J=W[et];J!==null&&(J.lane&=-536870913)}c&=~st}h!==0&&Bs(s,h,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(E&~a))}function Bs(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-yn(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194218}function Fs(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var h=31-yn(c),g=1<<h;g&a|s[h]&a&&(s[h]|=a),c&=~g}}function $u(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qu(){var s=lt.p;return s!==0?s:(s=window.event,s===void 0?32:Pb(s.type))}function Hs(s,a){var c=lt.p;try{return lt.p=s,a()}finally{lt.p=c}}var wi=Math.random().toString(36).slice(2),Fe="__reactFiber$"+wi,je="__reactProps$"+wi,Ki="__reactContainer$"+wi,Kr="__reactEvents$"+wi,no="__reactListeners$"+wi,Ti="__reactHandles$"+wi,kl="__reactResources$"+wi,qs="__reactMarker$"+wi;function Yr(s){delete s[Fe],delete s[je],delete s[Kr],delete s[no],delete s[Ti]}function ui(s){var a=s[Fe];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Ki]||c[Fe]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=bb(s);s!==null;){if(c=s[Fe])return c;s=bb(s)}return a}s=c,c=s.parentNode}return null}function Yi(s){if(s=s[Fe]||s[Ki]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Gs(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function $s(s){var a=s[kl];return a||(a=s[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function he(s){s[qs]=!0}var Ol=new Set,io={};function Nn(s,a){En(s,a),En(s+"Capture",a)}function En(s,a){for(io[s]=a,s=0;s<a.length;s++)Ol.add(a[s])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},jl={};function Wu(s){return Za.call(jl,s)?!0:Za.call(Pl,s)?!1:Zf.test(s)?jl[s]=!0:(Pl[s]=!0,!1)}function Qs(s,a,c){if(Wu(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Ws(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function $n(s,a,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+h)}}function vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ku(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Jf(s){var a=Ku(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Xr(s){s._valueTracker||(s._valueTracker=Jf(s))}function Ll(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return s&&(h=Ku(s)?s.checked?"true":"false":s.value),s=h,s!==c?(a.setValue(s),!0):!1}function so(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Xi=/[\n"\\]/g;function pe(s){return s.replace(Xi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ks(s,a,c,h,g,y,E,R){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),a!=null?E==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+vn(a)):s.value!==""+vn(a)&&(s.value=""+vn(a)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),a!=null?ro(s,E,vn(a)):c!=null?ro(s,E,vn(c)):h!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+vn(R):s.removeAttribute("name")}function Zr(s,a,c,h,g,y,E,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;c=c!=null?""+vn(c):"",a=a!=null?""+vn(a):c,R||a===s.value||(s.value=a),s.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=R?s.checked:!!h,s.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function ro(s,a,c){a==="number"&&so(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function $t(s,a,c,h){if(s=s.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=a.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&h&&(s[c].defaultSelected=!0)}else{for(c=""+vn(c),a=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Jr(s,a,c){if(a!=null&&(a=""+vn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+vn(c):""}function Ys(s,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(ct(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=vn(a),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function Qn(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var tm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(s,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,c):typeof c!="number"||c===0||tm.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function Yu(s,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&c[g]!==h&&Vl(s,g,h)}else for(var y in a)a.hasOwnProperty(y)&&Vl(s,y,a[y])}function Ul(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(s){return nm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Wn=null;function ao(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zi=null,Ji=null;function ts(s){var a=Yi(s);if(a&&(s=a.stateNode)){var c=s[je]||null;t:switch(s=a.stateNode,a.type){case"input":if(Ks(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+pe(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==s&&h.form===s.form){var g=h[je]||null;if(!g)throw Error(i(90));Ks(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===s.form&&Ll(h)}break t;case"textarea":Jr(s,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&$t(s,!!c.multiple,a,!1)}}}var zl=!1;function Xu(s,a,c){if(zl)return s(a,c);zl=!0;try{var h=s(a);return h}finally{if(zl=!1,(Zi!==null||Ji!==null)&&(Fh(),Zi&&(a=Zi,s=Ji,Ji=Zi=null,ts(a),s)))for(a=0;a<s.length;a++)ts(s[a])}}function ta(s,a){var c=s.stateNode;if(c===null)return null;var h=c[je]||null;if(h===null)return null;c=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var Kn=!1;if(Dn)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Kn=!1}var Si=null,Xs=null,es=null;function Bl(){if(es)return es;var s,a=Xs,c=a.length,h,g="value"in Si?Si.value:Si.textContent,y=g.length;for(s=0;s<c&&a[s]===g[s];s++);var E=c-s;for(h=1;h<=E&&a[c-h]===g[y-h];h++);return es=g.slice(s,1<h?1-h:void 0)}function Ai(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ci(){return!0}function Fl(){return!1}function He(s){function a(c,h,g,y,E){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(c=s[R],this[R]=c?c(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ci:Fl,this.isPropagationStopped=Fl,this}return k(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),a}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=He(Xt),na=k({},Xt,{view:0,detail:0}),Zu=He(na),lo,co,Ri,ia=k({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ri&&(Ri&&s.type==="mousemove"?(lo=s.screenX-Ri.screenX,co=s.screenY-Ri.screenY):co=lo=0,Ri=s),lo)},movementY:function(s){return"movementY"in s?s.movementY:co}}),Yn=He(ia),Ju=k({},ia,{dataTransfer:0}),im=He(Ju),sa=k({},na,{relatedTarget:0}),uo=He(sa),Hl=k({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),ho=He(Hl),th=k({},Xt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fo=He(th),sm=k({},Xt,{data:0}),ql=He(sm),ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=nh[s])?!!a[s]:!1}function aa(){return Gl}var ih=k({},na,{key:function(s){if(s.key){var a=ra[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ai(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?eh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(s){return s.type==="keypress"?Ai(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ai(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mo=He(ih),sh=k({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$l=He(sh),ns=k({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),rh=He(ns),ah=k({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),oh=He(ah),lh=k({},ia,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),go=He(lh),_n=k({},Xt,{newState:0,oldState:0}),ch=He(_n),uh=[9,13,27,32],Ii=Dn&&"CompositionEvent"in window,m=null;Dn&&"documentMode"in document&&(m=document.documentMode);var b=Dn&&"TextEvent"in window&&!m,w=Dn&&(!Ii||m&&8<m&&11>=m),I=" ",q=!1;function K(s,a){switch(s){case"keyup":return uh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ot(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ut=!1;function Le(s,a){switch(s){case"compositionend":return ot(a);case"keypress":return a.which!==32?null:(q=!0,I);case"textInput":return s=a.data,s===I&&q?null:s;default:return null}}function zt(s,a){if(Ut)return s==="compositionend"||!Ii&&K(s,a)?(s=Bl(),es=Xs=Si=null,Ut=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return w&&a.locale!=="ko"?null:a.data;default:return null}}var qe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ve(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!qe[s.type]:a==="textarea"}function is(s,a,c,h){Zi?Ji?Ji.push(h):Ji=[h]:Zi=h,a=Qh(a,"onChange"),0<a.length&&(c=new oo("onChange","change",null,c,h),s.push({event:c,listeners:a}))}var Ye=null,Ni=null;function Ql(s){hb(s,0)}function hh(s){var a=Gs(s);if(Ll(a))return s}function zv(s,a){if(s==="change")return a}var Bv=!1;if(Dn){var rm;if(Dn){var am="oninput"in document;if(!am){var Fv=document.createElement("div");Fv.setAttribute("oninput","return;"),am=typeof Fv.oninput=="function"}rm=am}else rm=!1;Bv=rm&&(!document.documentMode||9<document.documentMode)}function Hv(){Ye&&(Ye.detachEvent("onpropertychange",qv),Ni=Ye=null)}function qv(s){if(s.propertyName==="value"&&hh(Ni)){var a=[];is(a,Ni,s,ao(s)),Xu(Ql,a)}}function W1(s,a,c){s==="focusin"?(Hv(),Ye=a,Ni=c,Ye.attachEvent("onpropertychange",qv)):s==="focusout"&&Hv()}function K1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hh(Ni)}function Y1(s,a){if(s==="click")return hh(a)}function X1(s,a){if(s==="input"||s==="change")return hh(a)}function Z1(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Mn=typeof Object.is=="function"?Object.is:Z1;function Wl(s,a){if(Mn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!Za.call(a,g)||!Mn(s[g],a[g]))return!1}return!0}function Gv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function $v(s,a){var c=Gv(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=a&&h>=a)return{node:c,offset:a-s};s=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Gv(c)}}function Qv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Qv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Wv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=so(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=so(s.document)}return a}function om(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function J1(s,a){var c=Wv(a);a=s.focusedElem;var h=s.selectionRange;if(c!==a&&a&&a.ownerDocument&&Qv(a.ownerDocument.documentElement,a)){if(h!==null&&om(a)){if(s=h.start,c=h.end,c===void 0&&(c=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(c,a.value.length);else if(c=(s=a.ownerDocument||document)&&s.defaultView||window,c.getSelection){c=c.getSelection();var g=a.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!c.extend&&y>h&&(g=h,h=y,y=g),g=$v(a,y);var E=$v(a,h);g&&E&&(c.rangeCount!==1||c.anchorNode!==g.node||c.anchorOffset!==g.offset||c.focusNode!==E.node||c.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),c.removeAllRanges(),y>h?(c.addRange(s),c.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),c.addRange(s)))}}for(s=[],c=a;c=c.parentNode;)c.nodeType===1&&s.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)c=s[a],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var tC=Dn&&"documentMode"in document&&11>=document.documentMode,po=null,lm=null,Kl=null,cm=!1;function Kv(s,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;cm||po==null||po!==so(h)||(h=po,"selectionStart"in h&&om(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Kl&&Wl(Kl,h)||(Kl=h,h=Qh(lm,"onSelect"),0<h.length&&(a=new oo("onSelect","select",null,a,c),s.push({event:a,listeners:h}),a.target=po)))}function oa(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var yo={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},um={},Yv={};Dn&&(Yv=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function la(s){if(um[s])return um[s];if(!yo[s])return s;var a=yo[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in Yv)return um[s]=a[c];return s}var Xv=la("animationend"),Zv=la("animationiteration"),Jv=la("animationstart"),eC=la("transitionrun"),nC=la("transitionstart"),iC=la("transitioncancel"),t_=la("transitionend"),e_=new Map,n_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function hi(s,a){e_.set(s,a),Nn(a,[s])}var Xn=[],vo=0,hm=0;function dh(){for(var s=vo,a=hm=vo=0;a<s;){var c=Xn[a];Xn[a++]=null;var h=Xn[a];Xn[a++]=null;var g=Xn[a];Xn[a++]=null;var y=Xn[a];if(Xn[a++]=null,h!==null&&g!==null){var E=h.pending;E===null?g.next=g:(g.next=E.next,E.next=g),h.pending=g}y!==0&&i_(c,g,y)}}function fh(s,a,c,h){Xn[vo++]=s,Xn[vo++]=a,Xn[vo++]=c,Xn[vo++]=h,hm|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function dm(s,a,c,h){return fh(s,a,c,h),mh(s)}function Zs(s,a){return fh(s,null,null,a),mh(s)}function i_(s,a,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var g=!1,y=s.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;g&&a!==null&&s.tag===3&&(y=s.stateNode,g=31-yn(c),y=y.hiddenUpdates,s=y[g],s===null?y[g]=[a]:s.push(a),a.lane=c|536870912)}function mh(s){if(50<bc)throw bc=0,vg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var _o={},s_=new WeakMap;function Zn(s,a){if(typeof s=="object"&&s!==null){var c=s_.get(s);return c!==void 0?c:(a={value:s,source:a,stack:ut(a)},s_.set(s,a),a)}return{value:s,source:a,stack:ut(a)}}var bo=[],xo=0,gh=null,ph=0,Jn=[],ti=0,ca=null,ss=1,rs="";function ua(s,a){bo[xo++]=ph,bo[xo++]=gh,gh=s,ph=a}function r_(s,a,c){Jn[ti++]=ss,Jn[ti++]=rs,Jn[ti++]=ca,ca=s;var h=ss;s=rs;var g=32-yn(h)-1;h&=~(1<<g),c+=1;var y=32-yn(a)+g;if(30<y){var E=g-g%5;y=(h&(1<<E)-1).toString(32),h>>=E,g-=E,ss=1<<32-yn(a)+g|c<<g|h,rs=y+s}else ss=1<<y|c<<g|h,rs=s}function fm(s){s.return!==null&&(ua(s,1),r_(s,1,0))}function mm(s){for(;s===gh;)gh=bo[--xo],bo[xo]=null,ph=bo[--xo],bo[xo]=null;for(;s===ca;)ca=Jn[--ti],Jn[ti]=null,rs=Jn[--ti],Jn[ti]=null,ss=Jn[--ti],Jn[ti]=null}var bn=null,Xe=null,Qt=!1,di=null,Di=!1,gm=Error(i(519));function ha(s){var a=Error(i(418,""));throw Zl(Zn(a,s)),gm}function a_(s){var a=s.stateNode,c=s.type,h=s.memoizedProps;switch(a[Fe]=s,a[je]=h,c){case"dialog":jt("cancel",a),jt("close",a);break;case"iframe":case"object":case"embed":jt("load",a);break;case"video":case"audio":for(c=0;c<wc.length;c++)jt(wc[c],a);break;case"source":jt("error",a);break;case"img":case"image":case"link":jt("error",a),jt("load",a);break;case"details":jt("toggle",a);break;case"input":jt("invalid",a),Zr(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Xr(a);break;case"select":jt("invalid",a);break;case"textarea":jt("invalid",a),Ys(a,h.value,h.defaultValue,h.children),Xr(a)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||gb(a.textContent,c)?(h.popover!=null&&(jt("beforetoggle",a),jt("toggle",a)),h.onScroll!=null&&jt("scroll",a),h.onScrollEnd!=null&&jt("scrollend",a),h.onClick!=null&&(a.onclick=Wh),a=!0):a=!1,a||ha(s)}function o_(s){for(bn=s.return;bn;)switch(bn.tag){case 3:case 27:Di=!0;return;case 5:case 13:Di=!1;return;default:bn=bn.return}}function Yl(s){if(s!==bn)return!1;if(!Qt)return o_(s),Qt=!0,!1;var a=!1,c;if((c=s.tag!==3&&s.tag!==27)&&((c=s.tag===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Pg(s.type,s.memoizedProps)),c=!c),c&&(a=!0),a&&Xe&&ha(s),o_(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(a===0){Xe=mi(s.nextSibling);break t}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;s=s.nextSibling}Xe=null}}else Xe=bn?mi(s.stateNode.nextSibling):null;return!0}function Xl(){Xe=bn=null,Qt=!1}function Zl(s){di===null?di=[s]:di.push(s)}var Jl=Error(i(460)),l_=Error(i(474)),pm={then:function(){}};function c_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function yh(){}function u_(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(yh,yh),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,s===Jl?Error(i(483)):s;default:if(typeof a.status=="string")a.then(yh,yh);else{if(s=ae,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,s===Jl?Error(i(483)):s}throw tc=a,Jl}}var tc=null;function h_(){if(tc===null)throw Error(i(459));var s=tc;return tc=null,s}var wo=null,ec=0;function vh(s){var a=ec;return ec+=1,wo===null&&(wo=[]),u_(wo,s,a)}function nc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function _h(s,a){throw a.$$typeof===o?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function d_(s){var a=s._init;return a(s._payload)}function f_(s){function a(H,z){if(s){var $=H.deletions;$===null?(H.deletions=[z],H.flags|=16):$.push(z)}}function c(H,z){if(!s)return null;for(;z!==null;)a(H,z),z=z.sibling;return null}function h(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function g(H,z){return H=ur(H,z),H.index=0,H.sibling=null,H}function y(H,z,$){return H.index=$,s?($=H.alternate,$!==null?($=$.index,$<z?(H.flags|=33554434,z):$):(H.flags|=33554434,z)):(H.flags|=1048576,z)}function E(H){return s&&H.alternate===null&&(H.flags|=33554434),H}function R(H,z,$,nt){return z===null||z.tag!==6?(z=ug($,H.mode,nt),z.return=H,z):(z=g(z,$),z.return=H,z)}function P(H,z,$,nt){var mt=$.type;return mt===d?et(H,z,$.props.children,nt,$.key):z!==null&&(z.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===G&&d_(mt)===z.type)?(z=g(z,$.props),nc(z,$),z.return=H,z):(z=Lh($.type,$.key,$.props,null,H.mode,nt),nc(z,$),z.return=H,z)}function B(H,z,$,nt){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=hg($,H.mode,nt),z.return=H,z):(z=g(z,$.children||[]),z.return=H,z)}function et(H,z,$,nt,mt){return z===null||z.tag!==7?(z=xa($,H.mode,nt,mt),z.return=H,z):(z=g(z,$),z.return=H,z)}function st(H,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ug(""+z,H.mode,$),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case l:return $=Lh(z.type,z.key,z.props,null,H.mode,$),nc($,z),$.return=H,$;case u:return z=hg(z,H.mode,$),z.return=H,z;case G:var nt=z._init;return z=nt(z._payload),st(H,z,$)}if(ct(z)||Z(z))return z=xa(z,H.mode,$,null),z.return=H,z;if(typeof z.then=="function")return st(H,vh(z),$);if(z.$$typeof===T)return st(H,Oh(H,z),$);_h(H,z)}return null}function W(H,z,$,nt){var mt=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return mt!==null?null:R(H,z,""+$,nt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case l:return $.key===mt?P(H,z,$,nt):null;case u:return $.key===mt?B(H,z,$,nt):null;case G:return mt=$._init,$=mt($._payload),W(H,z,$,nt)}if(ct($)||Z($))return mt!==null?null:et(H,z,$,nt,null);if(typeof $.then=="function")return W(H,z,vh($),nt);if($.$$typeof===T)return W(H,z,Oh(H,$),nt);_h(H,$)}return null}function J(H,z,$,nt,mt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return H=H.get($)||null,R(z,H,""+nt,mt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case l:return H=H.get(nt.key===null?$:nt.key)||null,P(z,H,nt,mt);case u:return H=H.get(nt.key===null?$:nt.key)||null,B(z,H,nt,mt);case G:var Mt=nt._init;return nt=Mt(nt._payload),J(H,z,$,nt,mt)}if(ct(nt)||Z(nt))return H=H.get($)||null,et(z,H,nt,mt,null);if(typeof nt.then=="function")return J(H,z,$,vh(nt),mt);if(nt.$$typeof===T)return J(H,z,$,Oh(z,nt),mt);_h(z,nt)}return null}function vt(H,z,$,nt){for(var mt=null,Mt=null,_t=z,xt=z=0,Qe=null;_t!==null&&xt<$.length;xt++){_t.index>xt?(Qe=_t,_t=null):Qe=_t.sibling;var Wt=W(H,_t,$[xt],nt);if(Wt===null){_t===null&&(_t=Qe);break}s&&_t&&Wt.alternate===null&&a(H,_t),z=y(Wt,z,xt),Mt===null?mt=Wt:Mt.sibling=Wt,Mt=Wt,_t=Qe}if(xt===$.length)return c(H,_t),Qt&&ua(H,xt),mt;if(_t===null){for(;xt<$.length;xt++)_t=st(H,$[xt],nt),_t!==null&&(z=y(_t,z,xt),Mt===null?mt=_t:Mt.sibling=_t,Mt=_t);return Qt&&ua(H,xt),mt}for(_t=h(_t);xt<$.length;xt++)Qe=J(_t,H,xt,$[xt],nt),Qe!==null&&(s&&Qe.alternate!==null&&_t.delete(Qe.key===null?xt:Qe.key),z=y(Qe,z,xt),Mt===null?mt=Qe:Mt.sibling=Qe,Mt=Qe);return s&&_t.forEach(function(yr){return a(H,yr)}),Qt&&ua(H,xt),mt}function At(H,z,$,nt){if($==null)throw Error(i(151));for(var mt=null,Mt=null,_t=z,xt=z=0,Qe=null,Wt=$.next();_t!==null&&!Wt.done;xt++,Wt=$.next()){_t.index>xt?(Qe=_t,_t=null):Qe=_t.sibling;var yr=W(H,_t,Wt.value,nt);if(yr===null){_t===null&&(_t=Qe);break}s&&_t&&yr.alternate===null&&a(H,_t),z=y(yr,z,xt),Mt===null?mt=yr:Mt.sibling=yr,Mt=yr,_t=Qe}if(Wt.done)return c(H,_t),Qt&&ua(H,xt),mt;if(_t===null){for(;!Wt.done;xt++,Wt=$.next())Wt=st(H,Wt.value,nt),Wt!==null&&(z=y(Wt,z,xt),Mt===null?mt=Wt:Mt.sibling=Wt,Mt=Wt);return Qt&&ua(H,xt),mt}for(_t=h(_t);!Wt.done;xt++,Wt=$.next())Wt=J(_t,H,xt,Wt.value,nt),Wt!==null&&(s&&Wt.alternate!==null&&_t.delete(Wt.key===null?xt:Wt.key),z=y(Wt,z,xt),Mt===null?mt=Wt:Mt.sibling=Wt,Mt=Wt);return s&&_t.forEach(function(yR){return a(H,yR)}),Qt&&ua(H,xt),mt}function _e(H,z,$,nt){if(typeof $=="object"&&$!==null&&$.type===d&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case l:t:{for(var mt=$.key;z!==null;){if(z.key===mt){if(mt=$.type,mt===d){if(z.tag===7){c(H,z.sibling),nt=g(z,$.props.children),nt.return=H,H=nt;break t}}else if(z.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===G&&d_(mt)===z.type){c(H,z.sibling),nt=g(z,$.props),nc(nt,$),nt.return=H,H=nt;break t}c(H,z);break}else a(H,z);z=z.sibling}$.type===d?(nt=xa($.props.children,H.mode,nt,$.key),nt.return=H,H=nt):(nt=Lh($.type,$.key,$.props,null,H.mode,nt),nc(nt,$),nt.return=H,H=nt)}return E(H);case u:t:{for(mt=$.key;z!==null;){if(z.key===mt)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){c(H,z.sibling),nt=g(z,$.children||[]),nt.return=H,H=nt;break t}else{c(H,z);break}else a(H,z);z=z.sibling}nt=hg($,H.mode,nt),nt.return=H,H=nt}return E(H);case G:return mt=$._init,$=mt($._payload),_e(H,z,$,nt)}if(ct($))return vt(H,z,$,nt);if(Z($)){if(mt=Z($),typeof mt!="function")throw Error(i(150));return $=mt.call($),At(H,z,$,nt)}if(typeof $.then=="function")return _e(H,z,vh($),nt);if($.$$typeof===T)return _e(H,z,Oh(H,$),nt);_h(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(c(H,z.sibling),nt=g(z,$),nt.return=H,H=nt):(c(H,z),nt=ug($,H.mode,nt),nt.return=H,H=nt),E(H)):c(H,z)}return function(H,z,$,nt){try{ec=0;var mt=_e(H,z,$,nt);return wo=null,mt}catch(_t){if(_t===Jl)throw _t;var Mt=si(29,_t,null,H.mode);return Mt.lanes=nt,Mt.return=H,Mt}finally{}}}var da=f_(!0),m_=f_(!1),To=Gt(null),bh=Gt(0);function g_(s,a){s=ps,Jt(bh,s),Jt(To,a),ps=s|a.baseLanes}function ym(){Jt(bh,ps),Jt(To,To.current)}function vm(){ps=bh.current,ge(To),ge(bh)}var ei=Gt(null),Mi=null;function Js(s){var a=s.alternate;Jt(Ue,Ue.current&1),Jt(ei,s),Mi===null&&(a===null||To.current!==null||a.memoizedState!==null)&&(Mi=s)}function p_(s){if(s.tag===22){if(Jt(Ue,Ue.current),Jt(ei,s),Mi===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Mi=s)}}else tr()}function tr(){Jt(Ue,Ue.current),Jt(ei,ei.current)}function as(s){ge(ei),Mi===s&&(Mi=null),ge(Ue)}var Ue=Gt(0);function xh(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var sC=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},rC=n.unstable_scheduleCallback,aC=n.unstable_NormalPriority,ze={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _m(){return{controller:new sC,data:new Map,refCount:0}}function ic(s){s.refCount--,s.refCount===0&&rC(aC,function(){s.controller.abort()})}var sc=null,bm=0,Eo=0,So=null;function oC(s,a){if(sc===null){var c=sc=[];bm=0,Eo=Ag(),So={status:"pending",value:void 0,then:function(h){c.push(h)}}}return bm++,a.then(y_,y_),a}function y_(){if(--bm===0&&sc!==null){So!==null&&(So.status="fulfilled");var s=sc;sc=null,Eo=0,So=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function lC(s,a){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var v_=D.S;D.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&oC(s,a),v_!==null&&v_(s,a)};var fa=Gt(null);function xm(){var s=fa.current;return s!==null?s:ae.pooledCache}function wh(s,a){a===null?Jt(fa,fa.current):Jt(fa,a.pool)}function __(){var s=xm();return s===null?null:{parent:ze._currentValue,pool:s}}var er=0,Dt=null,ie=null,Re=null,Th=!1,Ao=!1,ma=!1,Eh=0,rc=0,Co=null,cC=0;function Ee(){throw Error(i(321))}function wm(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Mn(s[c],a[c]))return!1;return!0}function Tm(s,a,c,h,g,y){return er=y,Dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,D.H=s===null||s.memoizedState===null?ga:nr,ma=!1,y=c(h,g),ma=!1,Ao&&(y=x_(a,c,h,g)),b_(s),y}function b_(s){D.H=ki;var a=ie!==null&&ie.next!==null;if(er=0,Re=ie=Dt=null,Th=!1,rc=0,Co=null,a)throw Error(i(300));s===null||Ge||(s=s.dependencies,s!==null&&kh(s)&&(Ge=!0))}function x_(s,a,c,h){Dt=s;var g=0;do{if(Ao&&(Co=null),rc=0,Ao=!1,25<=g)throw Error(i(301));if(g+=1,Re=ie=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}D.H=pa,y=a(c,h)}while(Ao);return y}function uC(){var s=D.H,a=s.useState()[0];return a=typeof a.then=="function"?ac(a):a,s=s.useState()[0],(ie!==null?ie.memoizedState:null)!==s&&(Dt.flags|=1024),a}function Em(){var s=Eh!==0;return Eh=0,s}function Sm(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Am(s){if(Th){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Th=!1}er=0,Re=ie=Dt=null,Ao=!1,rc=Eh=0,Co=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?Dt.memoizedState=Re=s:Re=Re.next=s,Re}function Ie(){if(ie===null){var s=Dt.alternate;s=s!==null?s.memoizedState:null}else s=ie.next;var a=Re===null?Dt.memoizedState:Re.next;if(a!==null)Re=a,ie=s;else{if(s===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));ie=s,s={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Re===null?Dt.memoizedState=Re=s:Re=Re.next=s}return Re}var Sh;Sh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ac(s){var a=rc;return rc+=1,Co===null&&(Co=[]),s=u_(Co,s,a),a=Dt,(Re===null?a.memoizedState:Re.next)===null&&(a=a.alternate,D.H=a===null||a.memoizedState===null?ga:nr),s}function Ah(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ac(s);if(s.$$typeof===T)return ln(s)}throw Error(i(438,String(s)))}function Cm(s){var a=null,c=Dt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Dt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Sh(),Dt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),h=0;h<s;h++)c[h]=Y;return a.index++,c}function os(s,a){return typeof a=="function"?a(s):a}function Ch(s){var a=Ie();return Rm(a,ie,s)}function Rm(s,a,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var g=s.baseQueue,y=h.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}a.baseQueue=g=y,h.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{a=g.next;var R=E=null,P=null,B=a,et=!1;do{var st=B.lane&-536870913;if(st!==B.lane?(Bt&st)===st:(er&st)===st){var W=B.revertLane;if(W===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),st===Eo&&(et=!0);else if((er&W)===W){B=B.next,W===Eo&&(et=!0);continue}else st={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},P===null?(R=P=st,E=y):P=P.next=st,Dt.lanes|=W,hr|=W;st=B.action,ma&&c(y,st),y=B.hasEagerState?B.eagerState:c(y,st)}else W={lane:st,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},P===null?(R=P=W,E=y):P=P.next=W,Dt.lanes|=st,hr|=st;B=B.next}while(B!==null&&B!==a);if(P===null?E=y:P.next=R,!Mn(y,s.memoizedState)&&(Ge=!0,et&&(c=So,c!==null)))throw c;s.memoizedState=y,s.baseState=E,s.baseQueue=P,h.lastRenderedState=y}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Im(s){var a=Ie(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do y=s(y,E.action),E=E.next;while(E!==g);Mn(y,a.memoizedState)||(Ge=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function w_(s,a,c){var h=Dt,g=Ie(),y=Qt;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var E=!Mn((ie||g).memoizedState,c);if(E&&(g.memoizedState=c,Ge=!0),g=g.queue,Mm(S_.bind(null,h,g,s),[s]),g.getSnapshot!==a||E||Re!==null&&Re.memoizedState.tag&1){if(h.flags|=2048,Ro(9,E_.bind(null,h,g,c,a),{destroy:void 0},null),ae===null)throw Error(i(349));y||(er&60)!==0||T_(h,a,c)}return c}function T_(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Dt.updateQueue,a===null?(a=Sh(),Dt.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function E_(s,a,c,h){a.value=c,a.getSnapshot=h,A_(a)&&C_(s)}function S_(s,a,c){return c(function(){A_(a)&&C_(s)})}function A_(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Mn(s,c)}catch{return!0}}function C_(s){var a=Zs(s,2);a!==null&&xn(a,s,2)}function Nm(s){var a=Sn();if(typeof s=="function"){var c=s;if(s=c(),ma){bi(!0);try{c()}finally{bi(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:s},a}function R_(s,a,c,h){return s.baseState=c,Rm(s,ie,typeof h=="function"?h:os)}function hC(s,a,c,h,g){if(Nh(s))throw Error(i(485));if(s=a.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};D.T!==null?c(!0):y.isTransition=!1,h(y),c=a.pending,c===null?(y.next=a.pending=y,I_(a,y)):(y.next=c.next,a.pending=c.next=y)}}function I_(s,a){var c=a.action,h=a.payload,g=s.state;if(a.isTransition){var y=D.T,E={};D.T=E;try{var R=c(g,h),P=D.S;P!==null&&P(E,R),N_(s,a,R)}catch(B){Dm(s,a,B)}finally{D.T=y}}else try{y=c(g,h),N_(s,a,y)}catch(B){Dm(s,a,B)}}function N_(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){D_(s,a,h)},function(h){return Dm(s,a,h)}):D_(s,a,c)}function D_(s,a,c){a.status="fulfilled",a.value=c,M_(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,I_(s,c)))}function Dm(s,a,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,M_(a),a=a.next;while(a!==h)}s.action=null}function M_(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function k_(s,a){return a}function O_(s,a){if(Qt){var c=ae.formState;if(c!==null){t:{var h=Dt;if(Qt){if(Xe){e:{for(var g=Xe,y=Di;g.nodeType!==8;){if(!y){g=null;break e}if(g=mi(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Xe=mi(g.nextSibling),h=g.data==="F!";break t}}ha(h)}h=!1}h&&(a=c[0])}}return c=Sn(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k_,lastRenderedState:a},c.queue=h,c=Z_.bind(null,Dt,h),h.dispatch=c,h=Nm(!1),y=Lm.bind(null,Dt,!1,h.queue),h=Sn(),g={state:a,dispatch:null,action:s,pending:null},h.queue=g,c=hC.bind(null,Dt,g,y,c),g.dispatch=c,h.memoizedState=s,[a,c,!1]}function P_(s){var a=Ie();return j_(a,ie,s)}function j_(s,a,c){a=Rm(s,a,k_)[0],s=Ch(os)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?ac(a):a;var h=Ie(),g=h.queue,y=g.dispatch;return c!==h.memoizedState&&(Dt.flags|=2048,Ro(9,dC.bind(null,g,c),{destroy:void 0},null)),[a,y,s]}function dC(s,a){s.action=a}function L_(s){var a=Ie(),c=ie;if(c!==null)return j_(a,c,s);Ie(),a=a.memoizedState,c=Ie();var h=c.queue.dispatch;return c.memoizedState=s,[a,h,!1]}function Ro(s,a,c,h){return s={tag:s,create:a,inst:c,deps:h,next:null},a=Dt.updateQueue,a===null&&(a=Sh(),Dt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,a.lastEffect=s),s}function V_(){return Ie().memoizedState}function Rh(s,a,c,h){var g=Sn();Dt.flags|=s,g.memoizedState=Ro(1|a,c,{destroy:void 0},h===void 0?null:h)}function Ih(s,a,c,h){var g=Ie();h=h===void 0?null:h;var y=g.memoizedState.inst;ie!==null&&h!==null&&wm(h,ie.memoizedState.deps)?g.memoizedState=Ro(a,c,y,h):(Dt.flags|=s,g.memoizedState=Ro(1|a,c,y,h))}function U_(s,a){Rh(8390656,8,s,a)}function Mm(s,a){Ih(2048,8,s,a)}function z_(s,a){return Ih(4,2,s,a)}function B_(s,a){return Ih(4,4,s,a)}function F_(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function H_(s,a,c){c=c!=null?c.concat([s]):null,Ih(4,4,F_.bind(null,a,s),c)}function km(){}function q_(s,a){var c=Ie();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&wm(a,h[1])?h[0]:(c.memoizedState=[s,a],s)}function G_(s,a){var c=Ie();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&wm(a,h[1]))return h[0];if(h=s(),ma){bi(!0);try{s()}finally{bi(!1)}}return c.memoizedState=[h,a],h}function Om(s,a,c){return c===void 0||(er&1073741824)!==0?s.memoizedState=a:(s.memoizedState=c,s=Q0(),Dt.lanes|=s,hr|=s,c)}function $_(s,a,c,h){return Mn(c,a)?c:To.current!==null?(s=Om(s,c,h),Mn(s,a)||(Ge=!0),s):(er&42)===0?(Ge=!0,s.memoizedState=c):(s=Q0(),Dt.lanes|=s,hr|=s,a)}function Q_(s,a,c,h,g){var y=lt.p;lt.p=y!==0&&8>y?y:8;var E=D.T,R={};D.T=R,Lm(s,!1,a,c);try{var P=g(),B=D.S;if(B!==null&&B(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var et=lC(P,h);oc(s,a,et,jn(s))}else oc(s,a,h,jn(s))}catch(st){oc(s,a,{then:function(){},status:"rejected",reason:st},jn())}finally{lt.p=y,D.T=E}}function fC(){}function Pm(s,a,c,h){if(s.tag!==5)throw Error(i(476));var g=W_(s).queue;Q_(s,g,a,Et,c===null?fC:function(){return K_(s),c(h)})}function W_(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:Et,baseState:Et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:Et},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function K_(s){var a=W_(s).next.queue;oc(s,a,{},jn())}function jm(){return ln(Cc)}function Y_(){return Ie().memoizedState}function X_(){return Ie().memoizedState}function mC(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=jn();s=rr(c);var h=ar(a,s,c);h!==null&&(xn(h,a,c),uc(h,a,c)),a={cache:_m()},s.payload=a;return}a=a.return}}function gC(s,a,c){var h=jn();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Nh(s)?J_(a,c):(c=dm(s,a,c,h),c!==null&&(xn(c,s,h),t0(c,a,h)))}function Z_(s,a,c){var h=jn();oc(s,a,c,h)}function oc(s,a,c,h){var g={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Nh(s))J_(a,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,R=y(E,c);if(g.hasEagerState=!0,g.eagerState=R,Mn(R,E))return fh(s,a,g,0),ae===null&&dh(),!1}catch{}finally{}if(c=dm(s,a,g,h),c!==null)return xn(c,s,h),t0(c,a,h),!0}return!1}function Lm(s,a,c,h){if(h={lane:2,revertLane:Ag(),action:h,hasEagerState:!1,eagerState:null,next:null},Nh(s)){if(a)throw Error(i(479))}else a=dm(s,c,h,2),a!==null&&xn(a,s,2)}function Nh(s){var a=s.alternate;return s===Dt||a!==null&&a===Dt}function J_(s,a){Ao=Th=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function t0(s,a,c){if((c&4194176)!==0){var h=a.lanes;h&=s.pendingLanes,c|=h,a.lanes=c,Fs(s,c)}}var ki={readContext:ln,use:Ah,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee};ki.useCacheRefresh=Ee,ki.useMemoCache=Ee,ki.useHostTransitionStatus=Ee,ki.useFormState=Ee,ki.useActionState=Ee,ki.useOptimistic=Ee;var ga={readContext:ln,use:Ah,useCallback:function(s,a){return Sn().memoizedState=[s,a===void 0?null:a],s},useContext:ln,useEffect:U_,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Rh(4194308,4,F_.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Rh(4194308,4,s,a)},useInsertionEffect:function(s,a){Rh(4,2,s,a)},useMemo:function(s,a){var c=Sn();a=a===void 0?null:a;var h=s();if(ma){bi(!0);try{s()}finally{bi(!1)}}return c.memoizedState=[h,a],h},useReducer:function(s,a,c){var h=Sn();if(c!==void 0){var g=c(a);if(ma){bi(!0);try{c(a)}finally{bi(!1)}}}else g=a;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=gC.bind(null,Dt,s),[h.memoizedState,s]},useRef:function(s){var a=Sn();return s={current:s},a.memoizedState=s},useState:function(s){s=Nm(s);var a=s.queue,c=Z_.bind(null,Dt,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:km,useDeferredValue:function(s,a){var c=Sn();return Om(c,s,a)},useTransition:function(){var s=Nm(!1);return s=Q_.bind(null,Dt,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var h=Dt,g=Sn();if(Qt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),ae===null)throw Error(i(349));(Bt&60)!==0||T_(h,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,U_(S_.bind(null,h,y,s),[s]),h.flags|=2048,Ro(9,E_.bind(null,h,y,c,a),{destroy:void 0},null),c},useId:function(){var s=Sn(),a=ae.identifierPrefix;if(Qt){var c=rs,h=ss;c=(h&~(1<<32-yn(h)-1)).toString(32)+c,a=":"+a+"R"+c,c=Eh++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=cC++,a=":"+a+"r"+c.toString(32)+":";return s.memoizedState=a},useCacheRefresh:function(){return Sn().memoizedState=mC.bind(null,Dt)}};ga.useMemoCache=Cm,ga.useHostTransitionStatus=jm,ga.useFormState=O_,ga.useActionState=O_,ga.useOptimistic=function(s){var a=Sn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Lm.bind(null,Dt,!0,c),c.dispatch=a,[s,a]};var nr={readContext:ln,use:Ah,useCallback:q_,useContext:ln,useEffect:Mm,useImperativeHandle:H_,useInsertionEffect:z_,useLayoutEffect:B_,useMemo:G_,useReducer:Ch,useRef:V_,useState:function(){return Ch(os)},useDebugValue:km,useDeferredValue:function(s,a){var c=Ie();return $_(c,ie.memoizedState,s,a)},useTransition:function(){var s=Ch(os)[0],a=Ie().memoizedState;return[typeof s=="boolean"?s:ac(s),a]},useSyncExternalStore:w_,useId:Y_};nr.useCacheRefresh=X_,nr.useMemoCache=Cm,nr.useHostTransitionStatus=jm,nr.useFormState=P_,nr.useActionState=P_,nr.useOptimistic=function(s,a){var c=Ie();return R_(c,ie,s,a)};var pa={readContext:ln,use:Ah,useCallback:q_,useContext:ln,useEffect:Mm,useImperativeHandle:H_,useInsertionEffect:z_,useLayoutEffect:B_,useMemo:G_,useReducer:Im,useRef:V_,useState:function(){return Im(os)},useDebugValue:km,useDeferredValue:function(s,a){var c=Ie();return ie===null?Om(c,s,a):$_(c,ie.memoizedState,s,a)},useTransition:function(){var s=Im(os)[0],a=Ie().memoizedState;return[typeof s=="boolean"?s:ac(s),a]},useSyncExternalStore:w_,useId:Y_};pa.useCacheRefresh=X_,pa.useMemoCache=Cm,pa.useHostTransitionStatus=jm,pa.useFormState=L_,pa.useActionState=L_,pa.useOptimistic=function(s,a){var c=Ie();return ie!==null?R_(c,ie,s,a):(c.baseState=s,[s,c.queue.dispatch])};function Vm(s,a,c,h){a=s.memoizedState,c=c(h,a),c=c==null?a:k({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Um={isMounted:function(s){return(s=s._reactInternals)?yt(s)===s:!1},enqueueSetState:function(s,a,c){s=s._reactInternals;var h=jn(),g=rr(h);g.payload=a,c!=null&&(g.callback=c),a=ar(s,g,h),a!==null&&(xn(a,s,h),uc(a,s,h))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var h=jn(),g=rr(h);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=ar(s,g,h),a!==null&&(xn(a,s,h),uc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=jn(),h=rr(c);h.tag=2,a!=null&&(h.callback=a),a=ar(s,h,c),a!==null&&(xn(a,s,c),uc(a,s,c))}};function e0(s,a,c,h,g,y,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,E):a.prototype&&a.prototype.isPureReactComponent?!Wl(c,h)||!Wl(g,y):!0}function n0(s,a,c,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==s&&Um.enqueueReplaceState(a,a.state,null)}function ya(s,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(s=s.defaultProps){c===a&&(c=k({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}var Dh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function i0(s){Dh(s)}function s0(s){console.error(s)}function r0(s){Dh(s)}function Mh(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function a0(s,a,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function zm(s,a,c){return c=rr(c),c.tag=3,c.payload={element:null},c.callback=function(){Mh(s,a)},c}function o0(s){return s=rr(s),s.tag=3,s}function l0(s,a,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;s.payload=function(){return g(y)},s.callback=function(){a0(a,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){a0(a,c,h),typeof g!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function pC(s,a,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&cc(a,c,g,!0),c=ei.current,c!==null){switch(c.tag){case 13:return Mi===null?xg():c.alternate===null&&ve===0&&(ve=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===pm?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),Tg(s,h,g)),!1;case 22:return c.flags|=65536,h===pm?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),Tg(s,h,g)),!1}throw Error(i(435,c.tag))}return Tg(s,h,g),xg(),!1}if(Qt)return a=ei.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==gm&&(s=Error(i(422),{cause:h}),Zl(Zn(s,c)))):(h!==gm&&(a=Error(i(423),{cause:h}),Zl(Zn(a,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=Zn(h,c),g=zm(s.stateNode,h,g),eg(s,g),ve!==4&&(ve=2)),!1;var y=Error(i(520),{cause:h});if(y=Zn(y,c),vc===null?vc=[y]:vc.push(y),ve!==4&&(ve=2),a===null)return!0;h=Zn(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=zm(c.stateNode,h,s),eg(c,s),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(dr===null||!dr.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=o0(g),l0(g,s,c,h),eg(c,g),!1}c=c.return}while(c!==null);return!1}var c0=Error(i(461)),Ge=!1;function Ze(s,a,c,h){a.child=s===null?m_(a,null,c,h):da(a,s.child,c,h)}function u0(s,a,c,h,g){c=c.render;var y=a.ref;if("ref"in h){var E={};for(var R in h)R!=="ref"&&(E[R]=h[R])}else E=h;return _a(a),h=Tm(s,a,c,E,y,g),R=Em(),s!==null&&!Ge?(Sm(s,a,g),ls(s,a,g)):(Qt&&R&&fm(a),a.flags|=1,Ze(s,a,h,g),a.child)}function h0(s,a,c,h,g){if(s===null){var y=c.type;return typeof y=="function"&&!cg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,d0(s,a,y,h,g)):(s=Lh(c.type,null,h,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!Km(s,g)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Wl,c(E,h)&&s.ref===a.ref)return ls(s,a,g)}return a.flags|=1,s=ur(y,h),s.ref=a.ref,s.return=a,a.child=s}function d0(s,a,c,h,g){if(s!==null){var y=s.memoizedProps;if(Wl(y,h)&&s.ref===a.ref)if(Ge=!1,a.pendingProps=h=y,Km(s,g))(s.flags&131072)!==0&&(Ge=!0);else return a.lanes=s.lanes,ls(s,a,g)}return Bm(s,a,c,h,g)}function f0(s,a,c){var h=a.pendingProps,g=h.children,y=(a.stateNode._pendingVisibility&2)!==0,E=s!==null?s.memoizedState:null;if(lc(s,a),h.mode==="hidden"||y){if((a.flags&128)!==0){if(h=E!==null?E.baseLanes|c:c,s!==null){for(g=a.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;a.childLanes=y&~h}else a.childLanes=0,a.child=null;return m0(s,a,h,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&wh(a,E!==null?E.cachePool:null),E!==null?g_(a,E):ym(),p_(a);else return a.lanes=a.childLanes=536870912,m0(s,a,E!==null?E.baseLanes|c:c,c)}else E!==null?(wh(a,E.cachePool),g_(a,E),tr(),a.memoizedState=null):(s!==null&&wh(a,null),ym(),tr());return Ze(s,a,g,c),a.child}function m0(s,a,c,h){var g=xm();return g=g===null?null:{parent:ze._currentValue,pool:g},a.memoizedState={baseLanes:c,cachePool:g},s!==null&&wh(a,null),ym(),p_(a),s!==null&&cc(s,a,h,!0),null}function lc(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(a.flags|=2097664)}}function Bm(s,a,c,h,g){return _a(a),c=Tm(s,a,c,h,void 0,g),h=Em(),s!==null&&!Ge?(Sm(s,a,g),ls(s,a,g)):(Qt&&h&&fm(a),a.flags|=1,Ze(s,a,c,g),a.child)}function g0(s,a,c,h,g,y){return _a(a),a.updateQueue=null,c=x_(a,h,c,g),b_(s),h=Em(),s!==null&&!Ge?(Sm(s,a,y),ls(s,a,y)):(Qt&&h&&fm(a),a.flags|=1,Ze(s,a,c,y),a.child)}function p0(s,a,c,h,g){if(_a(a),a.stateNode===null){var y=_o,E=c.contextType;typeof E=="object"&&E!==null&&(y=ln(E)),y=new c(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Um,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Jm(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?ln(E):_o,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Vm(a,c,E,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Um.enqueueReplaceState(y,y.state,null),dc(a,h,y,g),hc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){y=a.stateNode;var R=a.memoizedProps,P=ya(c,R);y.props=P;var B=y.context,et=c.contextType;E=_o,typeof et=="object"&&et!==null&&(E=ln(et));var st=c.getDerivedStateFromProps;et=typeof st=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,et||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||B!==E)&&n0(a,y,h,E),sr=!1;var W=a.memoizedState;y.state=W,dc(a,h,y,g),hc(),B=a.memoizedState,R||W!==B||sr?(typeof st=="function"&&(Vm(a,c,st,h),B=a.memoizedState),(P=sr||e0(a,c,P,h,W,B,E))?(et||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=B),y.props=h,y.state=B,y.context=E,h=P):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,tg(s,a),E=a.memoizedProps,et=ya(c,E),y.props=et,st=a.pendingProps,W=y.context,B=c.contextType,P=_o,typeof B=="object"&&B!==null&&(P=ln(B)),R=c.getDerivedStateFromProps,(B=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==st||W!==P)&&n0(a,y,h,P),sr=!1,W=a.memoizedState,y.state=W,dc(a,h,y,g),hc();var J=a.memoizedState;E!==st||W!==J||sr||s!==null&&s.dependencies!==null&&kh(s.dependencies)?(typeof R=="function"&&(Vm(a,c,R,h),J=a.memoizedState),(et=sr||e0(a,c,et,h,W,J,P)||s!==null&&s.dependencies!==null&&kh(s.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,J,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,J,P)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=J),y.props=h,y.state=J,y.context=P,h=et):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),h=!1)}return y=h,lc(s,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&h?(a.child=da(a,s.child,null,g),a.child=da(a,null,c,g)):Ze(s,a,c,g),a.memoizedState=y.state,s=a.child):s=ls(s,a,g),s}function y0(s,a,c,h){return Xl(),a.flags|=256,Ze(s,a,c,h),a.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function Hm(s){return{baseLanes:s,cachePool:__()}}function qm(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=ri),s}function v0(s,a,c){var h=a.pendingProps,g=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=s!==null&&s.memoizedState===null?!1:(Ue.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,s===null){if(Qt){if(g?Js(a):tr(),Qt){var R=Xe,P;if(P=R){t:{for(P=R,R=Di;P.nodeType!==8;){if(!R){R=null;break t}if(P=mi(P.nextSibling),P===null){R=null;break t}}R=P}R!==null?(a.memoizedState={dehydrated:R,treeContext:ca!==null?{id:ss,overflow:rs}:null,retryLane:536870912},P=si(18,null,null,0),P.stateNode=R,P.return=a,a.child=P,bn=a,Xe=null,P=!0):P=!1}P||ha(a)}if(R=a.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?a.lanes=16:a.lanes=536870912,null;as(a)}return R=h.children,h=h.fallback,g?(tr(),g=a.mode,R=$m({mode:"hidden",children:R},g),h=xa(h,g,c,null),R.return=a,h.return=a,R.sibling=h,a.child=R,g=a.child,g.memoizedState=Hm(c),g.childLanes=qm(s,E,c),a.memoizedState=Fm,h):(Js(a),Gm(a,R))}if(P=s.memoizedState,P!==null&&(R=P.dehydrated,R!==null)){if(y)a.flags&256?(Js(a),a.flags&=-257,a=Qm(s,a,c)):a.memoizedState!==null?(tr(),a.child=s.child,a.flags|=128,a=null):(tr(),g=h.fallback,R=a.mode,h=$m({mode:"visible",children:h.children},R),g=xa(g,R,c,null),g.flags|=2,h.return=a,g.return=a,h.sibling=g,a.child=h,da(a,s.child,null,c),h=a.child,h.memoizedState=Hm(c),h.childLanes=qm(s,E,c),a.memoizedState=Fm,a=g);else if(Js(a),R.data==="$!"){if(E=R.nextSibling&&R.nextSibling.dataset,E)var B=E.dgst;E=B,h=Error(i(419)),h.stack="",h.digest=E,Zl({value:h,source:null,stack:null}),a=Qm(s,a,c)}else if(Ge||cc(s,a,c,!1),E=(c&s.childLanes)!==0,Ge||E){if(E=ae,E!==null){if(h=c&-c,(h&42)!==0)h=1;else switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=64;break;case 268435456:h=134217728;break;default:h=0}if(h=(h&(E.suspendedLanes|c))!==0?0:h,h!==0&&h!==P.retryLane)throw P.retryLane=h,Zs(s,h),xn(E,s,h),c0}R.data==="$?"||xg(),a=Qm(s,a,c)}else R.data==="$?"?(a.flags|=128,a.child=s.child,a=DC.bind(null,s),R._reactRetry=a,a=null):(s=P.treeContext,Xe=mi(R.nextSibling),bn=a,Qt=!0,di=null,Di=!1,s!==null&&(Jn[ti++]=ss,Jn[ti++]=rs,Jn[ti++]=ca,ss=s.id,rs=s.overflow,ca=a),a=Gm(a,h.children),a.flags|=4096);return a}return g?(tr(),g=h.fallback,R=a.mode,P=s.child,B=P.sibling,h=ur(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&31457280,B!==null?g=ur(B,g):(g=xa(g,R,c,null),g.flags|=2),g.return=a,h.return=a,h.sibling=g,a.child=h,h=g,g=a.child,R=s.child.memoizedState,R===null?R=Hm(c):(P=R.cachePool,P!==null?(B=ze._currentValue,P=P.parent!==B?{parent:B,pool:B}:P):P=__(),R={baseLanes:R.baseLanes|c,cachePool:P}),g.memoizedState=R,g.childLanes=qm(s,E,c),a.memoizedState=Fm,h):(Js(a),c=s.child,s=c.sibling,c=ur(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,s!==null&&(E=a.deletions,E===null?(a.deletions=[s],a.flags|=16):E.push(s)),a.child=c,a.memoizedState=null,c)}function Gm(s,a){return a=$m({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function $m(s,a){return q0(s,a,0,null)}function Qm(s,a,c){return da(a,s.child,null,c),s=Gm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function _0(s,a,c){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Xm(s.return,a,c)}function Wm(s,a,c,h,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=c,y.tailMode=g)}function b0(s,a,c){var h=a.pendingProps,g=h.revealOrder,y=h.tail;if(Ze(s,a,h.children,c),h=Ue.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_0(s,c,a);else if(s.tag===19)_0(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(Jt(Ue,h),g){case"forwards":for(c=a.child,g=null;c!==null;)s=c.alternate,s!==null&&xh(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Wm(a,!1,g,c,y);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&xh(s)===null){a.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}Wm(a,!0,c,null,y);break;case"together":Wm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ls(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),hr|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(cc(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,c=ur(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=ur(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function Km(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&kh(s)))}function yC(s,a,c){switch(a.tag){case 3:js(a,a.stateNode.containerInfo),ir(a,ze,s.memoizedState.cache),Xl();break;case 27:case 5:Cl(a);break;case 4:js(a,a.stateNode.containerInfo);break;case 10:ir(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Js(a),a.flags|=128,null):(c&a.child.childLanes)!==0?v0(s,a,c):(Js(a),s=ls(s,a,c),s!==null?s.sibling:null);Js(a);break;case 19:var g=(s.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(cc(s,a,c,!1),h=(c&a.childLanes)!==0),g){if(h)return b0(s,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Jt(Ue,Ue.current),h)break;return null;case 22:case 23:return a.lanes=0,f0(s,a,c);case 24:ir(a,ze,s.memoizedState.cache)}return ls(s,a,c)}function x0(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ge=!0;else{if(!Km(s,c)&&(a.flags&128)===0)return Ge=!1,yC(s,a,c);Ge=(s.flags&131072)!==0}else Ge=!1,Qt&&(a.flags&1048576)!==0&&r_(a,ph,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var h=a.elementType,g=h._init;if(h=g(h._payload),a.type=h,typeof h=="function")cg(h)?(s=ya(h,s),a.tag=1,a=p0(null,a,h,s,c)):(a.tag=0,a=Bm(null,a,h,s,c));else{if(h!=null){if(g=h.$$typeof,g===C){a.tag=11,a=u0(null,a,h,s,c);break t}else if(g===L){a.tag=14,a=h0(null,a,h,s,c);break t}}throw a=N(h)||h,Error(i(306,a,""))}}return a;case 0:return Bm(s,a,a.type,a.pendingProps,c);case 1:return h=a.type,g=ya(h,a.pendingProps),p0(s,a,h,g,c);case 3:t:{if(js(a,a.stateNode.containerInfo),s===null)throw Error(i(387));var y=a.pendingProps;g=a.memoizedState,h=g.element,tg(s,a),dc(a,y,null,c);var E=a.memoizedState;if(y=E.cache,ir(a,ze,y),y!==g.cache&&Zm(a,[ze],c,!0),hc(),y=E.element,g.isDehydrated)if(g={element:y,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=y0(s,a,y,c);break t}else if(y!==h){h=Zn(Error(i(424)),a),Zl(h),a=y0(s,a,y,c);break t}else for(Xe=mi(a.stateNode.containerInfo.firstChild),bn=a,Qt=!0,di=null,Di=!0,c=m_(a,null,y,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Xl(),y===h){a=ls(s,a,c);break t}Ze(s,a,y,c)}a=a.child}return a;case 26:return lc(s,a),s===null?(c=Eb(a.type,null,a.pendingProps,null))?a.memoizedState=c:Qt||(c=a.type,s=a.pendingProps,h=Kh(qn.current).createElement(c),h[Fe]=a,h[je]=s,Je(h,c,s),he(h),a.stateNode=h):a.memoizedState=Eb(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Cl(a),s===null&&Qt&&(h=a.stateNode=xb(a.type,a.pendingProps,qn.current),bn=a,Di=!0,Xe=mi(h.firstChild)),h=a.pendingProps.children,s!==null||Qt?Ze(s,a,h,c):a.child=da(a,null,h,c),lc(s,a),a.child;case 5:return s===null&&Qt&&((g=h=Xe)&&(h=QC(h,a.type,a.pendingProps,Di),h!==null?(a.stateNode=h,bn=a,Xe=mi(h.firstChild),Di=!1,g=!0):g=!1),g||ha(a)),Cl(a),g=a.type,y=a.pendingProps,E=s!==null?s.memoizedProps:null,h=y.children,Pg(g,y)?h=null:E!==null&&Pg(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Tm(s,a,uC,null,null,c),Cc._currentValue=g),lc(s,a),Ze(s,a,h,c),a.child;case 6:return s===null&&Qt&&((s=c=Xe)&&(c=WC(c,a.pendingProps,Di),c!==null?(a.stateNode=c,bn=a,Xe=null,s=!0):s=!1),s||ha(a)),null;case 13:return v0(s,a,c);case 4:return js(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=da(a,null,h,c):Ze(s,a,h,c),a.child;case 11:return u0(s,a,a.type,a.pendingProps,c);case 7:return Ze(s,a,a.pendingProps,c),a.child;case 8:return Ze(s,a,a.pendingProps.children,c),a.child;case 12:return Ze(s,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,ir(a,a.type,h.value),Ze(s,a,h.children,c),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,_a(a),g=ln(g),h=h(g),a.flags|=1,Ze(s,a,h,c),a.child;case 14:return h0(s,a,a.type,a.pendingProps,c);case 15:return d0(s,a,a.type,a.pendingProps,c);case 19:return b0(s,a,c);case 22:return f0(s,a,c);case 24:return _a(a),h=ln(ze),s===null?(g=xm(),g===null&&(g=ae,y=_m(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:h,cache:g},Jm(a),ir(a,ze,g)):((s.lanes&c)!==0&&(tg(s,a),dc(a,null,null,c),hc()),g=s.memoizedState,y=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),ir(a,ze,h)):(h=y.cache,ir(a,ze,h),h!==g.cache&&Zm(a,[ze],c,!0))),Ze(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}var Ym=Gt(null),va=null,cs=null;function ir(s,a,c){Jt(Ym,a._currentValue),a._currentValue=c}function us(s){s._currentValue=Ym.current,ge(Ym)}function Xm(s,a,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===c)break;s=s.return}}function Zm(s,a,c,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;t:for(;y!==null;){var R=y;y=g;for(var P=0;P<a.length;P++)if(R.context===a[P]){y.lanes|=c,R=y.alternate,R!==null&&(R.lanes|=c),Xm(y.return,c,s),h||(E=null);break t}y=R.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),Xm(E,c,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function cc(s,a,c,h){s=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var R=g.type;Mn(g.pendingProps.value,E.value)||(s!==null?s.push(R):s=[R])}}else if(g===Ps.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Cc):s=[Cc])}g=g.return}s!==null&&Zm(a,s,c,h),a.flags|=262144}function kh(s){for(s=s.firstContext;s!==null;){if(!Mn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function _a(s){va=s,cs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ln(s){return w0(va,s)}function Oh(s,a){return va===null&&_a(s),w0(s,a)}function w0(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},cs===null){if(s===null)throw Error(i(308));cs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else cs=cs.next=a;return c}var sr=!1;function Jm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function rr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ar(s,a,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(fe&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=mh(s),i_(s,null,c),a}return fh(s,h,a,c),mh(s)}function uc(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194176)!==0)){var h=a.lanes;h&=s.pendingLanes,c|=h,a.lanes=c,Fs(s,c)}}function eg(s,a){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var ng=!1;function hc(){if(ng){var s=So;if(s!==null)throw s}}function dc(s,a,c,h){ng=!1;var g=s.updateQueue;sr=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var P=R,B=P.next;P.next=null,E===null?y=B:E.next=B,E=P;var et=s.alternate;et!==null&&(et=et.updateQueue,R=et.lastBaseUpdate,R!==E&&(R===null?et.firstBaseUpdate=B:R.next=B,et.lastBaseUpdate=P))}if(y!==null){var st=g.baseState;E=0,et=B=P=null,R=y;do{var W=R.lane&-536870913,J=W!==R.lane;if(J?(Bt&W)===W:(h&W)===W){W!==0&&W===Eo&&(ng=!0),et!==null&&(et=et.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var vt=s,At=R;W=a;var _e=c;switch(At.tag){case 1:if(vt=At.payload,typeof vt=="function"){st=vt.call(_e,st,W);break t}st=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=At.payload,W=typeof vt=="function"?vt.call(_e,st,W):vt,W==null)break t;st=k({},st,W);break t;case 2:sr=!0}}W=R.callback,W!==null&&(s.flags|=64,J&&(s.flags|=8192),J=g.callbacks,J===null?g.callbacks=[W]:J.push(W))}else J={lane:W,tag:R.tag,payload:R.payload,callback:R.callback,next:null},et===null?(B=et=J,P=st):et=et.next=J,E|=W;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;J=R,R=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);et===null&&(P=st),g.baseState=P,g.firstBaseUpdate=B,g.lastBaseUpdate=et,y===null&&(g.shared.lanes=0),hr|=E,s.lanes=E,s.memoizedState=st}}function T0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function E0(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)T0(c[s],a)}function fc(s,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&s)===s){h=void 0;var y=c.create,E=c.inst;h=y(),E.destroy=h}c=c.next}while(c!==g)}}catch(R){re(a,a.return,R)}}function or(s,a,c){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&s)===s){var E=h.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,g=a;var P=c;try{R()}catch(B){re(g,P,B)}}}h=h.next}while(h!==y)}}catch(B){re(a,a.return,B)}}function S0(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{E0(a,c)}catch(h){re(s,s.return,h)}}}function A0(s,a,c){c.props=ya(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){re(s,a,h)}}function ba(s,a){try{var c=s.ref;if(c!==null){var h=s.stateNode;switch(s.tag){case 26:case 27:case 5:var g=h;break;default:g=h}typeof c=="function"?s.refCleanup=c(g):c.current=g}}catch(y){re(s,a,y)}}function kn(s,a){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){re(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){re(s,a,g)}else c.current=null}function C0(s){var a=s.type,c=s.memoizedProps,h=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){re(s,s.return,g)}}function R0(s,a,c){try{var h=s.stateNode;FC(h,s.type,c,a),h[je]=a}catch(g){re(s,s.return,g)}}function I0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function ig(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||I0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function sg(s,a,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(s,c)):(a=c,a.appendChild(s)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Wh));else if(h!==4&&h!==27&&(s=s.child,s!==null))for(sg(s,a,c),s=s.sibling;s!==null;)sg(s,a,c),s=s.sibling}function Ph(s,a,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(h!==4&&h!==27&&(s=s.child,s!==null))for(Ph(s,a,c),s=s.sibling;s!==null;)Ph(s,a,c),s=s.sibling}var hs=!1,ye=!1,rg=!1,N0=typeof WeakSet=="function"?WeakSet:Set,$e=null,D0=!1;function vC(s,a){if(s=s.containerInfo,kg=ed,s=Wv(s),om(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var E=0,R=-1,P=-1,B=0,et=0,st=s,W=null;e:for(;;){for(var J;st!==c||g!==0&&st.nodeType!==3||(R=E+g),st!==y||h!==0&&st.nodeType!==3||(P=E+h),st.nodeType===3&&(E+=st.nodeValue.length),(J=st.firstChild)!==null;)W=st,st=J;for(;;){if(st===s)break e;if(W===c&&++B===g&&(R=E),W===y&&++et===h&&(P=E),(J=st.nextSibling)!==null)break;st=W,W=st.parentNode}st=J}c=R===-1||P===-1?null:{start:R,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(Og={focusedElem:s,selectionRange:c},ed=!1,$e=a;$e!==null;)if(a=$e,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,$e=s;else for(;$e!==null;){switch(a=$e,y=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var vt=ya(c.type,g,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(vt,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(At){re(c,c.return,At)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Vg(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Vg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,$e=s;break}$e=a.return}return vt=D0,D0=!1,vt}function M0(s,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:fs(s,c),h&4&&fc(5,c);break;case 1:if(fs(s,c),h&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(R){re(c,c.return,R)}else{var g=ya(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(R){re(c,c.return,R)}}h&64&&S0(c),h&512&&ba(c,c.return);break;case 3:if(fs(s,c),h&64&&(h=c.updateQueue,h!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{E0(h,s)}catch(R){re(c,c.return,R)}}break;case 26:fs(s,c),h&512&&ba(c,c.return);break;case 27:case 5:fs(s,c),a===null&&h&4&&C0(c),h&512&&ba(c,c.return);break;case 12:fs(s,c);break;case 13:fs(s,c),h&4&&P0(s,c);break;case 22:if(g=c.memoizedState!==null||hs,!g){a=a!==null&&a.memoizedState!==null||ye;var y=hs,E=ye;hs=g,(ye=a)&&!E?lr(s,c,(c.subtreeFlags&8772)!==0):fs(s,c),hs=y,ye=E}h&512&&(c.memoizedProps.mode==="manual"?ba(c,c.return):kn(c,c.return));break;default:fs(s,c)}}function k0(s){var a=s.alternate;a!==null&&(s.alternate=null,k0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Yr(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ne=null,On=!1;function ds(s,a,c){for(c=c.child;c!==null;)O0(s,a,c),c=c.sibling}function O0(s,a,c){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Ls,c)}catch{}switch(c.tag){case 26:ye||kn(c,a),ds(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ye||kn(c,a);var h=Ne,g=On;for(Ne=c.stateNode,ds(s,a,c),c=c.stateNode,a=c.attributes;a.length;)c.removeAttributeNode(a[0]);Yr(c),Ne=h,On=g;break;case 5:ye||kn(c,a);case 6:g=Ne;var y=On;if(Ne=null,ds(s,a,c),Ne=g,On=y,Ne!==null)if(On)try{s=Ne,h=c.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)}catch(E){re(c,a,E)}else try{Ne.removeChild(c.stateNode)}catch(E){re(c,a,E)}break;case 18:Ne!==null&&(On?(a=Ne,c=c.stateNode,a.nodeType===8?Lg(a.parentNode,c):a.nodeType===1&&Lg(a,c),Dc(a)):Lg(Ne,c.stateNode));break;case 4:h=Ne,g=On,Ne=c.stateNode.containerInfo,On=!0,ds(s,a,c),Ne=h,On=g;break;case 0:case 11:case 14:case 15:ye||or(2,c,a),ye||or(4,c,a),ds(s,a,c);break;case 1:ye||(kn(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&A0(c,a,h)),ds(s,a,c);break;case 21:ds(s,a,c);break;case 22:ye||kn(c,a),ye=(h=ye)||c.memoizedState!==null,ds(s,a,c),ye=h;break;default:ds(s,a,c)}}function P0(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Dc(s)}catch(c){re(a,a.return,c)}}function _C(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new N0),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new N0),a;default:throw Error(i(435,s.tag))}}function ag(s,a){var c=_C(s);a.forEach(function(h){var g=MC.bind(null,s,h);c.has(h)||(c.add(h),h.then(g,g))})}function ni(s,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],y=s,E=a,R=E;t:for(;R!==null;){switch(R.tag){case 27:case 5:Ne=R.stateNode,On=!1;break t;case 3:Ne=R.stateNode.containerInfo,On=!0;break t;case 4:Ne=R.stateNode.containerInfo,On=!0;break t}R=R.return}if(Ne===null)throw Error(i(160));O0(y,E,g),Ne=null,On=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)j0(a,s),a=a.sibling}var fi=null;function j0(s,a){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ni(a,s),ii(s),h&4&&(or(3,s,s.return),fc(3,s),or(5,s,s.return));break;case 1:ni(a,s),ii(s),h&512&&(ye||c===null||kn(c,c.return)),h&64&&hs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=fi;if(ni(a,s),ii(s),h&512&&(ye||c===null||kn(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){t:{h=s.type,c=s.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[qs]||y[Fe]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),Je(y,h,c),y[Fe]=s,he(y),h=y;break t;case"link":var E=Cb("link","href",g).get(h+(c.href||""));if(E){for(var R=0;R<E.length;R++)if(y=E[R],y.getAttribute("href")===(c.href==null?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(R,1);break e}}y=g.createElement(h),Je(y,h,c),g.head.appendChild(y);break;case"meta":if(E=Cb("meta","content",g).get(h+(c.content||""))){for(R=0;R<E.length;R++)if(y=E[R],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(R,1);break e}}y=g.createElement(h),Je(y,h,c),g.head.appendChild(y);break;default:throw Error(i(468,h))}y[Fe]=s,he(y),h=y}s.stateNode=h}else Rb(g,s.type,s.stateNode);else s.stateNode=Ab(g,h,s.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?Rb(g,s.type,s.stateNode):Ab(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&R0(s,s.memoizedProps,c.memoizedProps)}break;case 27:if(h&4&&s.alternate===null){g=s.stateNode,y=s.memoizedProps;try{for(var P=g.firstChild;P;){var B=P.nextSibling,et=P.nodeName;P[qs]||et==="HEAD"||et==="BODY"||et==="SCRIPT"||et==="STYLE"||et==="LINK"&&P.rel.toLowerCase()==="stylesheet"||g.removeChild(P),P=B}for(var st=s.type,W=g.attributes;W.length;)g.removeAttributeNode(W[0]);Je(g,st,y),g[Fe]=s,g[je]=y}catch(vt){re(s,s.return,vt)}}case 5:if(ni(a,s),ii(s),h&512&&(ye||c===null||kn(c,c.return)),s.flags&32){g=s.stateNode;try{Qn(g,"")}catch(vt){re(s,s.return,vt)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,R0(s,g,c!==null?c.memoizedProps:g)),h&1024&&(rg=!0);break;case 6:if(ni(a,s),ii(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(vt){re(s,s.return,vt)}}break;case 3:if(Zh=null,g=fi,fi=Yh(a.containerInfo),ni(a,s),fi=g,ii(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Dc(a.containerInfo)}catch(vt){re(s,s.return,vt)}rg&&(rg=!1,L0(s));break;case 4:h=fi,fi=Yh(s.stateNode.containerInfo),ni(a,s),ii(s),fi=h;break;case 12:ni(a,s),ii(s);break;case 13:ni(a,s),ii(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(gg=Tn()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ag(s,h)));break;case 22:if(h&512&&(ye||c===null||kn(c,c.return)),P=s.memoizedState!==null,B=c!==null&&c.memoizedState!==null,et=hs,st=ye,hs=et||P,ye=st||B,ni(a,s),ye=st,hs=et,ii(s),a=s.stateNode,a._current=s,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,h&8192&&(a._visibility=P?a._visibility&-2:a._visibility|1,P&&(a=hs||ye,c===null||B||a||Io(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))t:for(c=null,a=s;;){if(a.tag===5||a.tag===26||a.tag===27){if(c===null){B=c=a;try{if(g=B.stateNode,P)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=B.stateNode,R=B.memoizedProps.style;var J=R!=null&&R.hasOwnProperty("display")?R.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(vt){re(B,B.return,vt)}}}else if(a.tag===6){if(c===null){B=a;try{B.stateNode.nodeValue=P?"":B.memoizedProps}catch(vt){re(B,B.return,vt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,ag(s,c))));break;case 19:ni(a,s),ii(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ag(s,h)));break;case 21:break;default:ni(a,s),ii(s)}}function ii(s){var a=s.flags;if(a&2){try{if(s.tag!==27){t:{for(var c=s.return;c!==null;){if(I0(c)){var h=c;break t}c=c.return}throw Error(i(160))}switch(h.tag){case 27:var g=h.stateNode,y=ig(s);Ph(s,y,g);break;case 5:var E=h.stateNode;h.flags&32&&(Qn(E,""),h.flags&=-33);var R=ig(s);Ph(s,R,E);break;case 3:case 4:var P=h.stateNode.containerInfo,B=ig(s);sg(s,B,P);break;default:throw Error(i(161))}}}catch(et){re(s,s.return,et)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function L0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;L0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function fs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)M0(s,a.alternate,a),a=a.sibling}function Io(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:or(4,a,a.return),Io(a);break;case 1:kn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&A0(a,a.return,c),Io(a);break;case 26:case 27:case 5:kn(a,a.return),Io(a);break;case 22:kn(a,a.return),a.memoizedState===null&&Io(a);break;default:Io(a)}s=s.sibling}}function lr(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=s,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:lr(g,y,c),fc(4,y);break;case 1:if(lr(g,y,c),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){re(h,h.return,B)}if(h=y,g=h.updateQueue,g!==null){var R=h.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)T0(P[g],R)}catch(B){re(h,h.return,B)}}c&&E&64&&S0(y),ba(y,y.return);break;case 26:case 27:case 5:lr(g,y,c),c&&h===null&&E&4&&C0(y),ba(y,y.return);break;case 12:lr(g,y,c);break;case 13:lr(g,y,c),c&&E&4&&P0(g,y);break;case 22:y.memoizedState===null&&lr(g,y,c),ba(y,y.return);break;default:lr(g,y,c)}a=a.sibling}}function og(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&ic(c))}function lg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ic(s))}function cr(s,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)V0(s,a,c,h),a=a.sibling}function V0(s,a,c,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:cr(s,a,c,h),g&2048&&fc(9,a);break;case 3:cr(s,a,c,h),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ic(s)));break;case 12:if(g&2048){cr(s,a,c,h),s=a.stateNode;try{var y=a.memoizedProps,E=y.id,R=y.onPostCommit;typeof R=="function"&&R(E,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){re(a,a.return,P)}}else cr(s,a,c,h);break;case 23:break;case 22:y=a.stateNode,a.memoizedState!==null?y._visibility&4?cr(s,a,c,h):mc(s,a):y._visibility&4?cr(s,a,c,h):(y._visibility|=4,No(s,a,c,h,(a.subtreeFlags&10256)!==0)),g&2048&&og(a.alternate,a);break;case 24:cr(s,a,c,h),g&2048&&lg(a.alternate,a);break;default:cr(s,a,c,h)}}function No(s,a,c,h,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=s,E=a,R=c,P=h,B=E.flags;switch(E.tag){case 0:case 11:case 15:No(y,E,R,P,g),fc(8,E);break;case 23:break;case 22:var et=E.stateNode;E.memoizedState!==null?et._visibility&4?No(y,E,R,P,g):mc(y,E):(et._visibility|=4,No(y,E,R,P,g)),g&&B&2048&&og(E.alternate,E);break;case 24:No(y,E,R,P,g),g&&B&2048&&lg(E.alternate,E);break;default:No(y,E,R,P,g)}a=a.sibling}}function mc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,h=a,g=h.flags;switch(h.tag){case 22:mc(c,h),g&2048&&og(h.alternate,h);break;case 24:mc(c,h),g&2048&&lg(h.alternate,h);break;default:mc(c,h)}a=a.sibling}}var gc=8192;function Do(s){if(s.subtreeFlags&gc)for(s=s.child;s!==null;)U0(s),s=s.sibling}function U0(s){switch(s.tag){case 26:Do(s),s.flags&gc&&s.memoizedState!==null&&oR(fi,s.memoizedState,s.memoizedProps);break;case 5:Do(s);break;case 3:case 4:var a=fi;fi=Yh(s.stateNode.containerInfo),Do(s),fi=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=gc,gc=16777216,Do(s),gc=a):Do(s));break;default:Do(s)}}function z0(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function pc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];$e=h,F0(h,s)}z0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)B0(s),s=s.sibling}function B0(s){switch(s.tag){case 0:case 11:case 15:pc(s),s.flags&2048&&or(9,s,s.return);break;case 3:pc(s);break;case 12:pc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&4&&(s.return===null||s.return.tag!==13)?(a._visibility&=-5,jh(s)):pc(s);break;default:pc(s)}}function jh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];$e=h,F0(h,s)}z0(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:or(8,a,a.return),jh(a);break;case 22:c=a.stateNode,c._visibility&4&&(c._visibility&=-5,jh(a));break;default:jh(a)}s=s.sibling}}function F0(s,a){for(;$e!==null;){var c=$e;switch(c.tag){case 0:case 11:case 15:or(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ic(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,$e=h;else t:for(c=s;$e!==null;){h=$e;var g=h.sibling,y=h.return;if(k0(h),h===c){$e=null;break t}if(g!==null){g.return=y,$e=g;break t}$e=y}}}function bC(s,a,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(s,a,c,h){return new bC(s,a,c,h)}function cg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ur(s,a){var c=s.alternate;return c===null?(c=si(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&31457280,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function H0(s,a){s.flags&=31457282;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Lh(s,a,c,h,g,y){var E=0;if(h=s,typeof s=="function")cg(s)&&(E=1);else if(typeof s=="string")E=rR(s,c,pn.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case d:return xa(c.children,g,y,a);case f:E=8,g|=24;break;case p:return s=si(12,c,a,g|2),s.elementType=p,s.lanes=y,s;case S:return s=si(13,c,a,g),s.elementType=S,s.lanes=y,s;case A:return s=si(19,c,a,g),s.elementType=A,s.lanes=y,s;case F:return q0(c,g,y,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case v:case T:E=10;break t;case x:E=9;break t;case C:E=11;break t;case L:E=14;break t;case G:E=16,h=null;break t}E=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=si(E,c,a,g),a.elementType=s,a.type=h,a.lanes=y,a}function xa(s,a,c,h){return s=si(7,s,h,a),s.lanes=c,s}function q0(s,a,c,h){s=si(22,s,h,a),s.elementType=F,s.lanes=c;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=g._current;if(y===null)throw Error(i(456));if((g._pendingVisibility&2)===0){var E=Zs(y,2);E!==null&&(g._pendingVisibility|=2,xn(E,y,2))}},attach:function(){var y=g._current;if(y===null)throw Error(i(456));if((g._pendingVisibility&2)!==0){var E=Zs(y,2);E!==null&&(g._pendingVisibility&=-3,xn(E,y,2))}}};return s.stateNode=g,s}function ug(s,a,c){return s=si(6,s,null,a),s.lanes=c,s}function hg(s,a,c){return a=si(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function ms(s){s.flags|=4}function G0(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Ib(a)){if(a=ei.current,a!==null&&((Bt&4194176)===Bt?Mi!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||a!==Mi))throw tc=pm,l_;s.flags|=8192}}function Vh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?zs():536870912,s.lanes|=a,ko|=a)}function yc(s,a){if(!Qt)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function de(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(a)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&31457280,h|=g.flags&31457280,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=c,a}function xC(s,a,c){var h=a.pendingProps;switch(mm(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(a),null;case 1:return de(a),null;case 3:return c=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),us(ze),Qi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Yl(a)?ms(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,di!==null&&(_g(di),di=null))),de(a),null;case 26:return c=a.memoizedState,s===null?(ms(a),c!==null?(de(a),G0(a,c)):(de(a),a.flags&=-16777217)):c?c!==s.memoizedState?(ms(a),de(a),G0(a,c)):(de(a),a.flags&=-16777217):(s.memoizedProps!==h&&ms(a),de(a),a.flags&=-16777217),null;case 27:Xa(a),c=qn.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ms(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return de(a),null}s=pn.current,Yl(a)?a_(a):(s=xb(g,h,c),a.stateNode=s,ms(a))}return de(a),null;case 5:if(Xa(a),c=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ms(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return de(a),null}if(s=pn.current,Yl(a))a_(a);else{switch(g=Kh(qn.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?g.createElement(c,{is:h.is}):g.createElement(c)}}s[Fe]=a,s[je]=h;t:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break t;for(;g.sibling===null;){if(g.return===null||g.return===a)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;t:switch(Je(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&ms(a)}}return de(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&ms(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=qn.current,Yl(a)){if(s=a.stateNode,c=a.memoizedProps,h=null,g=bn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[Fe]=a,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||gb(s.nodeValue,c)),s||ha(a)}else s=Kh(s).createTextNode(h),s[Fe]=a,a.stateNode=s}return de(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Yl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Fe]=a}else Xl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;de(a),g=!1}else di!==null&&(_g(di),di=null),g=!0;if(!g)return a.flags&256?(as(a),a):(as(a),null)}if(as(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return c!==s&&c&&(a.child.flags|=8192),Vh(a,a.updateQueue),de(a),null;case 4:return Qi(),s===null&&Ng(a.stateNode.containerInfo),de(a),null;case 10:return us(a.type),de(a),null;case 19:if(ge(Ue),g=a.memoizedState,g===null)return de(a),null;if(h=(a.flags&128)!==0,y=g.rendering,y===null)if(h)yc(g,!1);else{if(ve!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=xh(s),y!==null){for(a.flags|=128,yc(g,!1),s=y.updateQueue,a.updateQueue=s,Vh(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)H0(c,s),c=c.sibling;return Jt(Ue,Ue.current&1|2),a.child}s=s.sibling}g.tail!==null&&Tn()>Uh&&(a.flags|=128,h=!0,yc(g,!1),a.lanes=4194304)}else{if(!h)if(s=xh(y),s!==null){if(a.flags|=128,h=!0,s=s.updateQueue,a.updateQueue=s,Vh(a,s),yc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Qt)return de(a),null}else 2*Tn()-g.renderingStartTime>Uh&&c!==536870912&&(a.flags|=128,h=!0,yc(g,!1),a.lanes=4194304);g.isBackwards?(y.sibling=a.child,a.child=y):(s=g.last,s!==null?s.sibling=y:a.child=y,g.last=y)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Tn(),a.sibling=null,s=Ue.current,Jt(Ue,h?s&1|2:s&1),a):(de(a),null);case 22:case 23:return as(a),vm(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(de(a),a.subtreeFlags&6&&(a.flags|=8192)):de(a),c=a.updateQueue,c!==null&&Vh(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),s!==null&&ge(fa),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),us(ze),de(a),null;case 25:return null}throw Error(i(156,a.tag))}function wC(s,a){switch(mm(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return us(ze),Qi(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Xa(a),null;case 13:if(as(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Xl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ge(Ue),null;case 4:return Qi(),null;case 10:return us(a.type),null;case 22:case 23:return as(a),vm(),s!==null&&ge(fa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return us(ze),null;case 25:return null;default:return null}}function $0(s,a){switch(mm(a),a.tag){case 3:us(ze),Qi();break;case 26:case 27:case 5:Xa(a);break;case 4:Qi();break;case 13:as(a);break;case 19:ge(Ue);break;case 10:us(a.type);break;case 22:case 23:as(a),vm(),s!==null&&ge(fa);break;case 24:us(ze)}}var TC={getCacheForType:function(s){var a=ln(ze),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c}},EC=typeof WeakMap=="function"?WeakMap:Map,fe=0,ae=null,kt=null,Bt=0,oe=0,Pn=null,gs=!1,Mo=!1,dg=!1,ps=0,ve=0,hr=0,wa=0,fg=0,ri=0,ko=0,vc=null,Oi=null,mg=!1,gg=0,Uh=1/0,zh=null,dr=null,Bh=!1,Ta=null,_c=0,pg=0,yg=null,bc=0,vg=null;function jn(){if((fe&2)!==0&&Bt!==0)return Bt&-Bt;if(D.T!==null){var s=Eo;return s!==0?s:Ag()}return Qu()}function Q0(){ri===0&&(ri=(Bt&536870912)===0||Qt?Ml():536870912);var s=ei.current;return s!==null&&(s.flags|=32),ri}function xn(s,a,c){(s===ae&&oe===2||s.cancelPendingCommit!==null)&&(Oo(s,0),ys(s,Bt,ri,!1)),Te(s,c),((fe&2)===0||s!==ae)&&(s===ae&&((fe&2)===0&&(wa|=c),ve===4&&ys(s,Bt,ri,!1)),Pi(s))}function W0(s,a,c){if((fe&6)!==0)throw Error(i(327));var h=!c&&(a&60)===0&&(a&s.expiredLanes)===0||Us(s,a),g=h?CC(s,a):wg(s,a,!0),y=h;do{if(g===0){Mo&&!h&&ys(s,a,0,!1);break}else if(g===6)ys(s,a,0,!gs);else{if(c=s.current.alternate,y&&!SC(c)){g=wg(s,a,!1),y=!1;continue}if(g===2){if(y=a,s.errorRecoveryDisabledLanes&y)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var R=s;g=vc;var P=R.current.memoizedState.isDehydrated;if(P&&(Oo(R,E).flags|=256),E=wg(R,E,!1),E!==2){if(dg&&!P){R.errorRecoveryDisabledLanes|=y,wa|=y,g=4;break t}y=Oi,Oi=g,y!==null&&_g(y)}g=E}if(y=!1,g!==2)continue}}if(g===1){Oo(s,0),ys(s,a,0,!0);break}t:{switch(h=s,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194176)===a){ys(h,a,ri,!gs);break t}break;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(i(329))}if(h.finishedWork=c,h.finishedLanes=a,(a&62914560)===a&&(y=gg+300-Tn(),10<y)){if(ys(h,a,ri,!gs),Gn(h,0)!==0)break t;h.timeoutHandle=vb(K0.bind(null,h,c,Oi,zh,mg,a,ri,wa,ko,gs,2,-0,0),y);break t}K0(h,c,Oi,zh,mg,a,ri,wa,ko,gs,0,-0,0)}}break}while(!0);Pi(s)}function _g(s){Oi===null?Oi=s:Oi.push.apply(Oi,s)}function K0(s,a,c,h,g,y,E,R,P,B,et,st,W){var J=a.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(Ac={stylesheets:null,count:0,unsuspend:aR},U0(a),a=lR(),a!==null)){s.cancelPendingCommit=a(nb.bind(null,s,c,h,g,E,R,P,1,st,W)),ys(s,y,E,!B);return}nb(s,c,h,g,E,R,P,et,st,W)}function SC(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],y=g.getSnapshot;g=g.value;try{if(!Mn(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ys(s,a,c,h){a&=~fg,a&=~wa,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var g=a;0<g;){var y=31-yn(g),E=1<<y;h[y]=-1,g&=~E}c!==0&&Bs(s,c,a)}function Fh(){return(fe&6)===0?(xc(0),!1):!0}function bg(){if(kt!==null){if(oe===0)var s=kt.return;else s=kt,cs=va=null,Am(s),wo=null,ec=0,s=kt;for(;s!==null;)$0(s.alternate,s),s=s.return;kt=null}}function Oo(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,qC(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),bg(),ae=s,kt=c=ur(s.current,null),Bt=a,oe=0,Pn=null,gs=!1,Mo=Us(s,a),dg=!1,ko=ri=fg=wa=hr=ve=0,Oi=vc=null,mg=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var g=31-yn(h),y=1<<g;a|=s[g],h&=~y}return ps=a,dh(),c}function Y0(s,a){Dt=null,D.H=ki,a===Jl?(a=h_(),oe=3):a===l_?(a=h_(),oe=4):oe=a===c0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Pn=a,kt===null&&(ve=1,Mh(s,Zn(a,s.current)))}function X0(){var s=D.H;return D.H=ki,s===null?ki:s}function Z0(){var s=D.A;return D.A=TC,s}function xg(){ve=4,gs||(Bt&4194176)!==Bt&&ei.current!==null||(Mo=!0),(hr&134217727)===0&&(wa&134217727)===0||ae===null||ys(ae,Bt,ri,!1)}function wg(s,a,c){var h=fe;fe|=2;var g=X0(),y=Z0();(ae!==s||Bt!==a)&&(zh=null,Oo(s,a)),a=!1;var E=ve;t:do try{if(oe!==0&&kt!==null){var R=kt,P=Pn;switch(oe){case 8:bg(),E=6;break t;case 3:case 2:case 6:ei.current===null&&(a=!0);var B=oe;if(oe=0,Pn=null,Po(s,R,P,B),c&&Mo){E=0;break t}break;default:B=oe,oe=0,Pn=null,Po(s,R,P,B)}}AC(),E=ve;break}catch(et){Y0(s,et)}while(!0);return a&&s.shellSuspendCounter++,cs=va=null,fe=h,D.H=g,D.A=y,kt===null&&(ae=null,Bt=0,dh()),E}function AC(){for(;kt!==null;)J0(kt)}function CC(s,a){var c=fe;fe|=2;var h=X0(),g=Z0();ae!==s||Bt!==a?(zh=null,Uh=Tn()+500,Oo(s,a)):Mo=Us(s,a);t:do try{if(oe!==0&&kt!==null){a=kt;var y=Pn;e:switch(oe){case 1:oe=0,Pn=null,Po(s,a,y,1);break;case 2:if(c_(y)){oe=0,Pn=null,tb(a);break}a=function(){oe===2&&ae===s&&(oe=7),Pi(s)},y.then(a,a);break t;case 3:oe=7;break t;case 4:oe=5;break t;case 7:c_(y)?(oe=0,Pn=null,tb(a)):(oe=0,Pn=null,Po(s,a,y,7));break;case 5:var E=null;switch(kt.tag){case 26:E=kt.memoizedState;case 5:case 27:var R=kt;if(!E||Ib(E)){oe=0,Pn=null;var P=R.sibling;if(P!==null)kt=P;else{var B=R.return;B!==null?(kt=B,Hh(B)):kt=null}break e}}oe=0,Pn=null,Po(s,a,y,5);break;case 6:oe=0,Pn=null,Po(s,a,y,6);break;case 8:bg(),ve=6;break t;default:throw Error(i(462))}}RC();break}catch(et){Y0(s,et)}while(!0);return cs=va=null,D.H=h,D.A=g,fe=c,kt!==null?0:(ae=null,Bt=0,dh(),ve)}function RC(){for(;kt!==null&&!Yf();)J0(kt)}function J0(s){var a=x0(s.alternate,s,ps);s.memoizedProps=s.pendingProps,a===null?Hh(s):kt=a}function tb(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=g0(c,a,a.pendingProps,a.type,void 0,Bt);break;case 11:a=g0(c,a,a.pendingProps,a.type.render,a.ref,Bt);break;case 5:Am(a);default:$0(c,a),a=kt=H0(a,ps),a=x0(c,a,ps)}s.memoizedProps=s.pendingProps,a===null?Hh(s):kt=a}function Po(s,a,c,h){cs=va=null,Am(a),wo=null,ec=0;var g=a.return;try{if(pC(s,g,a,c,Bt)){ve=1,Mh(s,Zn(c,s.current)),kt=null;return}}catch(y){if(g!==null)throw kt=g,y;ve=1,Mh(s,Zn(c,s.current)),kt=null;return}a.flags&32768?(Qt||h===1?s=!0:Mo||(Bt&536870912)!==0?s=!1:(gs=s=!0,(h===2||h===3||h===6)&&(h=ei.current,h!==null&&h.tag===13&&(h.flags|=16384))),eb(a,s)):Hh(a)}function Hh(s){var a=s;do{if((a.flags&32768)!==0){eb(a,gs);return}s=a.return;var c=xC(a.alternate,a,ps);if(c!==null){kt=c;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=s}while(a!==null);ve===0&&(ve=5)}function eb(s,a){do{var c=wC(s.alternate,s);if(c!==null){c.flags&=32767,kt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){kt=s;return}kt=s=c}while(s!==null);ve=6,kt=null}function nb(s,a,c,h,g,y,E,R,P,B){var et=D.T,st=lt.p;try{lt.p=2,D.T=null,IC(s,a,c,h,st,g,y,E,R,P,B)}finally{D.T=et,lt.p=st}}function IC(s,a,c,h,g,y,E,R){do jo();while(Ta!==null);if((fe&6)!==0)throw Error(i(327));var P=s.finishedWork;if(h=s.finishedLanes,P===null)return null;if(s.finishedWork=null,s.finishedLanes=0,P===s.current)throw Error(i(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var B=P.lanes|P.childLanes;if(B|=hm,Gu(s,h,B,y,E,R),s===ae&&(kt=ae=null,Bt=0),(P.subtreeFlags&10256)===0&&(P.flags&10256)===0||Bh||(Bh=!0,pg=B,yg=c,kC(Wi,function(){return jo(),null})),c=(P.flags&15990)!==0,(P.subtreeFlags&15990)!==0||c?(c=D.T,D.T=null,y=lt.p,lt.p=2,E=fe,fe|=4,vC(s,P),j0(P,s),J1(Og,s.containerInfo),ed=!!kg,Og=kg=null,s.current=P,M0(s,P.alternate,P),Rl(),fe=E,lt.p=y,D.T=c):s.current=P,Bh?(Bh=!1,Ta=s,_c=h):ib(s,B),B=s.pendingLanes,B===0&&(dr=null),Nl(P.stateNode),Pi(s),a!==null)for(g=s.onRecoverableError,P=0;P<a.length;P++)B=a[P],g(B.value,{componentStack:B.stack});return(_c&3)!==0&&jo(),B=s.pendingLanes,(h&4194218)!==0&&(B&42)!==0?s===vg?bc++:(bc=0,vg=s):bc=0,xc(0),null}function ib(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ic(a)))}function jo(){if(Ta!==null){var s=Ta,a=pg;pg=0;var c=$u(_c),h=D.T,g=lt.p;try{if(lt.p=32>c?32:c,D.T=null,Ta===null)var y=!1;else{c=yg,yg=null;var E=Ta,R=_c;if(Ta=null,_c=0,(fe&6)!==0)throw Error(i(331));var P=fe;if(fe|=4,B0(E.current),V0(E,E.current,R,c),fe=P,xc(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Ls,E)}catch{}y=!0}return y}finally{lt.p=g,D.T=h,ib(s,a)}}return!1}function sb(s,a,c){a=Zn(c,a),a=zm(s.stateNode,a,2),s=ar(s,a,2),s!==null&&(Te(s,2),Pi(s))}function re(s,a,c){if(s.tag===3)sb(s,s,c);else for(;a!==null;){if(a.tag===3){sb(a,s,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(dr===null||!dr.has(h))){s=Zn(c,s),c=o0(2),h=ar(a,c,2),h!==null&&(l0(c,h,a,s),Te(h,2),Pi(h));break}}a=a.return}}function Tg(s,a,c){var h=s.pingCache;if(h===null){h=s.pingCache=new EC;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(c)||(dg=!0,g.add(c),s=NC.bind(null,s,a,c),a.then(s,s))}function NC(s,a,c){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ae===s&&(Bt&c)===c&&(ve===4||ve===3&&(Bt&62914560)===Bt&&300>Tn()-gg?(fe&2)===0&&Oo(s,0):fg|=c,ko===Bt&&(ko=0)),Pi(s)}function rb(s,a){a===0&&(a=zs()),s=Zs(s,a),s!==null&&(Te(s,a),Pi(s))}function DC(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),rb(s,c)}function MC(s,a){var c=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),rb(s,c)}function kC(s,a){return Qr(s,a)}var qh=null,Lo=null,Eg=!1,Gh=!1,Sg=!1,Ea=0;function Pi(s){s!==Lo&&s.next===null&&(Lo===null?qh=Lo=s:Lo=Lo.next=s),Gh=!0,Eg||(Eg=!0,PC(OC))}function xc(s,a){if(!Sg&&Gh){Sg=!0;do for(var c=!1,h=qh;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var E=h.suspendedLanes,R=h.pingedLanes;y=(1<<31-yn(42|s)+1)-1,y&=g&~(E&~R),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(c=!0,lb(h,y))}else y=Bt,y=Gn(h,h===ae?y:0),(y&3)===0||Us(h,y)||(c=!0,lb(h,y));h=h.next}while(c);Sg=!1}}function OC(){Gh=Eg=!1;var s=0;Ea!==0&&(HC()&&(s=Ea),Ea=0);for(var a=Tn(),c=null,h=qh;h!==null;){var g=h.next,y=ab(h,a);y===0?(h.next=null,c===null?qh=g:c.next=g,g===null&&(Lo=c)):(c=h,(s!==0||(y&3)!==0)&&(Gh=!0)),h=g}xc(s)}function ab(s,a){for(var c=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var E=31-yn(y),R=1<<E,P=g[E];P===-1?((R&c)===0||(R&h)!==0)&&(g[E]=to(R,a)):P<=a&&(s.expiredLanes|=R),y&=~R}if(a=ae,c=Bt,c=Gn(s,s===a?c:0),h=s.callbackNode,c===0||s===a&&oe===2||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ja(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Us(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(h!==null&&Ja(h),$u(c)){case 2:case 8:c=Be;break;case 32:c=Wi;break;case 268435456:c=Il;break;default:c=Wi}return h=ob.bind(null,s),c=Qr(c,h),s.callbackPriority=a,s.callbackNode=c,a}return h!==null&&h!==null&&Ja(h),s.callbackPriority=2,s.callbackNode=null,2}function ob(s,a){var c=s.callbackNode;if(jo()&&s.callbackNode!==c)return null;var h=Bt;return h=Gn(s,s===ae?h:0),h===0?null:(W0(s,h,a),ab(s,Tn()),s.callbackNode!=null&&s.callbackNode===c?ob.bind(null,s):null)}function lb(s,a){if(jo())return null;W0(s,a,!0)}function PC(s){GC(function(){(fe&6)!==0?Qr(Pe,s):s()})}function Ag(){return Ea===0&&(Ea=Ml()),Ea}function cb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ei(""+s)}function ub(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function jC(s,a,c,h,g){if(a==="submit"&&c&&c.stateNode===g){var y=cb((g[je]||null).action),E=h.submitter;E&&(a=(a=E[je]||null)?cb(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var R=new oo("action","action",null,h,g);s.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ea!==0){var P=E?ub(g,E):new FormData(g);Pm(c,{pending:!0,data:P,method:g.method,action:y},null,P)}}else typeof y=="function"&&(R.preventDefault(),P=E?ub(g,E):new FormData(g),Pm(c,{pending:!0,data:P,method:g.method,action:y},y,P))},currentTarget:g}]})}}for(var Cg=0;Cg<n_.length;Cg++){var Rg=n_[Cg],LC=Rg.toLowerCase(),VC=Rg[0].toUpperCase()+Rg.slice(1);hi(LC,"on"+VC)}hi(Xv,"onAnimationEnd"),hi(Zv,"onAnimationIteration"),hi(Jv,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(eC,"onTransitionRun"),hi(nC,"onTransitionStart"),hi(iC,"onTransitionCancel"),hi(t_,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function hb(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],g=h.event;h=h.listeners;t:{var y=void 0;if(a)for(var E=h.length-1;0<=E;E--){var R=h[E],P=R.instance,B=R.currentTarget;if(R=R.listener,P!==y&&g.isPropagationStopped())break t;y=R,g.currentTarget=B;try{y(g)}catch(et){Dh(et)}g.currentTarget=null,y=P}else for(E=0;E<h.length;E++){if(R=h[E],P=R.instance,B=R.currentTarget,R=R.listener,P!==y&&g.isPropagationStopped())break t;y=R,g.currentTarget=B;try{y(g)}catch(et){Dh(et)}g.currentTarget=null,y=P}}}}function jt(s,a){var c=a[Kr];c===void 0&&(c=a[Kr]=new Set);var h=s+"__bubble";c.has(h)||(db(a,s,2,!1),c.add(h))}function Ig(s,a,c){var h=0;a&&(h|=4),db(c,s,h,a)}var $h="_reactListening"+Math.random().toString(36).slice(2);function Ng(s){if(!s[$h]){s[$h]=!0,Ol.forEach(function(c){c!=="selectionchange"&&(UC.has(c)||Ig(c,!1,s),Ig(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[$h]||(a[$h]=!0,Ig("selectionchange",!1,a))}}function db(s,a,c,h){switch(Pb(a)){case 2:var g=hR;break;case 8:g=dR;break;default:g=Hg}c=g.bind(null,a,c,s),g=void 0,!Kn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(a,c,{capture:!0,passive:g}):s.addEventListener(a,c,!0):g!==void 0?s.addEventListener(a,c,{passive:g}):s.addEventListener(a,c,!1)}function Dg(s,a,c,h,g){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var R=h.stateNode.containerInfo;if(R===g||R.nodeType===8&&R.parentNode===g)break;if(E===4)for(E=h.return;E!==null;){var P=E.tag;if((P===3||P===4)&&(P=E.stateNode.containerInfo,P===g||P.nodeType===8&&P.parentNode===g))return;E=E.return}for(;R!==null;){if(E=ui(R),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){h=y=E;continue t}R=R.parentNode}}h=h.return}Xu(function(){var B=y,et=ao(c),st=[];t:{var W=e_.get(s);if(W!==void 0){var J=oo,vt=s;switch(s){case"keypress":if(Ai(c)===0)break t;case"keydown":case"keyup":J=mo;break;case"focusin":vt="focus",J=uo;break;case"focusout":vt="blur",J=uo;break;case"beforeblur":case"afterblur":J=uo;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=im;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=rh;break;case Xv:case Zv:case Jv:J=ho;break;case t_:J=oh;break;case"scroll":case"scrollend":J=Zu;break;case"wheel":J=go;break;case"copy":case"cut":case"paste":J=fo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=$l;break;case"toggle":case"beforetoggle":J=ch}var At=(a&4)!==0,_e=!At&&(s==="scroll"||s==="scrollend"),H=At?W!==null?W+"Capture":null:W;At=[];for(var z=B,$;z!==null;){var nt=z;if($=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||$===null||H===null||(nt=ta(z,H),nt!=null&&At.push(Tc(z,nt,$))),_e)break;z=z.return}0<At.length&&(W=new J(W,vt,null,c,et),st.push({event:W,listeners:At}))}}if((a&7)===0){t:{if(W=s==="mouseover"||s==="pointerover",J=s==="mouseout"||s==="pointerout",W&&c!==Wn&&(vt=c.relatedTarget||c.fromElement)&&(ui(vt)||vt[Ki]))break t;if((J||W)&&(W=et.window===et?et:(W=et.ownerDocument)?W.defaultView||W.parentWindow:window,J?(vt=c.relatedTarget||c.toElement,J=B,vt=vt?ui(vt):null,vt!==null&&(_e=yt(vt),At=vt.tag,vt!==_e||At!==5&&At!==27&&At!==6)&&(vt=null)):(J=null,vt=B),J!==vt)){if(At=Yn,nt="onMouseLeave",H="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(At=$l,nt="onPointerLeave",H="onPointerEnter",z="pointer"),_e=J==null?W:Gs(J),$=vt==null?W:Gs(vt),W=new At(nt,z+"leave",J,c,et),W.target=_e,W.relatedTarget=$,nt=null,ui(et)===B&&(At=new At(H,z+"enter",vt,c,et),At.target=$,At.relatedTarget=_e,nt=At),_e=nt,J&&vt)e:{for(At=J,H=vt,z=0,$=At;$;$=Vo($))z++;for($=0,nt=H;nt;nt=Vo(nt))$++;for(;0<z-$;)At=Vo(At),z--;for(;0<$-z;)H=Vo(H),$--;for(;z--;){if(At===H||H!==null&&At===H.alternate)break e;At=Vo(At),H=Vo(H)}At=null}else At=null;J!==null&&fb(st,W,J,At,!1),vt!==null&&_e!==null&&fb(st,_e,vt,At,!0)}}t:{if(W=B?Gs(B):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var mt=zv;else if(Ve(W))if(Bv)mt=X1;else{mt=K1;var Mt=W1}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?B&&Ul(B.elementType)&&(mt=zv):mt=Y1;if(mt&&(mt=mt(s,B))){is(st,mt,c,et);break t}Mt&&Mt(s,W,B),s==="focusout"&&B&&W.type==="number"&&B.memoizedProps.value!=null&&ro(W,"number",W.value)}switch(Mt=B?Gs(B):window,s){case"focusin":(Ve(Mt)||Mt.contentEditable==="true")&&(po=Mt,lm=B,Kl=null);break;case"focusout":Kl=lm=po=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,Kv(st,c,et);break;case"selectionchange":if(tC)break;case"keydown":case"keyup":Kv(st,c,et)}var _t;if(Ii)t:{switch(s){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Ut?K(s,c)&&(xt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(w&&c.locale!=="ko"&&(Ut||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Ut&&(_t=Bl()):(Si=et,Xs="value"in Si?Si.value:Si.textContent,Ut=!0)),Mt=Qh(B,xt),0<Mt.length&&(xt=new ql(xt,s,null,c,et),st.push({event:xt,listeners:Mt}),_t?xt.data=_t:(_t=ot(c),_t!==null&&(xt.data=_t)))),(_t=b?Le(s,c):zt(s,c))&&(xt=Qh(B,"onBeforeInput"),0<xt.length&&(Mt=new ql("onBeforeInput","beforeinput",null,c,et),st.push({event:Mt,listeners:xt}),Mt.data=_t)),jC(st,s,B,c,et)}hb(st,a)})}function Tc(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Qh(s,a){for(var c=a+"Capture",h=[];s!==null;){var g=s,y=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ta(s,c),g!=null&&h.unshift(Tc(s,g,y)),g=ta(s,a),g!=null&&h.push(Tc(s,g,y))),s=s.return}return h}function Vo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function fb(s,a,c,h,g){for(var y=a._reactName,E=[];c!==null&&c!==h;){var R=c,P=R.alternate,B=R.stateNode;if(R=R.tag,P!==null&&P===h)break;R!==5&&R!==26&&R!==27||B===null||(P=B,g?(B=ta(c,y),B!=null&&E.unshift(Tc(c,B,P))):g||(B=ta(c,y),B!=null&&E.push(Tc(c,B,P)))),c=c.return}E.length!==0&&s.push({event:a,listeners:E})}var zC=/\r\n?/g,BC=/\u0000|\uFFFD/g;function mb(s){return(typeof s=="string"?s:""+s).replace(zC,`
`).replace(BC,"")}function gb(s,a){return a=mb(a),mb(s)===a}function Wh(){}function se(s,a,c,h,g,y){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Qn(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Qn(s,""+h);break;case"className":Ws(s,"class",h);break;case"tabIndex":Ws(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(s,c,h);break;case"style":Yu(s,h,y);break;case"data":if(a!=="object"){Ws(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=Ei(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&se(s,a,"name",g.name,g,null),se(s,a,"formEncType",g.formEncType,g,null),se(s,a,"formMethod",g.formMethod,g,null),se(s,a,"formTarget",g.formTarget,g,null)):(se(s,a,"encType",g.encType,g,null),se(s,a,"method",g.method,g,null),se(s,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=Ei(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=Wh);break;case"onScroll":h!=null&&jt("scroll",s);break;case"onScrollEnd":h!=null&&jt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=Ei(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":jt("beforetoggle",s),jt("toggle",s),Qs(s,"popover",h);break;case"xlinkActuate":$n(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":$n(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":$n(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":$n(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":$n(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":$n(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":$n(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":$n(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":$n(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Qs(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=em.get(c)||c,Qs(s,c,h))}}function Mg(s,a,c,h,g,y){switch(c){case"style":Yu(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?Qn(s,h):(typeof h=="number"||typeof h=="bigint")&&Qn(s,""+h);break;case"onScroll":h!=null&&jt("scroll",s);break;case"onScrollEnd":h!=null&&jt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=s[je]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(a,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,h,g);break t}c in s?s[c]=h:h===!0?s.setAttribute(c,""):Qs(s,c,h)}}}function Je(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",s),jt("load",s);var h=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:se(s,a,y,E,c,null)}}g&&se(s,a,"srcSet",c.srcSet,c,null),h&&se(s,a,"src",c.src,c,null);return;case"input":jt("invalid",s);var R=y=E=g=null,P=null,B=null;for(h in c)if(c.hasOwnProperty(h)){var et=c[h];if(et!=null)switch(h){case"name":g=et;break;case"type":E=et;break;case"checked":P=et;break;case"defaultChecked":B=et;break;case"value":y=et;break;case"defaultValue":R=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,a));break;default:se(s,a,h,et,c,null)}}Zr(s,y,R,P,B,E,g,!1),Xr(s);return;case"select":jt("invalid",s),h=E=y=null;for(g in c)if(c.hasOwnProperty(g)&&(R=c[g],R!=null))switch(g){case"value":y=R;break;case"defaultValue":E=R;break;case"multiple":h=R;default:se(s,a,g,R,c,null)}a=y,c=E,s.multiple=!!h,a!=null?$t(s,!!h,a,!1):c!=null&&$t(s,!!h,c,!0);return;case"textarea":jt("invalid",s),y=g=h=null;for(E in c)if(c.hasOwnProperty(E)&&(R=c[E],R!=null))switch(E){case"value":h=R;break;case"defaultValue":g=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:se(s,a,E,R,c,null)}Ys(s,h,g,y),Xr(s);return;case"option":for(P in c)if(c.hasOwnProperty(P)&&(h=c[P],h!=null))switch(P){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:se(s,a,P,h,c,null)}return;case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":jt("load",s);break;case"video":case"audio":for(h=0;h<wc.length;h++)jt(wc[h],s);break;case"image":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"embed":case"source":case"link":jt("error",s),jt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in c)if(c.hasOwnProperty(B)&&(h=c[B],h!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:se(s,a,B,h,c,null)}return;default:if(Ul(a)){for(et in c)c.hasOwnProperty(et)&&(h=c[et],h!==void 0&&Mg(s,a,et,h,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(h=c[R],h!=null&&se(s,a,R,h,c,null))}function FC(s,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,R=null,P=null,B=null,et=null;for(J in c){var st=c[J];if(c.hasOwnProperty(J)&&st!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":P=st;default:h.hasOwnProperty(J)||se(s,a,J,null,h,st)}}for(var W in h){var J=h[W];if(st=c[W],h.hasOwnProperty(W)&&(J!=null||st!=null))switch(W){case"type":y=J;break;case"name":g=J;break;case"checked":B=J;break;case"defaultChecked":et=J;break;case"value":E=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:J!==st&&se(s,a,W,J,h,st)}}Ks(s,E,R,P,B,et,y,g);return;case"select":J=E=R=W=null;for(y in c)if(P=c[y],c.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":J=P;default:h.hasOwnProperty(y)||se(s,a,y,null,h,P)}for(g in h)if(y=h[g],P=c[g],h.hasOwnProperty(g)&&(y!=null||P!=null))switch(g){case"value":W=y;break;case"defaultValue":R=y;break;case"multiple":E=y;default:y!==P&&se(s,a,g,y,h,P)}a=R,c=E,h=J,W!=null?$t(s,!!c,W,!1):!!h!=!!c&&(a!=null?$t(s,!!c,a,!0):$t(s,!!c,c?[]:"",!1));return;case"textarea":J=W=null;for(R in c)if(g=c[R],c.hasOwnProperty(R)&&g!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:se(s,a,R,null,h,g)}for(E in h)if(g=h[E],y=c[E],h.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":W=g;break;case"defaultValue":J=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&se(s,a,E,g,h,y)}Jr(s,W,J);return;case"option":for(var vt in c)if(W=c[vt],c.hasOwnProperty(vt)&&W!=null&&!h.hasOwnProperty(vt))switch(vt){case"selected":s.selected=!1;break;default:se(s,a,vt,null,h,W)}for(P in h)if(W=h[P],J=c[P],h.hasOwnProperty(P)&&W!==J&&(W!=null||J!=null))switch(P){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:se(s,a,P,W,h,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in c)W=c[At],c.hasOwnProperty(At)&&W!=null&&!h.hasOwnProperty(At)&&se(s,a,At,null,h,W);for(B in h)if(W=h[B],J=c[B],h.hasOwnProperty(B)&&W!==J&&(W!=null||J!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:se(s,a,B,W,h,J)}return;default:if(Ul(a)){for(var _e in c)W=c[_e],c.hasOwnProperty(_e)&&W!==void 0&&!h.hasOwnProperty(_e)&&Mg(s,a,_e,void 0,h,W);for(et in h)W=h[et],J=c[et],!h.hasOwnProperty(et)||W===J||W===void 0&&J===void 0||Mg(s,a,et,W,h,J);return}}for(var H in c)W=c[H],c.hasOwnProperty(H)&&W!=null&&!h.hasOwnProperty(H)&&se(s,a,H,null,h,W);for(st in h)W=h[st],J=c[st],!h.hasOwnProperty(st)||W===J||W==null&&J==null||se(s,a,st,W,h,J)}var kg=null,Og=null;function Kh(s){return s.nodeType===9?s:s.ownerDocument}function pb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Pg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jg=null;function HC(){var s=window.event;return s&&s.type==="popstate"?s===jg?!1:(jg=s,!0):(jg=null,!1)}var vb=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,_b=typeof Promise=="function"?Promise:void 0,GC=typeof queueMicrotask=="function"?queueMicrotask:typeof _b<"u"?function(s){return _b.resolve(null).then(s).catch($C)}:vb;function $C(s){setTimeout(function(){throw s})}function Lg(s,a){var c=a,h=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(h===0){s.removeChild(g),Dc(a);return}h--}else c!=="$"&&c!=="$?"&&c!=="$!"||h++;c=g}while(c);Dc(a)}function Vg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Vg(c),Yr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function QC(s,a,c,h){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[qs])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=mi(s.nextSibling),s===null)break}return null}function WC(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=mi(s.nextSibling),s===null))return null;return s}function mi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}function bb(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}function xb(s,a,c){switch(a=Kh(c),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}var ai=new Map,wb=new Set;function Yh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var vs=lt.d;lt.d={f:KC,r:YC,D:XC,C:ZC,L:JC,m:tR,X:nR,S:eR,M:iR};function KC(){var s=vs.f(),a=Fh();return s||a}function YC(s){var a=Yi(s);a!==null&&a.tag===5&&a.type==="form"?K_(a):vs.r(s)}var Uo=typeof document>"u"?null:document;function Tb(s,a,c){var h=Uo;if(h&&typeof a=="string"&&a){var g=pe(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),wb.has(g)||(wb.add(g),s={rel:s,crossOrigin:c,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),Je(a,"link",s),he(a),h.head.appendChild(a)))}}function XC(s){vs.D(s),Tb("dns-prefetch",s,null)}function ZC(s,a){vs.C(s,a),Tb("preconnect",s,a)}function JC(s,a,c){vs.L(s,a,c);var h=Uo;if(h&&s&&a){var g='link[rel="preload"][as="'+pe(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+pe(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+pe(c.imageSizes)+'"]')):g+='[href="'+pe(s)+'"]';var y=g;switch(a){case"style":y=zo(s);break;case"script":y=Bo(s)}ai.has(y)||(s=k({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),ai.set(y,s),h.querySelector(g)!==null||a==="style"&&h.querySelector(Ec(y))||a==="script"&&h.querySelector(Sc(y))||(a=h.createElement("link"),Je(a,"link",s),he(a),h.head.appendChild(a)))}}function tR(s,a){vs.m(s,a);var c=Uo;if(c&&s){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+pe(h)+'"][href="'+pe(s)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Bo(s)}if(!ai.has(y)&&(s=k({rel:"modulepreload",href:s},a),ai.set(y,s),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Sc(y)))return}h=c.createElement("link"),Je(h,"link",s),he(h),c.head.appendChild(h)}}}function eR(s,a,c){vs.S(s,a,c);var h=Uo;if(h&&s){var g=$s(h).hoistableStyles,y=zo(s);a=a||"default";var E=g.get(y);if(!E){var R={loading:0,preload:null};if(E=h.querySelector(Ec(y)))R.loading=5;else{s=k({rel:"stylesheet",href:s,"data-precedence":a},c),(c=ai.get(y))&&Ug(s,c);var P=E=h.createElement("link");he(P),Je(P,"link",s),P._p=new Promise(function(B,et){P.onload=B,P.onerror=et}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Xh(E,a,h)}E={type:"stylesheet",instance:E,count:1,state:R},g.set(y,E)}}}function nR(s,a){vs.X(s,a);var c=Uo;if(c&&s){var h=$s(c).hoistableScripts,g=Bo(s),y=h.get(g);y||(y=c.querySelector(Sc(g)),y||(s=k({src:s,async:!0},a),(a=ai.get(g))&&zg(s,a),y=c.createElement("script"),he(y),Je(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function iR(s,a){vs.M(s,a);var c=Uo;if(c&&s){var h=$s(c).hoistableScripts,g=Bo(s),y=h.get(g);y||(y=c.querySelector(Sc(g)),y||(s=k({src:s,async:!0,type:"module"},a),(a=ai.get(g))&&zg(s,a),y=c.createElement("script"),he(y),Je(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function Eb(s,a,c,h){var g=(g=qn.current)?Yh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=zo(c.href),c=$s(g).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=zo(c.href);var y=$s(g).hoistableStyles,E=y.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,E),(y=g.querySelector(Ec(s)))&&!y._p&&(E.instance=y,E.state.loading=5),ai.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ai.set(s,c),y||sR(g,s,c,E.state))),a&&h===null)throw Error(i(528,""));return E}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bo(c),c=$s(g).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function zo(s){return'href="'+pe(s)+'"'}function Ec(s){return'link[rel="stylesheet"]['+s+"]"}function Sb(s){return k({},s,{"data-precedence":s.precedence,precedence:null})}function sR(s,a,c,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Je(a,"link",c),he(a),s.head.appendChild(a))}function Bo(s){return'[src="'+pe(s)+'"]'}function Sc(s){return"script[async]"+s}function Ab(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+pe(c.href)+'"]');if(h)return a.instance=h,he(h),h;var g=k({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),he(h),Je(h,"style",g),Xh(h,c.precedence,s),a.instance=h;case"stylesheet":g=zo(c.href);var y=s.querySelector(Ec(g));if(y)return a.state.loading|=4,a.instance=y,he(y),y;h=Sb(c),(g=ai.get(g))&&Ug(h,g),y=(s.ownerDocument||s).createElement("link"),he(y);var E=y;return E._p=new Promise(function(R,P){E.onload=R,E.onerror=P}),Je(y,"link",h),a.state.loading|=4,Xh(y,c.precedence,s),a.instance=y;case"script":return y=Bo(c.src),(g=s.querySelector(Sc(y)))?(a.instance=g,he(g),g):(h=c,(g=ai.get(y))&&(h=k({},c),zg(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),he(g),Je(g,"link",h),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Xh(h,c.precedence,s));return a.instance}function Xh(s,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,E=0;E<h.length;E++){var R=h[E];if(R.dataset.precedence===a)y=R;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function Ug(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function zg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Zh=null;function Cb(s,a,c){if(Zh===null){var h=new Map,g=Zh=new Map;g.set(c,h)}else g=Zh,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var y=c[g];if(!(y[qs]||y[Fe]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=s+E;var R=h.get(E);R?R.push(y):h.set(E,[y])}}return h}function Rb(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function rR(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ib(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ac=null;function aR(){}function oR(s,a,c){if(Ac===null)throw Error(i(475));var h=Ac;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=zo(c.href),y=s.querySelector(Ec(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Jh.bind(h),s.then(h,h)),a.state.loading|=4,a.instance=y,he(y);return}y=s.ownerDocument||s,c=Sb(c),(g=ai.get(g))&&Ug(c,g),y=y.createElement("link"),he(y);var E=y;E._p=new Promise(function(R,P){E.onload=R,E.onerror=P}),Je(y,"link",c),a.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=Jh.bind(h),s.addEventListener("load",a),s.addEventListener("error",a))}}function lR(){if(Ac===null)throw Error(i(475));var s=Ac;return s.stylesheets&&s.count===0&&Bg(s,s.stylesheets),0<s.count?function(a){var c=setTimeout(function(){if(s.stylesheets&&Bg(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c)}}:null}function Jh(){if(this.count--,this.count===0){if(this.stylesheets)Bg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var td=null;function Bg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,td=new Map,a.forEach(cR,s),td=null,Jh.call(s))}function cR(s,a){if(!(a.state.loading&4)){var c=td.get(s);if(c)var h=c.get(null);else{c=new Map,td.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}g=a.instance,E=g.getAttribute("data-precedence"),y=c.get(E)||h,y===h&&c.set(null,g),c.set(E,g),this.count++,h=Jh.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var Cc={$$typeof:T,Provider:null,Consumer:null,_currentValue:Et,_currentValue2:Et,_threadCount:0};function uR(s,a,c,h,g,y,E,R){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Nb(s,a,c,h,g,y,E,R,P,B,et,st){return s=new uR(s,a,c,E,R,P,B,st),a=1,y===!0&&(a|=24),y=si(3,null,null,a),s.current=y,y.stateNode=s,a=_m(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:a},Jm(y),s}function Db(s){return s?(s=_o,s):_o}function Mb(s,a,c,h,g,y){g=Db(g),h.context===null?h.context=g:h.pendingContext=g,h=rr(a),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=ar(s,h,a),c!==null&&(xn(c,s,a),uc(c,s,a))}function kb(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Fg(s,a){kb(s,a),(s=s.alternate)&&kb(s,a)}function Ob(s){if(s.tag===13){var a=Zs(s,67108864);a!==null&&xn(a,s,67108864),Fg(s,67108864)}}var ed=!0;function hR(s,a,c,h){var g=D.T;D.T=null;var y=lt.p;try{lt.p=2,Hg(s,a,c,h)}finally{lt.p=y,D.T=g}}function dR(s,a,c,h){var g=D.T;D.T=null;var y=lt.p;try{lt.p=8,Hg(s,a,c,h)}finally{lt.p=y,D.T=g}}function Hg(s,a,c,h){if(ed){var g=qg(h);if(g===null)Dg(s,a,h,nd,c),jb(s,h);else if(mR(g,s,a,c,h))h.stopPropagation();else if(jb(s,h),a&4&&-1<fR.indexOf(s)){for(;g!==null;){var y=Yi(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=ci(y.pendingLanes);if(E!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var P=1<<31-yn(E);R.entanglements[1]|=P,E&=~P}Pi(y),(fe&6)===0&&(Uh=Tn()+500,xc(0))}}break;case 13:R=Zs(y,2),R!==null&&xn(R,y,2),Fh(),Fg(y,2)}if(y=qg(h),y===null&&Dg(s,a,h,nd,c),y===g)break;g=y}g!==null&&h.stopPropagation()}else Dg(s,a,h,null,c)}}function qg(s){return s=ao(s),Gg(s)}var nd=null;function Gg(s){if(nd=null,s=ui(s),s!==null){var a=yt(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=Pt(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return nd=s,null}function Pb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bu()){case Pe:return 2;case Be:return 8;case Wi:case Fu:return 32;case Il:return 268435456;default:return 32}default:return 32}}var $g=!1,fr=null,mr=null,gr=null,Rc=new Map,Ic=new Map,pr=[],fR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jb(s,a){switch(s){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Rc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(a.pointerId)}}function Nc(s,a,c,h,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},a!==null&&(a=Yi(a),a!==null&&Ob(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function mR(s,a,c,h,g){switch(a){case"focusin":return fr=Nc(fr,s,a,c,h,g),!0;case"dragenter":return mr=Nc(mr,s,a,c,h,g),!0;case"mouseover":return gr=Nc(gr,s,a,c,h,g),!0;case"pointerover":var y=g.pointerId;return Rc.set(y,Nc(Rc.get(y)||null,s,a,c,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Ic.set(y,Nc(Ic.get(y)||null,s,a,c,h,g)),!0}return!1}function Lb(s){var a=ui(s.target);if(a!==null){var c=yt(a);if(c!==null){if(a=c.tag,a===13){if(a=Pt(c),a!==null){s.blockedOn=a,Hs(s.priority,function(){if(c.tag===13){var h=jn(),g=Zs(c,h);g!==null&&xn(g,c,h),Fg(c,h)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function id(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=qg(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Wn=h,c.target.dispatchEvent(h),Wn=null}else return a=Yi(c),a!==null&&Ob(a),s.blockedOn=c,!1;a.shift()}return!0}function Vb(s,a,c){id(s)&&c.delete(a)}function gR(){$g=!1,fr!==null&&id(fr)&&(fr=null),mr!==null&&id(mr)&&(mr=null),gr!==null&&id(gr)&&(gr=null),Rc.forEach(Vb),Ic.forEach(Vb)}function sd(s,a){s.blockedOn===a&&(s.blockedOn=null,$g||($g=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gR)))}var rd=null;function Ub(s){rd!==s&&(rd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rd===s&&(rd=null);for(var a=0;a<s.length;a+=3){var c=s[a],h=s[a+1],g=s[a+2];if(typeof h!="function"){if(Gg(h||c)===null)continue;break}var y=Yi(c);y!==null&&(s.splice(a,3),a-=3,Pm(y,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function Dc(s){function a(P){return sd(P,s)}fr!==null&&sd(fr,s),mr!==null&&sd(mr,s),gr!==null&&sd(gr,s),Rc.forEach(a),Ic.forEach(a);for(var c=0;c<pr.length;c++){var h=pr[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<pr.length&&(c=pr[0],c.blockedOn===null);)Lb(c),c.blockedOn===null&&pr.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],y=c[h+1],E=g[je]||null;if(typeof y=="function")E||Ub(c);else if(E){var R=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[je]||null)R=E.formAction;else if(Gg(g)!==null)continue}else R=E.action;typeof R=="function"?c[h+1]=R:(c.splice(h,3),h-=3),Ub(c)}}}function Qg(s){this._internalRoot=s}ad.prototype.render=Qg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=jn();Mb(c,h,s,a,null,null)},ad.prototype.unmount=Qg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;s.tag===0&&jo(),Mb(s.current,2,null,s,null,null),Fh(),a[Ki]=null}};function ad(s){this._internalRoot=s}ad.prototype.unstable_scheduleHydration=function(s){if(s){var a=Qu();s={blockedOn:null,target:s,priority:a};for(var c=0;c<pr.length&&a!==0&&a<pr[c].priority;c++);pr.splice(c,0,s),c===0&&Lb(s)}};var zb=t.version;if(zb!=="19.0.0")throw Error(i(527,zb,"19.0.0"));lt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=rt(a),s=s!==null?dt(s):null,s=s===null?null:s.stateNode,s};var pR={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:ui,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Ls=od.inject(pR),on=od}catch{}}return kc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var c=!1,h="",g=i0,y=s0,E=r0,R=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks)),a=Nb(s,1,!1,null,null,c,h,g,y,E,R,null),s[Ki]=a.current,Ng(s.nodeType===8?s.parentNode:s),new Qg(a)},kc.hydrateRoot=function(s,a,c){if(!r(s))throw Error(i(299));var h=!1,g="",y=i0,E=s0,R=r0,P=null,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks),c.formState!==void 0&&(B=c.formState)),a=Nb(s,1,!0,a,c??null,h,g,y,E,R,P,B),a.context=Db(null),c=a.current,h=jn(),g=rr(h),g.callback=null,ar(c,g,h),a.current.lanes=h,Te(a,h),Pi(a),s[Ki]=a.current,Ng(s),new ad(a)},kc.version="19.0.0",kc}var Yb;function NR(){if(Yb)return Yg.exports;Yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Yg.exports=IR(),Yg.exports}var DR=NR();tE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},uu.apply(this,arguments)}var Er;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Er||(Er={}));const Xb="popstate";function MR(n){n===void 0&&(n={});function t(i,r){let{pathname:o,search:l,hash:u}=i.location;return Rp("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(i,r){return typeof r=="string"?r:Fd(r)}return OR(t,e,null,n)}function Ae(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function eE(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kR(){return Math.random().toString(36).substr(2,8)}function Zb(n,t){return{usr:n.state,key:n.key,idx:t}}function Rp(n,t,e,i){return e===void 0&&(e=null),uu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?pl(t):t,{state:e,key:t&&t.key||i||kR()})}function Fd(n){let{pathname:t="/",search:e="",hash:i=""}=n;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function pl(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substr(e),n=n.substr(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substr(i),n=n.substr(0,i)),n&&(t.pathname=n)}return t}function OR(n,t,e,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,u=Er.Pop,d=null,f=p();f==null&&(f=0,l.replaceState(uu({},l.state,{idx:f}),""));function p(){return(l.state||{idx:null}).idx}function v(){u=Er.Pop;let A=p(),L=A==null?null:A-f;f=A,d&&d({action:u,location:S.location,delta:L})}function x(A,L){u=Er.Push;let G=Rp(S.location,A,L);f=p()+1;let F=Zb(G,f),Y=S.createHref(G);try{l.pushState(F,"",Y)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(Y)}o&&d&&d({action:u,location:S.location,delta:1})}function T(A,L){u=Er.Replace;let G=Rp(S.location,A,L);f=p();let F=Zb(G,f),Y=S.createHref(G);l.replaceState(F,"",Y),o&&d&&d({action:u,location:S.location,delta:0})}function C(A){let L=r.location.origin!=="null"?r.location.origin:r.location.href,G=typeof A=="string"?A:Fd(A);return G=G.replace(/ $/,"%20"),Ae(L,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,L)}let S={get action(){return u},get location(){return n(r,l)},listen(A){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Xb,v),d=A,()=>{r.removeEventListener(Xb,v),d=null}},createHref(A){return t(r,A)},createURL:C,encodeLocation(A){let L=C(A);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:x,replace:T,go(A){return l.go(A)}};return S}var Jb;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Jb||(Jb={}));function PR(n,t,e){return e===void 0&&(e="/"),jR(n,t,e)}function jR(n,t,e,i){let r=typeof t=="string"?pl(t):t,o=yy(r.pathname||"/",e);if(o==null)return null;let l=nE(n);LR(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=KR(o);u=$R(l[d],f)}return u}function nE(n,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let r=(o,l,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(Ae(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let f=Ir([i,d.relativePath]),p=e.concat(d);o.children&&o.children.length>0&&(Ae(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),nE(o.children,t,p,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:qR(f,o.index),routesMeta:p})};return n.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,l);else for(let d of iE(o.path))r(o,l,d)}),t}function iE(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=iE(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function LR(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:GR(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const VR=/^:[\w-]+$/,UR=3,zR=2,BR=1,FR=10,HR=-2,tx=n=>n==="*";function qR(n,t){let e=n.split("/"),i=e.length;return e.some(tx)&&(i+=HR),t&&(i+=zR),e.filter(r=>!tx(r)).reduce((r,o)=>r+(VR.test(o)?UR:o===""?BR:FR),i)}function GR(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function $R(n,t,e){let{routesMeta:i}=n,r={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=o==="/"?t:t.slice(o.length)||"/",v=QR({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),x=d.route;if(!v)return null;Object.assign(r,v.params),l.push({params:r,pathname:Ir([o,v.pathname]),pathnameBase:JR(Ir([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=Ir([o,v.pathnameBase]))}return l}function QR(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=WR(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,p,v)=>{let{paramName:x,isOptional:T}=p;if(x==="*"){let S=u[v]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const C=u[v];return T&&!C?f[x]=void 0:f[x]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function WR(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),eE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function KR(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return eE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function yy(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function YR(n,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?pl(n):n;return{pathname:e?e.startsWith("/")?e:XR(e,t):t,search:tI(i),hash:eI(r)}}function XR(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function tp(n,t,e,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZR(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function vy(n,t){let e=ZR(n);return t?e.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function _y(n,t,e,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=pl(n):(r=uu({},n),Ae(!r.pathname||!r.pathname.includes("?"),tp("?","pathname","search",r)),Ae(!r.pathname||!r.pathname.includes("#"),tp("#","pathname","hash",r)),Ae(!r.search||!r.search.includes("#"),tp("#","search","hash",r)));let o=n===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=e;else{let v=t.length-1;if(!i&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;r.pathname=x.join("/")}u=v>=0?t[v]:"/"}let d=YR(r,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}const Ir=n=>n.join("/").replace(/\/\/+/g,"/"),JR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function nI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const sE=["post","put","patch","delete"];new Set(sE);const iI=["get",...sE];new Set(iI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},hu.apply(this,arguments)}const by=Q.createContext(null),sI=Q.createContext(null),Br=Q.createContext(null),pf=Q.createContext(null),Os=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),rE=Q.createContext(null);function rI(n,t){let{relative:e}=t===void 0?{}:t;yl()||Ae(!1);let{basename:i,navigator:r}=Q.useContext(Br),{hash:o,pathname:l,search:u}=oE(n,{relative:e}),d=l;return i!=="/"&&(d=l==="/"?i:Ir([i,l])),r.createHref({pathname:d,search:u,hash:o})}function yl(){return Q.useContext(pf)!=null}function vl(){return yl()||Ae(!1),Q.useContext(pf).location}function aE(n){Q.useContext(Br).static||Q.useLayoutEffect(n)}function yf(){let{isDataRoute:n}=Q.useContext(Os);return n?bI():aI()}function aI(){yl()||Ae(!1);let n=Q.useContext(by),{basename:t,future:e,navigator:i}=Q.useContext(Br),{matches:r}=Q.useContext(Os),{pathname:o}=vl(),l=JSON.stringify(vy(r,e.v7_relativeSplatPath)),u=Q.useRef(!1);return aE(()=>{u.current=!0}),Q.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let v=_y(f,JSON.parse(l),o,p.relative==="path");n==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Ir([t,v.pathname])),(p.replace?i.replace:i.push)(v,p.state,p)},[t,i,l,o,n])}const oI=Q.createContext(null);function lI(n){let t=Q.useContext(Os).outlet;return t&&Q.createElement(oI.Provider,{value:n},t)}function oE(n,t){let{relative:e}=t===void 0?{}:t,{future:i}=Q.useContext(Br),{matches:r}=Q.useContext(Os),{pathname:o}=vl(),l=JSON.stringify(vy(r,i.v7_relativeSplatPath));return Q.useMemo(()=>_y(n,JSON.parse(l),o,e==="path"),[n,l,o,e])}function cI(n,t){return uI(n,t)}function uI(n,t,e,i){yl()||Ae(!1);let{navigator:r,static:o}=Q.useContext(Br),{matches:l}=Q.useContext(Os),u=l[l.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=vl(),v;if(t){var x;let L=typeof t=="string"?pl(t):t;f==="/"||(x=L.pathname)!=null&&x.startsWith(f)||Ae(!1),v=L}else v=p;let T=v.pathname||"/",C=T;if(f!=="/"){let L=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let S=PR(n,{pathname:C}),A=gI(S&&S.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:Ir([f,r.encodeLocation?r.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:Ir([f,r.encodeLocation?r.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,e,i);return t&&A?Q.createElement(pf.Provider,{value:{location:hu({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Er.Pop}},A):A}function hI(){let n=_I(),t=nI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},t),e?Q.createElement("pre",{style:r},e):null,null)}const dI=Q.createElement(hI,null);class fI extends Q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Q.createElement(Os.Provider,{value:this.props.routeContext},Q.createElement(rE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mI(n){let{routeContext:t,match:e,children:i}=n,r=Q.useContext(by);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Os.Provider,{value:t},i)}function gI(n,t,e,i){var r;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),n==null){var o;if(!e)return null;if(e.errors)n=e.matches;else if((o=i)!=null&&o.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let l=n,u=(r=e)==null?void 0:r.errors;if(u!=null){let p=l.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);p>=0||Ae(!1),l=l.slice(0,Math.min(l.length,p+1))}let d=!1,f=-1;if(e&&i&&i.v7_partialHydration)for(let p=0;p<l.length;p++){let v=l[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=p),v.route.id){let{loaderData:x,errors:T}=e,C=v.route.loader&&x[v.route.id]===void 0&&(!T||T[v.route.id]===void 0);if(v.route.lazy||C){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((p,v,x)=>{let T,C=!1,S=null,A=null;e&&(T=u&&v.route.id?u[v.route.id]:void 0,S=v.route.errorElement||dI,d&&(f<0&&x===0?(xI("route-fallback"),C=!0,A=null):f===x&&(C=!0,A=v.route.hydrateFallbackElement||null)));let L=t.concat(l.slice(0,x+1)),G=()=>{let F;return T?F=S:C?F=A:v.route.Component?F=Q.createElement(v.route.Component,null):v.route.element?F=v.route.element:F=p,Q.createElement(mI,{match:v,routeContext:{outlet:p,matches:L,isDataRoute:e!=null},children:F})};return e&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?Q.createElement(fI,{location:e.location,revalidation:e.revalidation,component:S,error:T,children:G(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):G()},null)}var lE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(lE||{}),cE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(cE||{});function pI(n){let t=Q.useContext(by);return t||Ae(!1),t}function yI(n){let t=Q.useContext(sI);return t||Ae(!1),t}function vI(n){let t=Q.useContext(Os);return t||Ae(!1),t}function uE(n){let t=vI(),e=t.matches[t.matches.length-1];return e.route.id||Ae(!1),e.route.id}function _I(){var n;let t=Q.useContext(rE),e=yI(),i=uE();return t!==void 0?t:(n=e.errors)==null?void 0:n[i]}function bI(){let{router:n}=pI(lE.UseNavigateStable),t=uE(cE.UseNavigateStable),e=Q.useRef(!1);return aE(()=>{e.current=!0}),Q.useCallback(function(r,o){o===void 0&&(o={}),e.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,hu({fromRouteId:t},o)))},[n,t])}const ex={};function xI(n,t,e){ex[n]||(ex[n]=!0)}function wI(n,t){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function TI(n){let{to:t,replace:e,state:i,relative:r}=n;yl()||Ae(!1);let{future:o,static:l}=Q.useContext(Br),{matches:u}=Q.useContext(Os),{pathname:d}=vl(),f=yf(),p=_y(t,vy(u,o.v7_relativeSplatPath),d,r==="path"),v=JSON.stringify(p);return Q.useEffect(()=>f(JSON.parse(v),{replace:e,state:i,relative:r}),[f,v,r,e,i]),null}function EI(n){return lI(n.context)}function Ra(n){Ae(!1)}function SI(n){let{basename:t="/",children:e=null,location:i,navigationType:r=Er.Pop,navigator:o,static:l=!1,future:u}=n;yl()&&Ae(!1);let d=t.replace(/^\/*/,"/"),f=Q.useMemo(()=>({basename:d,navigator:o,static:l,future:hu({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);typeof i=="string"&&(i=pl(i));let{pathname:p="/",search:v="",hash:x="",state:T=null,key:C="default"}=i,S=Q.useMemo(()=>{let A=yy(p,d);return A==null?null:{location:{pathname:A,search:v,hash:x,state:T,key:C},navigationType:r}},[d,p,v,x,T,C,r]);return S==null?null:Q.createElement(Br.Provider,{value:f},Q.createElement(pf.Provider,{children:e,value:S}))}function AI(n){let{children:t,location:e}=n;return cI(Ip(t),e)}new Promise(()=>{});function Ip(n,t){t===void 0&&(t=[]);let e=[];return Q.Children.forEach(n,(i,r)=>{if(!Q.isValidElement(i))return;let o=[...t,r];if(i.type===Q.Fragment){e.push.apply(e,Ip(i.props.children,o));return}i.type!==Ra&&Ae(!1),!i.props.index||!i.props.children||Ae(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Ip(i.props.children,o)),e.push(l)}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Np(){return Np=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Np.apply(this,arguments)}function CI(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function RI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function II(n,t){return n.button===0&&(!t||t==="_self")&&!RI(n)}const NI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DI="6";try{window.__reactRouterVersion=DI}catch{}const MI="startTransition",nx=SR[MI];function kI(n){let{basename:t,children:e,future:i,window:r}=n,o=Q.useRef();o.current==null&&(o.current=MR({window:r,v5Compat:!0}));let l=o.current,[u,d]=Q.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},p=Q.useCallback(v=>{f&&nx?nx(()=>d(v)):d(v)},[d,f]);return Q.useLayoutEffect(()=>l.listen(p),[l,p]),Q.useEffect(()=>wI(i),[i]),Q.createElement(SI,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l,future:i})}const OI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qo=Q.forwardRef(function(t,e){let{onClick:i,relative:r,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:v}=t,x=CI(t,NI),{basename:T}=Q.useContext(Br),C,S=!1;if(typeof f=="string"&&PI.test(f)&&(C=f,OI))try{let F=new URL(window.location.href),Y=f.startsWith("//")?new URL(F.protocol+f):new URL(f),X=yy(Y.pathname,T);Y.origin===F.origin&&X!=null?f=X+Y.search+Y.hash:S=!0}catch{}let A=rI(f,{relative:r}),L=jI(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:r,viewTransition:v});function G(F){i&&i(F),F.defaultPrevented||L(F)}return Q.createElement("a",Np({},x,{href:C||A,onClick:S||o?i:G,ref:e,target:d}))});var ix;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(ix||(ix={}));var sx;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sx||(sx={}));function jI(n,t){let{target:e,replace:i,state:r,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,d=yf(),f=vl(),p=oE(n,{relative:l});return Q.useCallback(v=>{if(II(v,e)){v.preventDefault();let x=i!==void 0?i:Fd(f)===Fd(p);d(n,{replace:x,state:r,preventScrollReset:o,relative:l,viewTransition:u})}},[f,d,p,i,r,e,n,o,l,u])}var rx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},LI=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],l=n[e++],u=n[e++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],l=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return t.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,u=l?n[r+1]:0,d=r+2<n.length,f=d?n[r+2]:0,p=o>>2,v=(o&3)<<4|u>>4;let x=(u&15)<<2|f>>6,T=f&63;d||(T=64,l||(x=64)),i.push(e[p],e[v],e[x],e[T])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(hE(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):LI(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],u=r<n.length?e[n.charAt(r)]:0;++r;const f=r<n.length?e[n.charAt(r)]:64;++r;const v=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||u==null||f==null||v==null)throw new VI;const x=o<<2|u>>4;if(i.push(x),f!==64){const T=u<<4&240|f>>2;if(i.push(T),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(n){const t=hE(n);return dE.encodeByteArray(t,!0)},Hd=function(n){return UI(n).replace(/\./g,"")},fE=function(n){try{return dE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=()=>zI().__FIREBASE_DEFAULTS__,FI=()=>{if(typeof process>"u"||typeof rx>"u")return;const n=rx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&fE(n[1]);return t&&JSON.parse(t)},vf=()=>{try{return BI()||FI()||HI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mE=n=>{var t,e;return(e=(t=vf())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},qI=n=>{const t=mE(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},gE=()=>{var n;return(n=vf())===null||n===void 0?void 0:n.config},pE=n=>{var t;return(t=vf())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hd(JSON.stringify(e)),Hd(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function WI(){var n;const t=(n=vf())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XI(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ZI(){return!WI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vE(){try{return typeof indexedDB=="object"}catch{return!1}}function _E(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}function JI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="FirebaseError";class _i extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=tN,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ga.prototype.create)}}class Ga{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],l=o?eN(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new _i(r,u,i)}}function eN(n,t){return n.replace(nN,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const nN=/\{\$([^}]+)}/g;function iN(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function il(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],l=t[r];if(ax(o)&&ax(l)){if(!il(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function ax(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Hc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function qc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function sN(n,t){const e=new rN(n,t);return e.subscribe.bind(e)}class rN{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");aN(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=ep),r.error===void 0&&(r.error=ep),r.complete===void 0&&(r.complete=ep);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aN(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=1e3,lN=2,cN=4*60*60*1e3,uN=.5;function ox(n,t=oN,e=lN){const i=t*Math.pow(e,n),r=Math.round(uN*i*(Math.random()-.5)*2);return Math.min(cN,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n){return n&&n._delegate?n._delegate:n}class pi{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new GI;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(fN(t))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=Ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ia){return this.instances.has(t)}getOptions(t=Ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&t(l,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dN(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ia){return this.component?this.component.multipleInstances?t:Ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dN(n){return n===Ia?void 0:n}function fN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new hN(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Lt||(Lt={}));const gN={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},pN=Lt.INFO,yN={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},vN=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=yN[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _f{constructor(t){this.name=t,this._logLevel=pN,this._logHandler=vN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}const _N=(n,t)=>t.some(e=>n instanceof e);let lx,cx;function bN(){return lx||(lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xN(){return cx||(cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bE=new WeakMap,Dp=new WeakMap,xE=new WeakMap,np=new WeakMap,xy=new WeakMap;function wN(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{e(Nr(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&bE.set(e,n)}).catch(()=>{}),xy.set(t,n),t}function TN(n){if(Dp.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{e(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Dp.set(n,t)}let Mp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Dp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||xE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Nr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function EN(n){Mp=n(Mp)}function SN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(ip(this),t,...e);return xE.set(i,t.sort?t.sort():[t]),Nr(i)}:xN().includes(n)?function(...t){return n.apply(ip(this),t),Nr(bE.get(this))}:function(...t){return Nr(n.apply(ip(this),t))}}function AN(n){return typeof n=="function"?SN(n):(n instanceof IDBTransaction&&TN(n),_N(n,bN())?new Proxy(n,Mp):n)}function Nr(n){if(n instanceof IDBRequest)return wN(n);if(np.has(n))return np.get(n);const t=AN(n);return t!==n&&(np.set(n,t),xy.set(t,n)),t}const ip=n=>xy.get(n);function wE(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,t),u=Nr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Nr(l.result),d.oldVersion,d.newVersion,Nr(l.transaction),d)}),e&&l.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const CN=["get","getKey","getAll","getAllKeys","count"],RN=["put","add","delete","clear"],sp=new Map;function ux(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(sp.get(t))return sp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=RN.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CN.includes(e)))return;const o=async function(l,...u){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[e](...u),r&&d.done]))[0]};return sp.set(t,o),o}EN(n=>({...n,get:(t,e,i)=>ux(t,e)||n.get(t,e,i),has:(t,e)=>!!ux(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(NN(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function NN(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kp="@firebase/app",hx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new _f("@firebase/app"),DN="@firebase/app-compat",MN="@firebase/analytics-compat",kN="@firebase/analytics",ON="@firebase/app-check-compat",PN="@firebase/app-check",jN="@firebase/auth",LN="@firebase/auth-compat",VN="@firebase/database",UN="@firebase/data-connect",zN="@firebase/database-compat",BN="@firebase/functions",FN="@firebase/functions-compat",HN="@firebase/installations",qN="@firebase/installations-compat",GN="@firebase/messaging",$N="@firebase/messaging-compat",QN="@firebase/performance",WN="@firebase/performance-compat",KN="@firebase/remote-config",YN="@firebase/remote-config-compat",XN="@firebase/storage",ZN="@firebase/storage-compat",JN="@firebase/firestore",t2="@firebase/vertexai-preview",e2="@firebase/firestore-compat",n2="firebase",i2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="[DEFAULT]",s2={[kp]:"fire-core",[DN]:"fire-core-compat",[kN]:"fire-analytics",[MN]:"fire-analytics-compat",[PN]:"fire-app-check",[ON]:"fire-app-check-compat",[jN]:"fire-auth",[LN]:"fire-auth-compat",[VN]:"fire-rtdb",[UN]:"fire-data-connect",[zN]:"fire-rtdb-compat",[BN]:"fire-fn",[FN]:"fire-fn-compat",[HN]:"fire-iid",[qN]:"fire-iid-compat",[GN]:"fire-fcm",[$N]:"fire-fcm-compat",[QN]:"fire-perf",[WN]:"fire-perf-compat",[KN]:"fire-rc",[YN]:"fire-rc-compat",[XN]:"fire-gcs",[ZN]:"fire-gcs-compat",[JN]:"fire-fst",[e2]:"fire-fst-compat",[t2]:"fire-vertex","fire-js":"fire-js",[n2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Map,r2=new Map,Pp=new Map;function dx(n,t){try{n.container.addComponent(t)}catch(e){Ns.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function qi(n){const t=n.name;if(Pp.has(t))return Ns.debug(`There were multiple attempts to register component ${t}.`),!1;Pp.set(t,n);for(const e of qd.values())dx(e,n);for(const e of r2.values())dx(e,n);return!0}function $a(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ui(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new Ga("app","Firebase",a2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=i2;function TE(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Op,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Dr.create("bad-app-name",{appName:String(r)});if(e||(e=gE()),!e)throw Dr.create("no-options");const o=qd.get(r);if(o){if(il(e,o.options)&&il(i,o.config))return o;throw Dr.create("duplicate-app",{appName:r})}const l=new mN(r);for(const d of Pp.values())l.addComponent(d);const u=new o2(e,i,l);return qd.set(r,u),u}function wy(n=Op){const t=qd.get(n);if(!t&&n===Op&&gE())return TE();if(!t)throw Dr.create("no-app",{appName:n});return t}function li(n,t,e){var i;let r=(i=s2[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const o=r.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const u=[`Unable to register library "${r}" with version "${t}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ns.warn(u.join(" "));return}qi(new pi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="firebase-heartbeat-database",c2=1,du="firebase-heartbeat-store";let rp=null;function EE(){return rp||(rp=wE(l2,c2,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(du)}catch(e){console.warn(e)}}}}).catch(n=>{throw Dr.create("idb-open",{originalErrorMessage:n.message})})),rp}async function u2(n){try{const e=(await EE()).transaction(du),i=await e.objectStore(du).get(SE(n));return await e.done,i}catch(t){if(t instanceof _i)Ns.warn(t.message);else{const e=Dr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ns.warn(e.message)}}}async function fx(n,t){try{const i=(await EE()).transaction(du,"readwrite");await i.objectStore(du).put(t,SE(n)),await i.done}catch(e){if(e instanceof _i)Ns.warn(e.message);else{const i=Dr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(i.message)}}}function SE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=1024,d2=30*24*60*60*1e3;class f2{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new g2(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=mx();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=d2}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ns.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mx(),{heartbeatsToSend:i,unsentEntries:r}=m2(this._heartbeatsCache.heartbeats),o=Hd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ns.warn(e),""}}}function mx(){return new Date().toISOString().substring(0,10)}function m2(n,t=h2){const e=[];let i=n.slice();for(const r of n){const o=e.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),gx(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),gx(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class g2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vE()?_E().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await u2(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return fx(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return fx(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function gx(n){return Hd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n){qi(new pi("platform-logger",t=>new IN(t),"PRIVATE")),qi(new pi("heartbeat",t=>new f2(t),"PRIVATE")),li(kp,hx,n),li(kp,hx,"esm2017"),li("fire-js","")}p2("");function Ty(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function AE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y2=AE,CE=new Ga("auth","Firebase",AE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new _f("@firebase/auth");function v2(n,...t){Gd.logLevel<=Lt.WARN&&Gd.warn(`Auth (${_l}): ${n}`,...t)}function Rd(n,...t){Gd.logLevel<=Lt.ERROR&&Gd.error(`Auth (${_l}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n,...t){throw Ey(n,...t)}function zi(n,...t){return Ey(n,...t)}function RE(n,t,e){const i=Object.assign(Object.assign({},y2()),{[t]:e});return new Ga("auth","Firebase",i).create(t,{appName:n.name})}function Rs(n){return RE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ey(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return CE.create(n,...t)}function Tt(n,t,...e){if(!n)throw Ey(t,...e)}function Ts(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Rd(t),new Error(t)}function Ds(n,t){n||Ts(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _2(){return px()==="http:"||px()==="https:"}function px(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_2()||yE()||"connection"in navigator)?navigator.onLine:!0}function x2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ds(e>t,"Short delay should be less than long delay!"),this.isMobile=QI()||YI()}get(){return b2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n,t){Ds(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Ru(3e4,6e4);function Fr(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Hr(n,t,e,i,r={}){return NE(n,r,async()=>{let o={},l={};i&&(t==="GET"?l=i:o={body:JSON.stringify(i)});const u=Cu(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:t,headers:d},o);return KI()||(f.referrerPolicy="no-referrer"),IE.fetch()(DE(n,n.config.apiHost,e,u),f)})}async function NE(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},w2),t);try{const r=new S2(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ld(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw ld(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw ld(n,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw RE(n,p,f);yi(n,p)}}catch(r){if(r instanceof _i)throw r;yi(n,"network-request-failed",{message:String(r)})}}async function Iu(n,t,e,i,r={}){const o=await Hr(n,t,e,i,r);return"mfaPendingCredential"in o&&yi(n,"multi-factor-auth-required",{_serverResponse:o}),o}function DE(n,t,e,i){const r=`${t}${e}?${i}`;return n.config.emulator?Sy(n.config,r):`${n.config.apiScheme}://${r}`}function E2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S2{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(zi(this.auth,"network-request-failed")),T2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ld(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=zi(n,t,i);return r.customData._tokenResponse=e,r}function yx(n){return n!==void 0&&n.enterprise!==void 0}class A2{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return E2(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function C2(n,t){return Hr(n,"GET","/v2/recaptchaConfig",Fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(n,t){return Hr(n,"POST","/v1/accounts:delete",t)}async function ME(n,t){return Hr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function I2(n,t=!1){const e=Oe(n),i=await e.getIdToken(t),r=Ay(i);Tt(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Jc(ap(r.auth_time)),issuedAtTime:Jc(ap(r.iat)),expirationTime:Jc(ap(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ap(n){return Number(n)*1e3}function Ay(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const r=fE(e);return r?JSON.parse(r):(Rd("Failed to decode base64 JWT payload"),null)}catch(r){return Rd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function vx(n){const t=Ay(n);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof _i&&N2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function N2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(n){var t;const e=n.auth,i=await n.getIdToken(),r=await fu(n,ME(e,{idToken:i}));Tt(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const l=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?kE(o.providerUserInfo):[],u=k2(n.providerData,l),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),p=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function M2(n){const t=Oe(n);await $d(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function k2(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function kE(n){return n.map(t=>{var{providerId:e}=t,i=Ty(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(n,t){const e=await NE(n,{},async()=>{const i=Cu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=DE(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",IE.fetch()(l,{method:"POST",headers:u,body:i})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function P2(n,t){return Hr(n,"POST","/v2/accounts:revokeToken",Fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):vx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const e=vx(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await O2(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,l=new Xo;return i&&(Tt(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(Tt(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),o&&(Tt(typeof o=="number","internal-error",{appName:t}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(n,t){Tt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Es{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,o=Ty(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new D2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await fu(this,this.stsTokenManager.getToken(this.auth,t));return Tt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return I2(this,t)}reload(){return M2(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Es(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await $d(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ui(this.auth.app))return Promise.reject(Rs(this.auth));const t=await this.getIdToken();return await fu(this,R2(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,o,l,u,d,f,p;const v=(i=e.displayName)!==null&&i!==void 0?i:void 0,x=(r=e.email)!==null&&r!==void 0?r:void 0,T=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=e.photoURL)!==null&&l!==void 0?l:void 0,S=(u=e.tenantId)!==null&&u!==void 0?u:void 0,A=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,L=(f=e.createdAt)!==null&&f!==void 0?f:void 0,G=(p=e.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:F,emailVerified:Y,isAnonymous:X,providerData:Z,stsTokenManager:O}=e;Tt(F&&O,t,"internal-error");const N=Xo.fromJSON(this.name,O);Tt(typeof F=="string",t,"internal-error"),vr(v,t.name),vr(x,t.name),Tt(typeof Y=="boolean",t,"internal-error"),Tt(typeof X=="boolean",t,"internal-error"),vr(T,t.name),vr(C,t.name),vr(S,t.name),vr(A,t.name),vr(L,t.name),vr(G,t.name);const D=new Es({uid:F,auth:t,email:x,emailVerified:Y,displayName:v,isAnonymous:X,photoURL:C,phoneNumber:T,tenantId:S,stsTokenManager:N,createdAt:L,lastLoginAt:G});return Z&&Array.isArray(Z)&&(D.providerData=Z.map(k=>Object.assign({},k))),A&&(D._redirectEventId=A),D}static async _fromIdTokenResponse(t,e,i=!1){const r=new Xo;r.updateFromServerResponse(e);const o=new Es({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await $d(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];Tt(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?kE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Xo;u.updateFromIdToken(i);const d=new Es({uid:r.localId,auth:t,stsTokenManager:u,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Lp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Map;function Ss(n){Ds(n instanceof Function,"Expected a class definition");let t=_x.get(n);return t?(Ds(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,_x.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}OE.type="NONE";const bx=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n,t,e){return`firebase:${n}:${t}:${e}`}class Zo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Id(this.userKey,r.apiKey,o),this.fullPersistenceKey=Id("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Es._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Zo(Ss(bx),t,i);const r=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Ss(bx);const l=Id(i,t.config.apiKey,t.name);let u=null;for(const f of e)try{const p=await f._get(l);if(p){const v=Es._fromJSON(t,p);f!==o&&(u=v),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Zo(o,t,i):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(e.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Zo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zE(t))return"Blackberry";if(BE(t))return"Webos";if(jE(t))return"Safari";if((t.includes("chrome/")||LE(t))&&!t.includes("edge/"))return"Chrome";if(UE(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function PE(n=mn()){return/firefox\//i.test(n)}function jE(n=mn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function LE(n=mn()){return/crios\//i.test(n)}function VE(n=mn()){return/iemobile/i.test(n)}function UE(n=mn()){return/android/i.test(n)}function zE(n=mn()){return/blackberry/i.test(n)}function BE(n=mn()){return/webos/i.test(n)}function Cy(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function j2(n=mn()){var t;return Cy(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function L2(){return XI()&&document.documentMode===10}function FE(n=mn()){return Cy(n)||UE(n)||BE(n)||zE(n)||/windows phone/i.test(n)||VE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n,t=[]){let e;switch(n){case"Browser":e=xx(mn());break;case"Worker":e=`${xx(mn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${_l}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((l,u)=>{try{const d=t(o);l(d)}catch(d){u(d)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(n,t={}){return Hr(n,"GET","/v2/passwordPolicy",Fr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=6;class B2{constructor(t){var e,i,r,o;const l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=l.minPasswordLength)!==null&&e!==void 0?e:z2,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wx(this),this.idTokenSubscription=new wx(this),this.beforeStateQueue=new V2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ss(e)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await ME(this,{idToken:t}),i=await Es._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Ui(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,u=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(t);(!l||l===u)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await $d(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=x2()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ui(this.app))return Promise.reject(Rs(this));const e=t?Oe(t):null;return e&&Tt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ui(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ui(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await U2(this),e=new B2(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Ga("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await P2(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ss(t)||this._popupRedirectResolver;Tt(e,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Ss(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,r);return()=>{l=!0,d()}}else{const d=t.addObserver(e);return()=>{l=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=HE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&v2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qa(n){return Oe(n)}class wx{constructor(t){this.auth=t,this.observer=null,this.addObserver=sN(e=>this.observer=e)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H2(n){bf=n}function qE(n){return bf.loadJS(n)}function q2(){return bf.recaptchaEnterpriseScript}function G2(){return bf.gapiScript}function $2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Q2="recaptcha-enterprise",W2="NO_RECAPTCHA";class K2{constructor(t){this.type=Q2,this.auth=Qa(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{C2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new A2(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function r(o,l,u){const d=window.grecaptcha;yx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(f=>{l(f)}).catch(()=>{l(W2)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(u=>{if(!e&&yx(window.grecaptcha))r(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=q2();d.length!==0&&(d+=u),qE(d).then(()=>{r(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function Tx(n,t,e,i=!1){const r=new K2(n);let o;try{o=await r.verify(e)}catch{o=await r.verify(e,!0)}const l=Object.assign({},t);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Vp(n,t,e,i){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Tx(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Tx(n,t,e,e==="getOobCode");return i(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n,t){const e=$a(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(il(o,t??{}))return r;yi(r,"already-initialized")}return e.initialize({options:t})}function X2(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Ss);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function Z2(n,t,e){const i=Qa(n);Tt(i._canInitEmulator,i,"emulator-config-failed"),Tt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=GE(t),{host:l,port:u}=J2(t),d=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),tD()}function GE(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function J2(n){const t=GE(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Ex(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Ex(l)}}}function Ex(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function tD(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ts("not implemented")}_getIdTokenResponse(t){return Ts("not implemented")}_linkToIdToken(t,e){return Ts("not implemented")}_getReauthenticationResolver(t){return Ts("not implemented")}}async function eD(n,t){return Hr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(n,t){return Iu(n,"POST","/v1/accounts:signInWithPassword",Fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(n,t){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",Fr(n,t))}async function sD(n,t){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",Fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends Ry{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new mu(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new mu(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(t,e,"signInWithPassword",nD);case"emailLink":return iD(t,{email:this._email,oobCode:this._password});default:yi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(t,i,"signUpPassword",eD);case"emailLink":return sD(t,{idToken:e,email:this._email,oobCode:this._password});default:yi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n,t){return Iu(n,"POST","/v1/accounts:signInWithIdp",Fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="http://localhost";class La extends Ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new La(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):yi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,o=Ty(e,["providerId","signInMethod"]);if(!i||!r)return null;const l=new La(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return Jo(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Jo(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Jo(t,e)}buildRequest(){const t={requestUri:rD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Cu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oD(n){const t=Hc(qc(n)).link,e=t?Hc(qc(t)).deep_link_id:null,i=Hc(qc(n)).deep_link_id;return(i?Hc(qc(i)).link:null)||i||e||t||n}class Iy{constructor(t){var e,i,r,o,l,u;const d=Hc(qc(t)),f=(e=d.apiKey)!==null&&e!==void 0?e:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,v=aD((r=d.mode)!==null&&r!==void 0?r:null);Tt(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(t){const e=oD(t);try{return new Iy(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.providerId=bl.PROVIDER_ID}static credential(t,e){return mu._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Iy.parseLink(e);return Tt(i,"argument-error"),mu._fromEmailAndCode(t,i.code,i.tenantId)}}bl.PROVIDER_ID="password";bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends $E{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Nu{constructor(){super("facebook.com")}static credential(t){return La._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return br.credentialFromTaggedObject(t)}static credentialFromError(t){return br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return br.credential(t.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return La._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return xr.credential(e,i)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Nu{constructor(){super("github.com")}static credential(t){return La._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wr.credentialFromTaggedObject(t)}static credentialFromError(t){return wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wr.credential(t.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Nu{constructor(){super("twitter.com")}static credential(t,e){return La._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Tr.credential(e,i)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(n,t){return Iu(n,"POST","/v1/accounts:signUp",Fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await Es._fromIdTokenResponse(t,i,r),l=Sx(i);return new Va({user:o,providerId:l,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=Sx(i);return new Va({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function Sx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends _i{constructor(t,e,i,r){var o;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Qd.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new Qd(t,e,i,r)}}function QE(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qd._fromErrorAndOperation(n,o,t,i):o})}async function cD(n,t,e=!1){const i=await fu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Va._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(n,t,e=!1){const{auth:i}=n;if(Ui(i.app))return Promise.reject(Rs(i));const r="reauthenticate";try{const o=await fu(n,QE(i,r,t,n),e);Tt(o.idToken,i,"internal-error");const l=Ay(o.idToken);Tt(l,i,"internal-error");const{sub:u}=l;return Tt(n.uid===u,i,"user-mismatch"),Va._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&yi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WE(n,t,e=!1){if(Ui(n.app))return Promise.reject(Rs(n));const i="signIn",r=await QE(n,i,t),o=await Va._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function hD(n,t){return WE(Qa(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(n){const t=Qa(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function dD(n,t,e){if(Ui(n.app))return Promise.reject(Rs(n));const i=Qa(n),l=await Vp(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lD).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&KE(n),d}),u=await Va._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function fD(n,t,e){return Ui(n.app)?Promise.reject(Rs(n)):hD(Oe(n),bl.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&KE(n),i})}function mD(n,t,e,i){return Oe(n).onIdTokenChanged(t,e,i)}function gD(n,t,e){return Oe(n).beforeAuthStateChanged(t,e)}function pD(n,t,e,i){return Oe(n).onAuthStateChanged(t,e,i)}const Wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,vD=10;class XE extends YE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!e&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);L2()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,vD):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}XE.type="LOCAL";const _D=XE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends YE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ZE.type="SESSION";const JE=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new xf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(l).map(async f=>f(e.origin,o)),d=await bD(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=Ny("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const x=v;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function wD(n){Bi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function TD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ED(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function SD(){return tS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firebaseLocalStorageDb",AD=1,Kd="firebaseLocalStorage",nS="fbase_key";class Du{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function wf(n,t){return n.transaction([Kd],t?"readwrite":"readonly").objectStore(Kd)}function CD(){const n=indexedDB.deleteDatabase(eS);return new Du(n).toPromise()}function Up(){const n=indexedDB.open(eS,AD);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Kd,{keyPath:nS})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Kd)?t(i):(i.close(),await CD(),t(await Up()))})})}async function Ax(n,t,e){const i=wf(n,!0).put({[nS]:t,value:e});return new Du(i).toPromise()}async function RD(n,t){const e=wf(n,!1).get(t),i=await new Du(e).toPromise();return i===void 0?null:i.value}function Cx(n,t){const e=wf(n,!0).delete(t);return new Du(e).toPromise()}const ID=800,ND=3;class iS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>ND)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xf._getInstance(SD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await TD(),!this.activeServiceWorker)return;this.sender=new xD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ED()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Up();return await Ax(t,Wd,"1"),await Cx(t,Wd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ax(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>RD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Cx(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=wf(r,!1).getAll();return new Du(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iS.type="LOCAL";const DD=iS;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(n,t){return t?Ss(t):(Tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends Ry{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Jo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Jo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Jo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function kD(n){return WE(n.auth,new Dy(n),n.bypassAuthState)}function OD(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),uD(e,new Dy(n),n.bypassAuthState)}async function PD(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),cD(e,new Dy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:l,type:u}=t;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return kD;case"linkViaPopup":case"linkViaRedirect":return PD;case"reauthViaPopup":case"reauthViaRedirect":return OD;default:yi(this.auth,"internal-error")}}resolve(t){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new Ru(2e3,1e4);class Wo extends sS{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const t=Ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jD.get())};t()}}Wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="pendingRedirect",Nd=new Map;class VD extends sS{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Nd.get(this.auth._key());if(!t){try{const i=await UD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Nd.set(this.auth._key(),t)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UD(n,t){const e=FD(t),i=BD(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function zD(n,t){Nd.set(n._key(),t)}function BD(n){return Ss(n._redirectPersistence)}function FD(n){return Id(LD,n.config.apiKey,n.name)}async function HD(n,t,e=!1){if(Ui(n.app))return Promise.reject(Rs(n));const i=Qa(n),r=MD(i,t),l=await new VD(i,r,e).execute();return l&&!e&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=10*60*1e3;class GD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$D(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!rS(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(zi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rx(t))}saveEventToCache(t){this.cachedEventUids.add(Rx(t)),this.lastProcessedEventTime=Date.now()}}function Rx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function rS({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function $D(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(n,t={}){return Hr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KD=/^https?/;async function YD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await QD(n);for(const e of t)try{if(XD(e))return}catch{}yi(n,"unauthorized-domain")}function XD(n){const t=jp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===i}if(!KD.test(e))return!1;if(WD.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new Ru(3e4,6e4);function Ix(){const n=Bi().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function JD(n){return new Promise((t,e)=>{var i,r,o;function l(){Ix(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ix(),e(zi(n,"network-request-failed"))},timeout:ZD.get()})}if(!((r=(i=Bi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((o=Bi().gapi)===null||o===void 0)&&o.load)l();else{const u=$2("iframefcb");return Bi()[u]=()=>{gapi.load?l():e(zi(n,"network-request-failed"))},qE(`${G2()}?onload=${u}`).catch(d=>e(d))}}).catch(t=>{throw Dd=null,t})}let Dd=null;function tM(n){return Dd=Dd||JD(n),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new Ru(5e3,15e3),nM="__/auth/iframe",iM="emulator/auth/iframe",sM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aM(n){const t=n.config;Tt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Sy(t,iM):`https://${n.config.authDomain}/${nM}`,i={apiKey:t.apiKey,appName:n.name,v:_l},r=rM.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Cu(i).slice(1)}`}async function oM(n){const t=await tM(n),e=Bi().gapi;return Tt(e,n,"internal-error"),t.open({where:document.body,url:aM(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=zi(n,"network-request-failed"),u=Bi().setTimeout(()=>{o(l)},eM.get());function d(){Bi().clearTimeout(u),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cM=500,uM=600,hM="_blank",dM="http://localhost";class Nx{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fM(n,t,e,i=cM,r=uM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d=Object.assign(Object.assign({},lM),{width:i.toString(),height:r.toString(),top:o,left:l}),f=mn().toLowerCase();e&&(u=LE(f)?hM:e),PE(f)&&(t=t||dM,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[T,C])=>`${x}${T}=${C},`,"");if(j2(f)&&u!=="_self")return mM(t||"",u),new Nx(null);const v=window.open(t||"",u,p);Tt(v,n,"popup-blocked");try{v.focus()}catch{}return new Nx(v)}function mM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="__/auth/handler",pM="emulator/auth/handler",yM=encodeURIComponent("fac");async function Dx(n,t,e,i,r,o){Tt(n.config.authDomain,n,"auth-domain-config-required"),Tt(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:_l,eventId:r};if(t instanceof $E){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",iN(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(t instanceof Nu){const p=t.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await n._getAppCheckToken(),f=d?`#${yM}=${encodeURIComponent(d)}`:"";return`${vM(n)}?${Cu(u).slice(1)}${f}`}function vM({config:n}){return n.emulator?Sy(n,pM):`https://${n.authDomain}/${gM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class _M{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JE,this._completeRedirectFn=HD,this._overrideRedirectResult=zD}async _openPopup(t,e,i,r){var o;Ds((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Dx(t,e,i,jp(),r);return fM(t,l,Ny())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await Dx(t,e,i,jp(),r);return wD(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(Ds(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await oM(t),i=new GD(t);return e.register("authEvent",r=>(Tt(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(op,{type:op},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[op];l!==void 0&&e(!!l),yi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=YD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return FE()||jE()||Cy()}}const bM=_M;var Mx="@firebase/auth",kx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TM(n){qi(new pi("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;Tt(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HE(n)},f=new F2(i,r,o,d);return X2(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),qi(new pi("auth-internal",t=>{const e=Qa(t.getProvider("auth").getImmediate());return(i=>new xM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(Mx,kx,wM(n)),li(Mx,kx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=5*60,SM=pE("authIdTokenMaxAge")||EM;let Ox=null;const AM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>SM)return;const r=e==null?void 0:e.token;Ox!==r&&(Ox=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function CM(n=wy()){const t=$a(n,"auth");if(t.isInitialized())return t.getImmediate();const e=Y2(n,{popupRedirectResolver:bM,persistence:[DD,_D,JE]}),i=pE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=AM(o.toString());gD(e,l,()=>l(e.currentUser)),mD(e,u=>l(u))}}const r=mE("auth");return r&&Z2(e,`http://${r}`),e}function RM(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}H2({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=zi("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",RM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TM("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function IM(n,t,e,i){function r(o){return o instanceof e?o:new e(function(l){l(o)})}return new(e||(e=Promise))(function(o,l){function u(p){try{f(i.next(p))}catch(v){l(v)}}function d(p){try{f(i.throw(p))}catch(v){l(v)}}function f(p){p.done?o(p.value):r(p.value).then(u,d)}f((i=i.apply(n,[])).next())})}function NM(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(p){return d([f,p])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){e.label=f[1];break}if(f[0]===6&&e.label<o[1]){e.label=o[1],o=f;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(f);break}o[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(p){f=[6,p],r=0}finally{i=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ko=function(){return Ko=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ko.apply(this,arguments)},aS=function(n){return{loading:n==null,value:n}},DM=function(){return function(n,t){switch(t.type){case"error":return Ko(Ko({},n),{error:t.error,loading:!1,value:void 0});case"reset":return aS(t.defaultValue);case"value":return Ko(Ko({},n),{error:void 0,loading:!1,value:t.value});default:return n}}},MM=function(n){var t=n?n():void 0,e=Q.useReducer(DM(),aS(t)),i=e[0],r=e[1],o=Q.useCallback(function(){var d=n?n():void 0;r({type:"reset",defaultValue:d})},[n]),l=Q.useCallback(function(d){r({type:"error",error:d})},[]),u=Q.useCallback(function(d){r({type:"value",value:d})},[]);return Q.useMemo(function(){return{error:i.error,loading:i.loading,reset:o,setError:l,setValue:u,value:i.value}},[i.error,i.loading,o,l,u,i.value])},Mu=function(n,t){var e=MM(function(){return n.currentUser}),i=e.error,r=e.loading,o=e.setError,l=e.setValue,u=e.value;return Q.useEffect(function(){var d=pD(n,function(f){return IM(void 0,void 0,void 0,function(){var p;return NM(this,function(v){switch(v.label){case 0:return[3,4];case 1:return v.trys.push([1,3,,4]),[4,t.onUserChanged(f)];case 2:return v.sent(),[3,4];case 3:return p=v.sent(),o(p),[3,4];case 4:return l(f),[2]}})})},o);return function(){d()}},[n]),[u,r,i]},kM="firebase",OM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(kM,OM,"app");var Px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pa,oS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,N){function D(){}D.prototype=N.prototype,O.D=N.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(k,j,U){for(var M=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)M[ft-2]=arguments[ft];return N.prototype[j].apply(k,M)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(O,N,D){D||(D=0);var k=Array(16);if(typeof N=="string")for(var j=0;16>j;++j)k[j]=N.charCodeAt(D++)|N.charCodeAt(D++)<<8|N.charCodeAt(D++)<<16|N.charCodeAt(D++)<<24;else for(j=0;16>j;++j)k[j]=N[D++]|N[D++]<<8|N[D++]<<16|N[D++]<<24;N=O.g[0],D=O.g[1],j=O.g[2];var U=O.g[3],M=N+(U^D&(j^U))+k[0]+3614090360&4294967295;N=D+(M<<7&4294967295|M>>>25),M=U+(j^N&(D^j))+k[1]+3905402710&4294967295,U=N+(M<<12&4294967295|M>>>20),M=j+(D^U&(N^D))+k[2]+606105819&4294967295,j=U+(M<<17&4294967295|M>>>15),M=D+(N^j&(U^N))+k[3]+3250441966&4294967295,D=j+(M<<22&4294967295|M>>>10),M=N+(U^D&(j^U))+k[4]+4118548399&4294967295,N=D+(M<<7&4294967295|M>>>25),M=U+(j^N&(D^j))+k[5]+1200080426&4294967295,U=N+(M<<12&4294967295|M>>>20),M=j+(D^U&(N^D))+k[6]+2821735955&4294967295,j=U+(M<<17&4294967295|M>>>15),M=D+(N^j&(U^N))+k[7]+4249261313&4294967295,D=j+(M<<22&4294967295|M>>>10),M=N+(U^D&(j^U))+k[8]+1770035416&4294967295,N=D+(M<<7&4294967295|M>>>25),M=U+(j^N&(D^j))+k[9]+2336552879&4294967295,U=N+(M<<12&4294967295|M>>>20),M=j+(D^U&(N^D))+k[10]+4294925233&4294967295,j=U+(M<<17&4294967295|M>>>15),M=D+(N^j&(U^N))+k[11]+2304563134&4294967295,D=j+(M<<22&4294967295|M>>>10),M=N+(U^D&(j^U))+k[12]+1804603682&4294967295,N=D+(M<<7&4294967295|M>>>25),M=U+(j^N&(D^j))+k[13]+4254626195&4294967295,U=N+(M<<12&4294967295|M>>>20),M=j+(D^U&(N^D))+k[14]+2792965006&4294967295,j=U+(M<<17&4294967295|M>>>15),M=D+(N^j&(U^N))+k[15]+1236535329&4294967295,D=j+(M<<22&4294967295|M>>>10),M=N+(j^U&(D^j))+k[1]+4129170786&4294967295,N=D+(M<<5&4294967295|M>>>27),M=U+(D^j&(N^D))+k[6]+3225465664&4294967295,U=N+(M<<9&4294967295|M>>>23),M=j+(N^D&(U^N))+k[11]+643717713&4294967295,j=U+(M<<14&4294967295|M>>>18),M=D+(U^N&(j^U))+k[0]+3921069994&4294967295,D=j+(M<<20&4294967295|M>>>12),M=N+(j^U&(D^j))+k[5]+3593408605&4294967295,N=D+(M<<5&4294967295|M>>>27),M=U+(D^j&(N^D))+k[10]+38016083&4294967295,U=N+(M<<9&4294967295|M>>>23),M=j+(N^D&(U^N))+k[15]+3634488961&4294967295,j=U+(M<<14&4294967295|M>>>18),M=D+(U^N&(j^U))+k[4]+3889429448&4294967295,D=j+(M<<20&4294967295|M>>>12),M=N+(j^U&(D^j))+k[9]+568446438&4294967295,N=D+(M<<5&4294967295|M>>>27),M=U+(D^j&(N^D))+k[14]+3275163606&4294967295,U=N+(M<<9&4294967295|M>>>23),M=j+(N^D&(U^N))+k[3]+4107603335&4294967295,j=U+(M<<14&4294967295|M>>>18),M=D+(U^N&(j^U))+k[8]+1163531501&4294967295,D=j+(M<<20&4294967295|M>>>12),M=N+(j^U&(D^j))+k[13]+2850285829&4294967295,N=D+(M<<5&4294967295|M>>>27),M=U+(D^j&(N^D))+k[2]+4243563512&4294967295,U=N+(M<<9&4294967295|M>>>23),M=j+(N^D&(U^N))+k[7]+1735328473&4294967295,j=U+(M<<14&4294967295|M>>>18),M=D+(U^N&(j^U))+k[12]+2368359562&4294967295,D=j+(M<<20&4294967295|M>>>12),M=N+(D^j^U)+k[5]+4294588738&4294967295,N=D+(M<<4&4294967295|M>>>28),M=U+(N^D^j)+k[8]+2272392833&4294967295,U=N+(M<<11&4294967295|M>>>21),M=j+(U^N^D)+k[11]+1839030562&4294967295,j=U+(M<<16&4294967295|M>>>16),M=D+(j^U^N)+k[14]+4259657740&4294967295,D=j+(M<<23&4294967295|M>>>9),M=N+(D^j^U)+k[1]+2763975236&4294967295,N=D+(M<<4&4294967295|M>>>28),M=U+(N^D^j)+k[4]+1272893353&4294967295,U=N+(M<<11&4294967295|M>>>21),M=j+(U^N^D)+k[7]+4139469664&4294967295,j=U+(M<<16&4294967295|M>>>16),M=D+(j^U^N)+k[10]+3200236656&4294967295,D=j+(M<<23&4294967295|M>>>9),M=N+(D^j^U)+k[13]+681279174&4294967295,N=D+(M<<4&4294967295|M>>>28),M=U+(N^D^j)+k[0]+3936430074&4294967295,U=N+(M<<11&4294967295|M>>>21),M=j+(U^N^D)+k[3]+3572445317&4294967295,j=U+(M<<16&4294967295|M>>>16),M=D+(j^U^N)+k[6]+76029189&4294967295,D=j+(M<<23&4294967295|M>>>9),M=N+(D^j^U)+k[9]+3654602809&4294967295,N=D+(M<<4&4294967295|M>>>28),M=U+(N^D^j)+k[12]+3873151461&4294967295,U=N+(M<<11&4294967295|M>>>21),M=j+(U^N^D)+k[15]+530742520&4294967295,j=U+(M<<16&4294967295|M>>>16),M=D+(j^U^N)+k[2]+3299628645&4294967295,D=j+(M<<23&4294967295|M>>>9),M=N+(j^(D|~U))+k[0]+4096336452&4294967295,N=D+(M<<6&4294967295|M>>>26),M=U+(D^(N|~j))+k[7]+1126891415&4294967295,U=N+(M<<10&4294967295|M>>>22),M=j+(N^(U|~D))+k[14]+2878612391&4294967295,j=U+(M<<15&4294967295|M>>>17),M=D+(U^(j|~N))+k[5]+4237533241&4294967295,D=j+(M<<21&4294967295|M>>>11),M=N+(j^(D|~U))+k[12]+1700485571&4294967295,N=D+(M<<6&4294967295|M>>>26),M=U+(D^(N|~j))+k[3]+2399980690&4294967295,U=N+(M<<10&4294967295|M>>>22),M=j+(N^(U|~D))+k[10]+4293915773&4294967295,j=U+(M<<15&4294967295|M>>>17),M=D+(U^(j|~N))+k[1]+2240044497&4294967295,D=j+(M<<21&4294967295|M>>>11),M=N+(j^(D|~U))+k[8]+1873313359&4294967295,N=D+(M<<6&4294967295|M>>>26),M=U+(D^(N|~j))+k[15]+4264355552&4294967295,U=N+(M<<10&4294967295|M>>>22),M=j+(N^(U|~D))+k[6]+2734768916&4294967295,j=U+(M<<15&4294967295|M>>>17),M=D+(U^(j|~N))+k[13]+1309151649&4294967295,D=j+(M<<21&4294967295|M>>>11),M=N+(j^(D|~U))+k[4]+4149444226&4294967295,N=D+(M<<6&4294967295|M>>>26),M=U+(D^(N|~j))+k[11]+3174756917&4294967295,U=N+(M<<10&4294967295|M>>>22),M=j+(N^(U|~D))+k[2]+718787259&4294967295,j=U+(M<<15&4294967295|M>>>17),M=D+(U^(j|~N))+k[9]+3951481745&4294967295,O.g[0]=O.g[0]+N&4294967295,O.g[1]=O.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,O.g[2]=O.g[2]+j&4294967295,O.g[3]=O.g[3]+U&4294967295}i.prototype.u=function(O,N){N===void 0&&(N=O.length);for(var D=N-this.blockSize,k=this.B,j=this.h,U=0;U<N;){if(j==0)for(;U<=D;)r(this,O,U),U+=this.blockSize;if(typeof O=="string"){for(;U<N;)if(k[j++]=O.charCodeAt(U++),j==this.blockSize){r(this,k),j=0;break}}else for(;U<N;)if(k[j++]=O[U++],j==this.blockSize){r(this,k),j=0;break}}this.h=j,this.o+=N},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var N=1;N<O.length-8;++N)O[N]=0;var D=8*this.o;for(N=O.length-8;N<O.length;++N)O[N]=D&255,D/=256;for(this.u(O),O=Array(16),N=D=0;4>N;++N)for(var k=0;32>k;k+=8)O[D++]=this.g[N]>>>k&255;return O};function o(O,N){var D=u;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=N(O)}function l(O,N){this.h=N;for(var D=[],k=!0,j=O.length-1;0<=j;j--){var U=O[j]|0;k&&U==N||(D[j]=U,k=!1)}this.g=D}var u={};function d(O){return-128<=O&&128>O?o(O,function(N){return new l([N|0],0>N?-1:0)}):new l([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return A(f(-O));for(var N=[],D=1,k=0;O>=D;k++)N[k]=O/D|0,D*=4294967296;return new l(N,0)}function p(O,N){if(O.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O.charAt(0)=="-")return A(p(O.substring(1),N));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(N,8)),k=v,j=0;j<O.length;j+=8){var U=Math.min(8,O.length-j),M=parseInt(O.substring(j,j+U),N);8>U?(U=f(Math.pow(N,U)),k=k.j(U).add(f(M))):(k=k.j(D),k=k.add(f(M)))}return k}var v=d(0),x=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(S(this))return-A(this).m();for(var O=0,N=1,D=0;D<this.g.length;D++){var k=this.i(D);O+=(0<=k?k:4294967296+k)*N,N*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(S(this))return"-"+A(this).toString(O);for(var N=f(Math.pow(O,6)),D=this,k="";;){var j=Y(D,N).g;D=L(D,j.j(N));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=j,C(D))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var N=0;N<O.g.length;N++)if(O.g[N]!=0)return!1;return!0}function S(O){return O.h==-1}n.l=function(O){return O=L(this,O),S(O)?-1:C(O)?0:1};function A(O){for(var N=O.g.length,D=[],k=0;k<N;k++)D[k]=~O.g[k];return new l(D,~O.h).add(x)}n.abs=function(){return S(this)?A(this):this},n.add=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0,j=0;j<=N;j++){var U=k+(this.i(j)&65535)+(O.i(j)&65535),M=(U>>>16)+(this.i(j)>>>16)+(O.i(j)>>>16);k=M>>>16,U&=65535,M&=65535,D[j]=M<<16|U}return new l(D,D[D.length-1]&-2147483648?-1:0)};function L(O,N){return O.add(A(N))}n.j=function(O){if(C(this)||C(O))return v;if(S(this))return S(O)?A(this).j(A(O)):A(A(this).j(O));if(S(O))return A(this.j(A(O)));if(0>this.l(T)&&0>O.l(T))return f(this.m()*O.m());for(var N=this.g.length+O.g.length,D=[],k=0;k<2*N;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var j=0;j<O.g.length;j++){var U=this.i(k)>>>16,M=this.i(k)&65535,ft=O.i(j)>>>16,gt=O.i(j)&65535;D[2*k+2*j]+=M*gt,G(D,2*k+2*j),D[2*k+2*j+1]+=U*gt,G(D,2*k+2*j+1),D[2*k+2*j+1]+=M*ft,G(D,2*k+2*j+1),D[2*k+2*j+2]+=U*ft,G(D,2*k+2*j+2)}for(k=0;k<N;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=N;k<2*N;k++)D[k]=0;return new l(D,0)};function G(O,N){for(;(O[N]&65535)!=O[N];)O[N+1]+=O[N]>>>16,O[N]&=65535,N++}function F(O,N){this.g=O,this.h=N}function Y(O,N){if(C(N))throw Error("division by zero");if(C(O))return new F(v,v);if(S(O))return N=Y(A(O),N),new F(A(N.g),A(N.h));if(S(N))return N=Y(O,A(N)),new F(A(N.g),N.h);if(30<O.g.length){if(S(O)||S(N))throw Error("slowDivide_ only works with positive integers.");for(var D=x,k=N;0>=k.l(O);)D=X(D),k=X(k);var j=Z(D,1),U=Z(k,1);for(k=Z(k,2),D=Z(D,2);!C(k);){var M=U.add(k);0>=M.l(O)&&(j=j.add(D),U=M),k=Z(k,1),D=Z(D,1)}return N=L(O,j.j(N)),new F(j,N)}for(j=v;0<=O.l(N);){for(D=Math.max(1,Math.floor(O.m()/N.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=f(D),M=U.j(N);S(M)||0<M.l(O);)D-=k,U=f(D),M=U.j(N);C(U)&&(U=x),j=j.add(U),O=L(O,M)}return new F(j,O)}n.A=function(O){return Y(this,O).h},n.and=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0;k<N;k++)D[k]=this.i(k)&O.i(k);return new l(D,this.h&O.h)},n.or=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0;k<N;k++)D[k]=this.i(k)|O.i(k);return new l(D,this.h|O.h)},n.xor=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0;k<N;k++)D[k]=this.i(k)^O.i(k);return new l(D,this.h^O.h)};function X(O){for(var N=O.g.length+1,D=[],k=0;k<N;k++)D[k]=O.i(k)<<1|O.i(k-1)>>>31;return new l(D,O.h)}function Z(O,N){var D=N>>5;N%=32;for(var k=O.g.length-D,j=[],U=0;U<k;U++)j[U]=0<N?O.i(U+D)>>>N|O.i(U+D+1)<<32-N:O.i(U+D);return new l(j,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oS=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Pa=l}).apply(typeof Px<"u"?Px:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lS,Gc,cS,Md,zp,uS,hS,dS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,w){return m==Array.prototype||m==Object.prototype||(m[b]=w.value),m};function e(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=e(this);function r(m,b){if(b)t:{var w=i;m=m.split(".");for(var I=0;I<m.length-1;I++){var q=m[I];if(!(q in w))break t;w=w[q]}m=m[m.length-1],I=w[m],b=b(I),b!=I&&b!=null&&t(w,m,{configurable:!0,writable:!0,value:b})}}function o(m,b){m instanceof String&&(m+="");var w=0,I=!1,q={next:function(){if(!I&&w<m.length){var K=w++;return{value:b(K,m[K]),done:!1}}return I=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}r("Array.prototype.values",function(m){return m||function(){return o(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function f(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,w){return m.call.apply(m.bind,arguments)}function v(m,b,w){if(!m)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,I),m.apply(b,q)}}return function(){return m.apply(b,arguments)}}function x(m,b,w){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,x.apply(null,arguments)}function T(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),m.apply(this,I)}}function C(m,b){function w(){}w.prototype=b.prototype,m.aa=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(I,q,K){for(var ot=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)ot[Ut-2]=arguments[Ut];return b.prototype[q].apply(I,ot)}}function S(m){const b=m.length;if(0<b){const w=Array(b);for(let I=0;I<b;I++)w[I]=m[I];return w}return[]}function A(m,b){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(d(I)){const q=m.length||0,K=I.length||0;m.length=q+K;for(let ot=0;ot<K;ot++)m[q+ot]=I[ot]}else m.push(I)}}class L{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function G(m){return/^[\s\xa0]*$/.test(m)}function F(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function Y(m){return Y[" "](m),m}Y[" "]=function(){};var X=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(m,b,w){for(const I in m)b.call(w,m[I],I,m)}function O(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function N(m){const b={};for(const w in m)b[w]=m[w];return b}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,b){let w,I;for(let q=1;q<arguments.length;q++){I=arguments[q];for(w in I)m[w]=I[w];for(let K=0;K<D.length;K++)w=D[K],Object.prototype.hasOwnProperty.call(I,w)&&(m[w]=I[w])}}function j(m){var b=1;m=m.split(":");const w=[];for(;0<b&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function U(m){u.setTimeout(()=>{throw m},0)}function M(){var m=Pt;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class ft{constructor(){this.h=this.g=null}add(b,w){const I=gt.get();I.set(b,w),this.h?this.h.next=I:this.g=I,this.h=I}}var gt=new L(()=>new tt,m=>m.reset());class tt{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,yt=!1,Pt=new ft,V=()=>{const m=u.Promise.resolve(void 0);ut=()=>{m.then(rt)}};var rt=()=>{for(var m;m=M();){try{m.h.call(m.g)}catch(w){U(w)}var b=gt;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}yt=!1};function dt(){this.s=this.s,this.C=this.C}dt.prototype.s=!1,dt.prototype.ma=function(){this.s||(this.s=!0,this.N())},dt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,b),u.removeEventListener("test",w,b)}catch{}return m}();function Et(m,b){if(ct.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,I=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(X){t:{try{Y(b.nodeName);var q=!0;break t}catch{}q=!1}q||(b=null)}}else w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement);this.relatedTarget=b,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:wt[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Et.aa.h.call(this)}}C(Et,ct);var wt={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function ge(m,b,w,I,q){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!I,this.ha=q,this.key=++Gt,this.da=this.fa=!1}function Jt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function pn(m){this.src=m,this.g={},this.h=0}pn.prototype.add=function(m,b,w,I,q){var K=m.toString();m=this.g[K],m||(m=this.g[K]=[],this.h++);var ot=qn(m,b,I,q);return-1<ot?(b=m[ot],w||(b.fa=!1)):(b=new ge(b,this.src,K,!!I,q),b.fa=w,m.push(b)),b};function $i(m,b){var w=b.type;if(w in m.g){var I=m.g[w],q=Array.prototype.indexOf.call(I,b,void 0),K;(K=0<=q)&&Array.prototype.splice.call(I,q,1),K&&(Jt(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function qn(m,b,w,I){for(var q=0;q<m.length;++q){var K=m[q];if(!K.da&&K.listener==b&&K.capture==!!w&&K.ha==I)return q}return-1}var Ps="closure_lm_"+(1e6*Math.random()|0),js={};function Qi(m,b,w,I,q){if(Array.isArray(b)){for(var K=0;K<b.length;K++)Qi(m,b[K],w,I,q);return null}return w=Bu(w),m&&m[Ce]?m.K(b,w,f(I)?!!I.capture:!1,q):Cl(m,b,w,!1,I,q)}function Cl(m,b,w,I,q,K){if(!b)throw Error("Invalid event type");var ot=f(q)?!!q.capture:!!q,Ut=Rl(m);if(Ut||(m[Ps]=Ut=new pn(m)),w=Ut.add(b,w,I,ot,K),w.proxy)return w;if(I=Xa(),w.proxy=I,I.src=m,I.listener=w,m.addEventListener)lt||(q=ot),q===void 0&&(q=!1),m.addEventListener(b.toString(),I,q);else if(m.attachEvent)m.attachEvent(Ja(b.toString()),I);else if(m.addListener&&m.removeListener)m.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Xa(){function m(w){return b.call(m.src,m.listener,w)}const b=Yf;return m}function Za(m,b,w,I,q){if(Array.isArray(b))for(var K=0;K<b.length;K++)Za(m,b[K],w,I,q);else I=f(I)?!!I.capture:!!I,w=Bu(w),m&&m[Ce]?(m=m.i,b=String(b).toString(),b in m.g&&(K=m.g[b],w=qn(K,w,I,q),-1<w&&(Jt(K[w]),Array.prototype.splice.call(K,w,1),K.length==0&&(delete m.g[b],m.h--)))):m&&(m=Rl(m))&&(b=m.g[b.toString()],m=-1,b&&(m=qn(b,w,I,q)),(w=-1<m?b[m]:null)&&Qr(w))}function Qr(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[Ce])$i(b.i,m);else{var w=m.type,I=m.proxy;b.removeEventListener?b.removeEventListener(w,I,m.capture):b.detachEvent?b.detachEvent(Ja(w),I):b.addListener&&b.removeListener&&b.removeListener(I),(w=Rl(b))?($i(w,m),w.h==0&&(w.src=null,b[Ps]=null)):Jt(m)}}}function Ja(m){return m in js?js[m]:js[m]="on"+m}function Yf(m,b){if(m.da)m=!0;else{b=new Et(b,this);var w=m.listener,I=m.ha||m.src;m.fa&&Qr(m),m=w.call(I,b)}return m}function Rl(m){return m=m[Ps],m instanceof pn?m:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bu(m){return typeof m=="function"?m:(m[Tn]||(m[Tn]=function(b){return m.handleEvent(b)}),m[Tn])}function Pe(){dt.call(this),this.i=new pn(this),this.M=this,this.F=null}C(Pe,dt),Pe.prototype[Ce]=!0,Pe.prototype.removeEventListener=function(m,b,w,I){Za(this,m,b,w,I)};function Be(m,b){var w,I=m.F;if(I)for(w=[];I;I=I.F)w.push(I);if(m=m.M,I=b.type||b,typeof b=="string")b=new ct(b,m);else if(b instanceof ct)b.target=b.target||m;else{var q=b;b=new ct(I,m),k(b,q)}if(q=!0,w)for(var K=w.length-1;0<=K;K--){var ot=b.g=w[K];q=Wi(ot,I,!0,b)&&q}if(ot=b.g=m,q=Wi(ot,I,!0,b)&&q,q=Wi(ot,I,!1,b)&&q,w)for(K=0;K<w.length;K++)ot=b.g=w[K],q=Wi(ot,I,!1,b)&&q}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var w=m.g[b],I=0;I<w.length;I++)Jt(w[I]);delete m.g[b],m.h--}}this.F=null},Pe.prototype.K=function(m,b,w,I){return this.i.add(String(m),b,!1,w,I)},Pe.prototype.L=function(m,b,w,I){return this.i.add(String(m),b,!0,w,I)};function Wi(m,b,w,I){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var q=!0,K=0;K<b.length;++K){var ot=b[K];if(ot&&!ot.da&&ot.capture==w){var Ut=ot.listener,Le=ot.ha||ot.src;ot.fa&&$i(m.i,ot),q=Ut.call(Le,I)!==!1&&q}}return q&&!I.defaultPrevented}function Fu(m,b,w){if(typeof m=="function")w&&(m=x(m,w));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(m,b||0)}function Il(m){m.g=Fu(()=>{m.g=null,m.i&&(m.i=!1,Il(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class Xf extends dt{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Il(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(m){dt.call(this),this.h=m,this.g={}}C(Wr,dt);var Ls=[];function on(m){Z(m.g,function(b,w){this.g.hasOwnProperty(w)&&Qr(b)},m),m.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),on(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nl=u.JSON.stringify,bi=u.JSON.parse,yn=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Dl(){}Dl.prototype.h=null;function Hu(m){return m.h||(m.h=m.i())}function qu(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vs(){ct.call(this,"d")}C(Vs,ct);function ci(){ct.call(this,"c")}C(ci,ct);var Gn={},Us=null;function to(){return Us=Us||new Pe}Gn.La="serverreachability";function Ml(m){ct.call(this,Gn.La,m)}C(Ml,ct);function zs(m){const b=to();Be(b,new Ml(b))}Gn.STAT_EVENT="statevent";function eo(m,b){ct.call(this,Gn.STAT_EVENT,m),this.stat=b}C(eo,ct);function Te(m){const b=to();Be(b,new eo(b,m))}Gn.Ma="timingevent";function Gu(m,b){ct.call(this,Gn.Ma,m),this.size=b}C(Gu,ct);function Bs(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function $u(m,b,w,I,q,K){m.info(function(){if(m.g)if(K)for(var ot="",Ut=K.split("&"),Le=0;Le<Ut.length;Le++){var zt=Ut[Le].split("=");if(1<zt.length){var qe=zt[0];zt=zt[1];var Ve=qe.split("_");ot=2<=Ve.length&&Ve[1]=="type"?ot+(qe+"="+zt+"&"):ot+(qe+"=redacted&")}}else ot=null;else ot=K;return"XMLHTTP REQ ("+I+") [attempt "+q+"]: "+b+`
`+w+`
`+ot})}function Qu(m,b,w,I,q,K,ot){m.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+q+"]: "+b+`
`+w+`
`+K+" "+ot})}function Hs(m,b,w,I){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Fe(m,w)+(I?" "+I:"")})}function wi(m,b){m.info(function(){return"TIMEOUT: "+b})}Fs.prototype.info=function(){};function Fe(m,b){if(!m.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var I=w[m];if(!(2>I.length)){var q=I[1];if(Array.isArray(q)&&!(1>q.length)){var K=q[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ot=1;ot<q.length;ot++)q[ot]=""}}}}return Nl(w)}catch{return b}}var je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ki={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kr;function no(){}C(no,Dl),no.prototype.g=function(){return new XMLHttpRequest},no.prototype.i=function(){return{}},Kr=new no;function Ti(m,b,w,I){this.j=m,this.i=b,this.l=w,this.R=I||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var qs={},Yr={};function ui(m,b,w){m.L=1,m.v=Jr(pe(b)),m.m=w,m.P=!0,Yi(m,null)}function Yi(m,b){m.F=Date.now(),he(m),m.A=pe(m.v);var w=m.A,I=m.R;Array.isArray(I)||(I=[String(I)]),Ji(w.i,"t",I),m.C=0,w=m.j.J,m.h=new kl,m.g=oh(m.j,w?b:null,!m.m),0<m.O&&(m.M=new Xf(x(m.Y,m,m.g),m.O)),b=m.U,w=m.g,I=m.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ls[0]=q.toString()),q=Ls);for(var K=0;K<q.length;K++){var ot=Qi(w,q[K],I||b.handleEvent,!1,b.h||b);if(!ot)break;b.g[ot.key]=ot}b=m.H?N(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),zs(),$u(m.i,m.u,m.A,m.l,m.R,m.m)}Ti.prototype.ca=function(m){m=m.target;const b=this.M;b&&Yn(m)==3?b.j():this.Y(m)},Ti.prototype.Y=function(m){try{if(m==this.g)t:{const Ve=Yn(this.g);var b=this.g.Ba();const is=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||Ju(this.g)))){this.J||Ve!=4||b==7||(b==8||0>=is?zs(3):zs(2)),io(this);var w=this.g.Z();this.X=w;e:if(Gs(this)){var I=Ju(this.g);m="";var q=I.length,K=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Nn(this);var ot="";break e}this.h.i=new u.TextDecoder}for(b=0;b<q;b++)this.h.h=!0,m+=this.h.i.decode(I[b],{stream:!(K&&b==q-1)});I.length=0,this.h.g+=m,this.C=0,ot=this.h.g}else ot=this.g.oa();if(this.o=w==200,Qu(this.i,this.u,this.A,this.l,this.R,Ve,w),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,Le=this.g;if((Ut=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ut)){var zt=Ut;break e}}zt=null}if(w=zt)Hs(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dn(this,w);else{this.o=!1,this.s=3,Te(12),En(this),Nn(this);break t}}if(this.P){w=!0;let Ye;for(;!this.J&&this.C<ot.length;)if(Ye=$s(this,ot),Ye==Yr){Ve==4&&(this.s=4,Te(14),w=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==qs){this.s=4,Te(15),Hs(this.i,this.l,ot,"[Invalid Chunk]"),w=!1;break}else Hs(this.i,this.l,Ye,null),Dn(this,Ye);if(Gs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||ot.length!=0||this.h.h||(this.s=1,Te(16),w=!1),this.o=this.o&&w,!w)Hs(this.i,this.l,ot,"[Invalid Chunked Response]"),En(this),Nn(this);else if(0<ot.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+ot.length),aa(qe),qe.M=!0,Te(11))}}else Hs(this.i,this.l,ot,null),Dn(this,ot);Ve==4&&En(this),this.o&&!this.J&&(Ve==4?sh(this.j,this):(this.o=!1,he(this)))}else im(this.g),w==400&&0<ot.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),En(this),Nn(this)}}}catch{}finally{}};function Gs(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function $s(m,b){var w=m.C,I=b.indexOf(`
`,w);return I==-1?Yr:(w=Number(b.substring(w,I)),isNaN(w)?qs:(I+=1,I+w>b.length?Yr:(b=b.slice(I,I+w),m.C=I+w,b)))}Ti.prototype.cancel=function(){this.J=!0,En(this)};function he(m){m.S=Date.now()+m.I,Ol(m,m.I)}function Ol(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Bs(x(m.ba,m),b)}function io(m){m.B&&(u.clearTimeout(m.B),m.B=null)}Ti.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(wi(this.i,this.A),this.L!=2&&(zs(),Te(17)),En(this),this.s=2,Nn(this)):Ol(this,this.S-m)};function Nn(m){m.j.G==0||m.J||sh(m.j,m)}function En(m){io(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,on(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function Dn(m,b){try{var w=m.j;if(w.G!=0&&(w.g==m||Qs(w.h,m))){if(!m.K&&Qs(w.h,m)&&w.G==3){try{var I=w.Da.g.parse(b)}catch{I=null}if(Array.isArray(I)&&I.length==3){var q=I;if(q[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)mo(w),ho(w);else break t;Gl(w),Te(18)}}else w.za=q[1],0<w.za-w.T&&37500>q[2]&&w.F&&w.v==0&&!w.C&&(w.C=Bs(x(w.Za,w),6e3));if(1>=Wu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ns(w,11)}else if((m.K||w.g==m)&&mo(w),!G(b))for(q=w.Da.g.parse(b),b=0;b<q.length;b++){let zt=q[b];if(w.T=zt[0],zt=zt[1],w.G==2)if(zt[0]=="c"){w.K=zt[1],w.ia=zt[2];const qe=zt[3];qe!=null&&(w.la=qe,w.j.info("VER="+w.la));const Ve=zt[4];Ve!=null&&(w.Aa=Ve,w.j.info("SVER="+w.Aa));const is=zt[5];is!=null&&typeof is=="number"&&0<is&&(I=1.5*is,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Ye=m.g;if(Ye){const Ni=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var K=I.h;K.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ws(K,K.h),K.h=null))}if(I.D){const Ql=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;Ql&&(I.ya=Ql,$t(I.I,I.D,Ql))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ot=m;if(I.qa=ah(I,I.J?I.ia:null,I.W),ot.K){$n(I.h,ot);var Ut=ot,Le=I.L;Le&&(Ut.I=Le),Ut.B&&(io(Ut),he(Ut)),I.g=ot}else nh(I);0<w.i.length&&fo(w)}else zt[0]!="stop"&&zt[0]!="close"||ns(w,7);else w.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?ns(w,7):Hl(w):zt[0]!="noop"&&w.l&&w.l.ta(zt),w.v=0)}}zs(4)}catch{}}var Zf=class{constructor(m,b){this.g=m,this.map=b}};function Pl(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Wu(m){return m.h?1:m.g?m.g.size:0}function Qs(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Ws(m,b){m.g?m.g.add(b):m.h=b}function $n(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Pl.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function vn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.D);return b}return S(m.i)}function Ku(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var b=[],w=m.length,I=0;I<w;I++)b.push(m[I]);return b}b=[],w=0;for(I in m)b[w++]=m[I];return b}function Jf(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var b=[];m=m.length;for(var w=0;w<m;w++)b.push(w);return b}b=[],w=0;for(const I in m)b[w++]=I;return b}}}function Xr(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var w=Jf(m),I=Ku(m),q=I.length,K=0;K<q;K++)b.call(void 0,I[K],w&&w[K],m)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function so(m,b){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var I=m[w].indexOf("="),q=null;if(0<=I){var K=m[w].substring(0,I);q=m[w].substring(I+1)}else K=m[w];b(K,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Xi(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Xi){this.h=m.h,Ks(this,m.j),this.o=m.o,this.g=m.g,Zr(this,m.s),this.l=m.l;var b=m.i,w=new Ei;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),ro(this,w),this.m=m.m}else m&&(b=String(m).match(Ll))?(this.h=!1,Ks(this,b[1]||"",!0),this.o=Ys(b[2]||""),this.g=Ys(b[3]||"",!0),Zr(this,b[4]),this.l=Ys(b[5]||"",!0),ro(this,b[6]||"",!0),this.m=Ys(b[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Xi.prototype.toString=function(){var m=[],b=this.j;b&&m.push(Qn(b,Vl,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Qn(b,Vl,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Qn(w,w.charAt(0)=="/"?Ul:Yu,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Qn(w,nm)),m.join("")};function pe(m){return new Xi(m)}function Ks(m,b,w){m.j=w?Ys(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Zr(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function ro(m,b,w){b instanceof Ei?(m.i=b,zl(m.i,m.h)):(w||(b=Qn(b,em)),m.i=new Ei(b,m.h))}function $t(m,b,w){m.i.set(b,w)}function Jr(m){return $t(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ys(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Qn(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,tm),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function tm(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Vl=/[#\/\?@]/g,Yu=/[#\?:]/g,Ul=/[#\?]/g,em=/[#\?@]/g,nm=/#/g;function Ei(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Wn(m){m.g||(m.g=new Map,m.h=0,m.i&&so(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=Ei.prototype,n.add=function(m,b){Wn(this),this.i=null,m=ts(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function ao(m,b){Wn(m),b=ts(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Zi(m,b){return Wn(m),b=ts(m,b),m.g.has(b)}n.forEach=function(m,b){Wn(this),this.g.forEach(function(w,I){w.forEach(function(q){m.call(b,q,I,this)},this)},this)},n.na=function(){Wn(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let I=0;I<b.length;I++){const q=m[I];for(let K=0;K<q.length;K++)w.push(b[I])}return w},n.V=function(m){Wn(this);let b=[];if(typeof m=="string")Zi(this,m)&&(b=b.concat(this.g.get(ts(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)b=b.concat(m[w])}return b},n.set=function(m,b){return Wn(this),this.i=null,m=ts(this,m),Zi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function Ji(m,b,w){ao(m,b),0<w.length&&(m.i=null,m.g.set(ts(m,b),S(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var I=b[w];const K=encodeURIComponent(String(I)),ot=this.V(I);for(I=0;I<ot.length;I++){var q=K;ot[I]!==""&&(q+="="+encodeURIComponent(String(ot[I]))),m.push(q)}}return this.i=m.join("&")};function ts(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function zl(m,b){b&&!m.j&&(Wn(m),m.i=null,m.g.forEach(function(w,I){var q=I.toLowerCase();I!=q&&(ao(this,I),Ji(this,q,w))},m)),m.j=b}function Xu(m,b){const w=new Fs;if(u.Image){const I=new Image;I.onload=T(Kn,w,"TestLoadImage: loaded",!0,b,I),I.onerror=T(Kn,w,"TestLoadImage: error",!1,b,I),I.onabort=T(Kn,w,"TestLoadImage: abort",!1,b,I),I.ontimeout=T(Kn,w,"TestLoadImage: timeout",!1,b,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=m}else b(!1)}function ta(m,b){const w=new Fs,I=new AbortController,q=setTimeout(()=>{I.abort(),Kn(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:I.signal}).then(K=>{clearTimeout(q),K.ok?Kn(w,"TestPingServer: ok",!0,b):Kn(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(q),Kn(w,"TestPingServer: error",!1,b)})}function Kn(m,b,w,I,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),I(w)}catch{}}function ea(){this.g=new yn}function Si(m,b,w){const I=w||"";try{Xr(m,function(q,K){let ot=q;f(q)&&(ot=Nl(q)),b.push(I+K+"="+encodeURIComponent(ot))})}catch(q){throw b.push(I+"type="+encodeURIComponent("_badmap")),q}}function Xs(m){this.l=m.Ub||null,this.j=m.eb||!1}C(Xs,Dl),Xs.prototype.g=function(){return new es(this.l,this.j)},Xs.prototype.i=function(m){return function(){return m}}({});function es(m,b){Pe.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(es,Pe),n=es.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,Ci(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bl(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bl(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Ai(this):Ci(this),this.readyState==3&&Bl(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Ai(this))},n.Qa=function(m){this.g&&(this.response=m,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ci(m)}n.setRequestHeader=function(m,b){this.u.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function Ci(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fl(m){let b="";return Z(m,function(w,I){b+=I,b+=":",b+=w,b+=`\r
`}),b}function He(m,b,w){t:{for(I in w){var I=!1;break t}I=!0}I||(w=Fl(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):$t(m,b,w))}function Xt(m){Pe.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Xt,Pe);var oo=/^https?$/i,na=["POST","PUT"];n=Xt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,b,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kr.g(),this.v=this.o?Hu(this.o):Hu(Kr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(K){Zu(this,K);return}if(m=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var q in I)w.set(q,I[q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const K of I.keys())w.set(K,I.get(K));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),q=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(na,b,void 0))||I||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ot]of w)this.g.setRequestHeader(K,ot);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(m),this.u=!1}catch(K){Zu(this,K)}};function Zu(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,lo(m),Ri(m)}function lo(m){m.A||(m.A=!0,Be(m,"complete"),Be(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Be(this,"complete"),Be(this,"abort"),Ri(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ri(this,!0)),Xt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?co(this):this.bb())},n.bb=function(){co(this)};function co(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Yn(m)!=4||m.Z()!=2)){if(m.u&&Yn(m)==4)Fu(m.Ea,0,m);else if(Be(m,"readystatechange"),Yn(m)==4){m.h=!1;try{const ot=m.Z();t:switch(ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var w;if(!(w=b)){var I;if(I=ot===0){var q=String(m.D).match(Ll)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),I=!oo.test(q?q.toLowerCase():"")}w=I}if(w)Be(m,"complete"),Be(m,"success");else{m.m=6;try{var K=2<Yn(m)?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.Z()+"]",lo(m)}}finally{Ri(m)}}}}function Ri(m,b){if(m.g){ia(m);const w=m.g,I=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||Be(m,"ready");try{w.onreadystatechange=I}catch{}}}function ia(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Yn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),bi(b)}};function Ju(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function im(m){const b={};m=(m.g&&2<=Yn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<m.length;I++){if(G(m[I]))continue;var w=j(m[I]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=b[q]||[];b[q]=K,K.push(w)}O(b,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function uo(m){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sa("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sa("baseRetryDelayMs",5e3,m),this.cb=sa("retryDelaySeedMs",1e4,m),this.Wa=sa("forwardChannelMaxRetries",2,m),this.wa=sa("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Pl(m&&m.concurrentRequestLimit),this.Da=new ea,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=uo.prototype,n.la=8,n.G=1,n.connect=function(m,b,w,I){Te(0),this.W=m,this.H=b||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=ah(this,null,this.W),fo(this)};function Hl(m){if(th(m),m.G==3){var b=m.U++,w=pe(m.I);if($t(w,"SID",m.K),$t(w,"RID",b),$t(w,"TYPE","terminate"),ra(m,w),b=new Ti(m,m.j,b),b.L=2,b.v=Jr(pe(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=b.v,w=!0),w||(b.g=oh(b.j,null),b.g.ea(b.v)),b.F=Date.now(),he(b)}rh(m)}function ho(m){m.g&&(aa(m),m.g.cancel(),m.g=null)}function th(m){ho(m),m.u&&(u.clearTimeout(m.u),m.u=null),mo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function fo(m){if(!jl(m.h)&&!m.s){m.s=!0;var b=m.Ga;ut||V(),yt||(ut(),yt=!0),Pt.add(b,m),m.B=0}}function sm(m,b){return Wu(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Bs(x(m.Ga,m,b),$l(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const q=new Ti(this,this.j,m);let K=this.o;if(this.S&&(K?(K=N(K),k(K,this.S)):K=this.S),this.m!==null||this.O||(q.H=K,K=null),this.P)t:{for(var b=0,w=0;w<this.i.length;w++){e:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(b+=I,4096<b){b=w;break t}if(b===4096||w===this.i.length-1){b=w+1;break t}}b=1e3}else b=1e3;b=eh(this,q,b),w=pe(this.I),$t(w,"RID",m),$t(w,"CVER",22),this.D&&$t(w,"X-HTTP-Session-Id",this.D),ra(this,w),K&&(this.O?b="headers="+encodeURIComponent(String(Fl(K)))+"&"+b:this.m&&He(w,this.m,K)),Ws(this.h,q),this.Ua&&$t(w,"TYPE","init"),this.P?($t(w,"$req",b),$t(w,"SID","null"),q.T=!0,ui(q,w,null)):ui(q,w,b),this.G=2}}else this.G==3&&(m?ql(this,m):this.i.length==0||jl(this.h)||ql(this))};function ql(m,b){var w;b?w=b.l:w=m.U++;const I=pe(m.I);$t(I,"SID",m.K),$t(I,"RID",w),$t(I,"AID",m.T),ra(m,I),m.m&&m.o&&He(I,m.m,m.o),w=new Ti(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),b&&(m.i=b.D.concat(m.i)),b=eh(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ws(m.h,w),ui(w,I,b)}function ra(m,b){m.H&&Z(m.H,function(w,I){$t(b,I,w)}),m.l&&Xr({},function(w,I){$t(b,I,w)})}function eh(m,b,w){w=Math.min(m.i.length,w);var I=m.l?x(m.l.Na,m.l,m):null;t:{var q=m.i;let K=-1;for(;;){const ot=["count="+w];K==-1?0<w?(K=q[0].g,ot.push("ofs="+K)):K=0:ot.push("ofs="+K);let Ut=!0;for(let Le=0;Le<w;Le++){let zt=q[Le].g;const qe=q[Le].map;if(zt-=K,0>zt)K=Math.max(0,q[Le].g-100),Ut=!1;else try{Si(qe,ot,"req"+zt+"_")}catch{I&&I(qe)}}if(Ut){I=ot.join("&");break t}}}return m=m.i.splice(0,w),b.D=m,I}function nh(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;ut||V(),yt||(ut(),yt=!0),Pt.add(b,m),m.v=0}}function Gl(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Bs(x(m.Fa,m),$l(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Bs(x(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),ho(this),ih(this))};function aa(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function ih(m){m.g=new Ti(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=pe(m.qa);$t(b,"RID","rpc"),$t(b,"SID",m.K),$t(b,"AID",m.T),$t(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&$t(b,"TO",m.ja),$t(b,"TYPE","xmlhttp"),ra(m,b),m.m&&m.o&&He(b,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Jr(pe(b)),w.m=null,w.P=!0,Yi(w,m)}n.Za=function(){this.C!=null&&(this.C=null,ho(this),Gl(this),Te(19))};function mo(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function sh(m,b){var w=null;if(m.g==b){mo(m),aa(m),m.g=null;var I=2}else if(Qs(m.h,b))w=b.D,$n(m.h,b),I=1;else return;if(m.G!=0){if(b.o)if(I==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var q=m.B;I=to(),Be(I,new Gu(I,w)),fo(m)}else nh(m);else if(q=b.s,q==3||q==0&&0<b.X||!(I==1&&sm(m,b)||I==2&&Gl(m)))switch(w&&0<w.length&&(b=m.h,b.i=b.i.concat(w)),q){case 1:ns(m,5);break;case 4:ns(m,10);break;case 3:ns(m,6);break;default:ns(m,2)}}}function $l(m,b){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*b}function ns(m,b){if(m.j.info("Error code "+b),b==2){var w=x(m.fb,m),I=m.Xa;const q=!I;I=new Xi(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ks(I,"https"),Jr(I),q?Xu(I.toString(),w):ta(I.toString(),w)}else Te(2);m.G=0,m.l&&m.l.sa(b),rh(m),th(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function rh(m){if(m.G=0,m.ka=[],m.l){const b=vn(m.h);(b.length!=0||m.i.length!=0)&&(A(m.ka,b),A(m.ka,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.ra()}}function ah(m,b,w){var I=w instanceof Xi?pe(w):new Xi(w);if(I.g!="")b&&(I.g=b+"."+I.g),Zr(I,I.s);else{var q=u.location;I=q.protocol,b=b?b+"."+q.hostname:q.hostname,q=+q.port;var K=new Xi(null);I&&Ks(K,I),b&&(K.g=b),q&&Zr(K,q),w&&(K.l=w),I=K}return w=m.D,b=m.ya,w&&b&&$t(I,w,b),$t(I,"VER",m.la),ra(m,I),I}function oh(m,b,w){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new Xt(new Xs({eb:w})):new Xt(m.pa),b.Ha(m.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lh(){}n=lh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function go(){}go.prototype.g=function(m,b){return new _n(m,b)};function _n(m,b){Pe.call(this),this.g=new uo(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!G(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!G(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Ii(this)}C(_n,Pe),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Hl(this.g)},_n.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=Nl(m),m=w);b.i.push(new Zf(b.Ya++,m)),b.G==3&&fo(b)},_n.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,_n.aa.N.call(this)};function ch(m){Vs.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){t:{for(const w in b){m=w;break t}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}C(ch,Vs);function uh(){ci.call(this),this.status=1}C(uh,ci);function Ii(m){this.g=m}C(Ii,lh),Ii.prototype.ua=function(){Be(this.g,"a")},Ii.prototype.ta=function(m){Be(this.g,new ch(m))},Ii.prototype.sa=function(m){Be(this.g,new uh)},Ii.prototype.ra=function(){Be(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,dS=function(){return new go},hS=function(){return to()},uS=Gn,zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Md=je,Ki.COMPLETE="complete",cS=Ki,qu.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Gc=qu,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,lS=Xt}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const jx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new _f("@firebase/firestore");function Oc(){return Ua.logLevel}function pt(n,...t){if(Ua.logLevel<=Lt.DEBUG){const e=t.map(My);Ua.debug(`Firestore (${xl}): ${n}`,...e)}}function Ms(n,...t){if(Ua.logLevel<=Lt.ERROR){const e=t.map(My);Ua.error(`Firestore (${xl}): ${n}`,...e)}}function sl(n,...t){if(Ua.logLevel<=Lt.WARN){const e=t.map(My);Ua.warn(`Firestore (${xl}): ${n}`,...e)}}function My(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n="Unexpected state"){const t=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: `+n;throw Ms(t),new Error(t)}function ne(n,t){n||St()}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends _i{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class PM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(hn.UNAUTHENTICATED))}shutdown(){}}class jM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class LM{constructor(t){this.t=t,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ne(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Is,t.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Is)}},0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ne(typeof i.accessToken=="string"),new fS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string"),new hn(t)}}class VM{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UM{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new VM(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zM{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BM{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){ne(this.o===void 0);const i=o=>{o.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,pt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ne(typeof e.token=="string"),this.R=e.token,new zM(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=FM(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}}function Kt(n,t){return n<t?-1:n>t?1:0}function rl(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ke.fromMillis(Date.now())}static fromDate(t){return ke.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new ke(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ct(t)}static min(){return new Ct(new ke(0,0))}static max(){return new Ct(new ke(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,e,i){e===void 0?e=0:e>t.length&&St(),i===void 0?i=t.length-e:i>t.length-e&&St(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return gu.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof gu?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=t.get(r),l=e.get(r);if(o<l)return-1;if(o>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ce extends gu{construct(t,e,i){return new ce(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ht(it.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new ce(e)}static emptyPath(){return new ce([])}}const HM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends gu{construct(t,e,i){return new nn(t,e,i)}static isValidIdentifier(t){return HM.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nn(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new ht(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ht(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,r+=2}else u==="`"?(l=!l,r++):u!=="."||l?(i+=u,r++):(o(),r++)}if(o(),l)throw new ht(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nn(e)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.path=t}static fromPath(t){return new bt(ce.fromString(t))}static fromName(t){return new bt(ce.fromString(t).popFirst(5))}static empty(){return new bt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ce.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new ce(t.slice()))}}function qM(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ct.fromTimestamp(i===1e9?new ke(e+1,0):new ke(e,i));return new Or(r,bt.empty(),t)}function GM(n){return new Or(n.readTime,n.key,-1)}class Or{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Or(Ct.min(),bt.empty(),-1)}static max(){return new Or(Ct.max(),bt.empty(),-1)}}function $M(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=bt.comparator(n.documentKey,t.documentKey),e!==0?e:Kt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(n){if(n.code!==it.FAILED_PRECONDITION||n.message!==QM)throw n;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new at((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof at?e:at.resolve(e)}catch(e){return at.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):at.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):at.reject(e)}static resolve(t){return new at((e,i)=>{e(t)})}static reject(t){return new at((e,i)=>{i(t)})}static waitFor(t){return new at((e,i)=>{let r=0,o=0,l=!1;t.forEach(u=>{++r,u.next(()=>{++o,l&&o===r&&e()},d=>i(d))}),l=!0,o===r&&e()})}static or(t){let e=at.resolve(!1);for(const i of t)e=e.next(r=>r?at.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new at((i,r)=>{const o=t.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;e(t[f]).next(p=>{l[f]=p,++u,u===o&&i(l)},p=>r(p))}})}static doWhile(t,e){return new at((i,r)=>{const o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}}function KM(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ou(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ie(i),this.se=i=>e.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}ky.oe=-1;function Tf(n){return n==null}function Yd(n){return n===0&&1/n==-1/0}function YM(n){return typeof n=="number"&&Number.isInteger(n)&&!Yd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Wa(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function gS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,e){this.comparator=t,this.root=e||en.EMPTY}insert(t,e){return new me(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,en.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,en.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ud(this.root,t,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ud(this.root,t,this.comparator,!0)}}class ud{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class en{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??en.RED,this.left=r??en.EMPTY,this.right=o??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new en(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return en.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const t=this.left.check();if(t!==this.right.check())throw St();return t+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(t,e,i,r,o){return this}insert(t,e,i){return new en(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Vx(this.data.getIterator())}getIteratorFrom(t){return new Vx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof rn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new rn(this.comparator);return e.data=t,e}}class Vx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this.fields=t,t.sort(nn.comparator)}static empty(){return new Un([])}unionWith(t){let e=new rn(nn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Un(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rl(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pS("Invalid base64 string: "+o):o}}(t);return new an(e)}static fromUint8Array(t){const e=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(t);return new an(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}an.EMPTY_BYTE_STRING=new an("");const XM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(n){if(ne(!!n),typeof n=="string"){let t=0;const e=XM.exec(n);if(ne(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function za(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Py(n){const t=n.mapValue.fields.__previous_value__;return Oy(t)?Py(t):t}function pu(n){const t=Pr(n.mapValue.fields.__local_write_time__.timestampValue);return new ke(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(t,e,i,r,o,l,u,d,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f}}class yu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof yu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd={mapValue:{}};function Ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Oy(n)?4:tk(n)?9007199254740991:JM(n)?10:11:St()}function Gi(n,t){if(n===t)return!0;const e=Ba(n);if(e!==Ba(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return pu(n).isEqual(pu(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Pr(r.timestampValue),u=Pr(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return za(r.bytesValue).isEqual(za(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return Se(r.geoPointValue.latitude)===Se(o.geoPointValue.latitude)&&Se(r.geoPointValue.longitude)===Se(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Se(r.integerValue)===Se(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Se(r.doubleValue),u=Se(o.doubleValue);return l===u?Yd(l)===Yd(u):isNaN(l)&&isNaN(u)}return!1}(n,t);case 9:return rl(n.arrayValue.values||[],t.arrayValue.values||[],Gi);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},u=o.mapValue.fields||{};if(Lx(l)!==Lx(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Gi(l[d],u[d])))return!1;return!0}(n,t);default:return St()}}function vu(n,t){return(n.values||[]).find(e=>Gi(e,t))!==void 0}function al(n,t){if(n===t)return 0;const e=Ba(n),i=Ba(t);if(e!==i)return Kt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(o,l){const u=Se(o.integerValue||o.doubleValue),d=Se(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,t);case 3:return Ux(n.timestampValue,t.timestampValue);case 4:return Ux(pu(n),pu(t));case 5:return Kt(n.stringValue,t.stringValue);case 6:return function(o,l){const u=za(o),d=za(l);return u.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=Kt(u[f],d[f]);if(p!==0)return p}return Kt(u.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,l){const u=Kt(Se(o.latitude),Se(l.latitude));return u!==0?u:Kt(Se(o.longitude),Se(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return zx(n.arrayValue,t.arrayValue);case 10:return function(o,l){var u,d,f,p;const v=o.fields||{},x=l.fields||{},T=(u=v.value)===null||u===void 0?void 0:u.arrayValue,C=(d=x.value)===null||d===void 0?void 0:d.arrayValue,S=Kt(((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:zx(T,C)}(n.mapValue,t.mapValue);case 11:return function(o,l){if(o===hd.mapValue&&l===hd.mapValue)return 0;if(o===hd.mapValue)return 1;if(l===hd.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const x=Kt(d[v],p[v]);if(x!==0)return x;const T=al(u[d[v]],f[p[v]]);if(T!==0)return T}return Kt(d.length,p.length)}(n.mapValue,t.mapValue);default:throw St()}}function Ux(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Kt(n,t);const e=Pr(n),i=Pr(t),r=Kt(e.seconds,i.seconds);return r!==0?r:Kt(e.nanos,i.nanos)}function zx(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=al(e[r],i[r]);if(o)return o}return Kt(e.length,i.length)}function ol(n){return Bp(n)}function Bp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Pr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return za(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return bt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=Bp(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Bp(e.fields[l])}`;return r+"}"}(n.mapValue):St()}function Bx(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Fp(n){return!!n&&"integerValue"in n}function jy(n){return!!n&&"arrayValue"in n}function Fx(n){return!!n&&"nullValue"in n}function Hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kd(n){return!!n&&"mapValue"in n}function JM(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function tu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Wa(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=tu(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=tu(n.arrayValue.values[e]);return t}return Object.assign({},n)}function tk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.value=t}static empty(){return new Cn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!kd(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tu(e)}setAll(t){let e=nn.emptyPath(),i={},r=[];t.forEach((l,u)=>{if(!e.isImmediateParentOf(u)){const d=this.getFieldsMap(e);this.applyChanges(d,i,r),i={},r=[],e=u.popLast()}l?i[u.lastSegment()]=tu(l):r.push(u.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());kd(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];kd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Wa(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new Cn(tu(this.value))}}function yS(n){const t=[];return Wa(n.fields,(e,i)=>{const r=new nn([e]);if(kd(i)){const o=yS(i.mapValue).fields;if(o.length===0)t.push(r);else for(const l of o)t.push(r.child(l))}else t.push(r)}),new Un(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t,e,i,r,o,l,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(t){return new dn(t,0,Ct.min(),Ct.min(),Ct.min(),Cn.empty(),0)}static newFoundDocument(t,e,i,r){return new dn(t,1,e,Ct.min(),i,r,0)}static newNoDocument(t,e){return new dn(t,2,e,Ct.min(),Ct.min(),Cn.empty(),0)}static newUnknownDocument(t,e){return new dn(t,3,e,Ct.min(),Ct.min(),Cn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof dn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t,e){this.position=t,this.inclusive=e}}function qx(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],l=n.position[r];if(o.field.isKeyField()?i=bt.comparator(bt.fromName(l.referenceValue),e.key):i=al(l,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gx(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Gi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,e="asc"){this.field=t,this.dir=e}}function ek(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{}class Me extends vS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new ik(t,e,i):e==="array-contains"?new ak(t,i):e==="in"?new ok(t,i):e==="not-in"?new lk(t,i):e==="array-contains-any"?new ck(t,i):new Me(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new sk(t,i):new rk(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(al(e,this.value)):e!==null&&Ba(this.value)===Ba(e)&&this.matchesComparison(al(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends vS{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new vi(t,e)}matches(t){return _S(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _S(n){return n.op==="and"}function bS(n){return nk(n)&&_S(n)}function nk(n){for(const t of n.filters)if(t instanceof vi)return!1;return!0}function Hp(n){if(n instanceof Me)return n.field.canonicalString()+n.op.toString()+ol(n.value);if(bS(n))return n.filters.map(t=>Hp(t)).join(",");{const t=n.filters.map(e=>Hp(e)).join(",");return`${n.op}(${t})`}}function xS(n,t){return n instanceof Me?function(i,r){return r instanceof Me&&i.op===r.op&&i.field.isEqual(r.field)&&Gi(i.value,r.value)}(n,t):n instanceof vi?function(i,r){return r instanceof vi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,u)=>o&&xS(l,r.filters[u]),!0):!1}(n,t):void St()}function wS(n){return n instanceof Me?function(e){return`${e.field.canonicalString()} ${e.op} ${ol(e.value)}`}(n):n instanceof vi?function(e){return e.op.toString()+" {"+e.getFilters().map(wS).join(" ,")+"}"}(n):"Filter"}class ik extends Me{constructor(t,e,i){super(t,e,i),this.key=bt.fromName(i.referenceValue)}matches(t){const e=bt.comparator(t.key,this.key);return this.matchesComparison(e)}}class sk extends Me{constructor(t,e){super(t,"in",e),this.keys=TS("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class rk extends Me{constructor(t,e){super(t,"not-in",e),this.keys=TS("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function TS(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>bt.fromName(i.referenceValue))}class ak extends Me{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return jy(e)&&vu(e.arrayValue,this.value)}}class ok extends Me{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&vu(this.value.arrayValue,e)}}class lk extends Me{constructor(t,e){super(t,"not-in",e)}matches(t){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!vu(this.value.arrayValue,e)}}class ck extends Me{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!jy(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>vu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(t,e=null,i=[],r=[],o=null,l=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=u,this.ue=null}}function $x(n,t=null,e=[],i=[],r=null,o=null,l=null){return new uk(n,t,e,i,r,o,l)}function Ly(n){const t=Rt(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Hp(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Tf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>ol(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>ol(i)).join(",")),t.ue=e}return t.ue}function Vy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!ek(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!xS(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Gx(n.startAt,t.startAt)&&Gx(n.endAt,t.endAt)}function qp(n){return bt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,e=null,i=[],r=[],o=null,l="F",u=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hk(n,t,e,i,r,o,l,u){return new wl(n,t,e,i,r,o,l,u)}function Ef(n){return new wl(n)}function Qx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ES(n){return n.collectionGroup!==null}function eu(n){const t=Rt(n);if(t.ce===null){t.ce=[];const e=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new rn(nn.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new _u(o,i))}),e.has(nn.keyField().canonicalString())||t.ce.push(new _u(nn.keyField(),i))}return t.ce}function Fi(n){const t=Rt(n);return t.le||(t.le=dk(t,eu(n))),t.le}function dk(n,t){if(n.limitType==="F")return $x(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new _u(r.field,o)});const e=n.endAt?new Xd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Xd(n.startAt.position,n.startAt.inclusive):null;return $x(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Gp(n,t){const e=n.filters.concat([t]);return new wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function $p(n,t,e){return new wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Sf(n,t){return Vy(Fi(n),Fi(t))&&n.limitType===t.limitType}function SS(n){return`${Ly(Fi(n))}|lt:${n.limitType}`}function qo(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>wS(r)).join(", ")}]`),Tf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>ol(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>ol(r)).join(",")),`Target(${i})`}(Fi(n))}; limitType=${n.limitType})`}function Af(n,t){return t.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):bt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(const o of eu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(l,u,d){const f=qx(l,u,d);return l.inclusive?f<=0:f<0}(i.startAt,eu(i),r)||i.endAt&&!function(l,u,d){const f=qx(l,u,d);return l.inclusive?f>=0:f>0}(i.endAt,eu(i),r))}(n,t)}function fk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AS(n){return(t,e)=>{let i=!1;for(const r of eu(n)){const o=mk(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function mk(n,t,e){const i=n.field.isKeyField()?bt.comparator(t.key,e.key):function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?al(d,f):St()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return St()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Wa(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return gS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new me(bt.comparator);function ks(){return gk}const CS=new me(bt.comparator);function $c(...n){let t=CS;for(const e of n)t=t.insert(e.key,e);return t}function RS(n){let t=CS;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ma(){return nu()}function IS(){return nu()}function nu(){return new Tl(n=>n.toString(),(n,t)=>n.isEqual(t))}const pk=new me(bt.comparator),yk=new rn(bt.comparator);function Ot(...n){let t=yk;for(const e of n)t=t.add(e);return t}const vk=new rn(Kt);function _k(){return vk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yd(t)?"-0":t}}function NS(n){return{integerValue:""+n}}function DS(n,t){return YM(t)?NS(t):Uy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this._=void 0}}function bk(n,t,e){return n instanceof bu?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Oy(o)&&(o=Py(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(e,t):n instanceof ll?kS(n,t):n instanceof xu?OS(n,t):function(r,o){const l=MS(r,o),u=Wx(l)+Wx(r.Pe);return Fp(l)&&Fp(r.Pe)?NS(u):Uy(r.serializer,u)}(n,t)}function xk(n,t,e){return n instanceof ll?kS(n,t):n instanceof xu?OS(n,t):e}function MS(n,t){return n instanceof wu?function(i){return Fp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class bu extends Cf{}class ll extends Cf{constructor(t){super(),this.elements=t}}function kS(n,t){const e=PS(t);for(const i of n.elements)e.some(r=>Gi(r,i))||e.push(i);return{arrayValue:{values:e}}}class xu extends Cf{constructor(t){super(),this.elements=t}}function OS(n,t){let e=PS(t);for(const i of n.elements)e=e.filter(r=>!Gi(r,i));return{arrayValue:{values:e}}}class wu extends Cf{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Wx(n){return Se(n.integerValue||n.doubleValue)}function PS(n){return jy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t,e){this.field=t,this.transform=e}}function wk(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof ll&&r instanceof ll||i instanceof xu&&r instanceof xu?rl(i.elements,r.elements,Gi):i instanceof wu&&r instanceof wu?Gi(i.Pe,r.Pe):i instanceof bu&&r instanceof bu}(n.transform,t.transform)}class Tk{constructor(t,e){this.version=t,this.transformResults=e}}class gi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new gi}static exists(t){return new gi(void 0,t)}static updateTime(t){return new gi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Od(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Rf{}function jS(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new VS(n.key,gi.none()):new Pu(n.key,n.data,gi.none());{const e=n.data,i=Cn.empty();let r=new rn(nn.comparator);for(let o of t.fields)if(!r.has(o)){let l=e.field(o);l===null&&o.length>1&&(o=o.popLast(),l=e.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new qr(n.key,i,new Un(r.toArray()),gi.none())}}function Ek(n,t,e){n instanceof Pu?function(r,o,l){const u=r.value.clone(),d=Yx(r.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,t,e):n instanceof qr?function(r,o,l){if(!Od(r.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Yx(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(LS(r)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,e)}function iu(n,t,e,i){return n instanceof Pu?function(o,l,u,d){if(!Od(o.precondition,l))return u;const f=o.value.clone(),p=Xx(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof qr?function(o,l,u,d){if(!Od(o.precondition,l))return u;const f=Xx(o.fieldTransforms,d,l),p=l.data;return p.setAll(LS(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,l,u){return Od(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,t,e)}function Sk(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=MS(i.transform,r||null);o!=null&&(e===null&&(e=Cn.empty()),e.set(i.field,o))}return e||null}function Kx(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&rl(i,r,(o,l)=>wk(o,l))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Pu extends Rf{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qr extends Rf{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LS(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Yx(n,t,e){const i=new Map;ne(n.length===e.length);for(let r=0;r<e.length;r++){const o=n[r],l=o.transform,u=t.data.field(o.field);i.set(o.field,xk(l,u,e[r]))}return i}function Xx(n,t,e){const i=new Map;for(const r of n){const o=r.transform,l=e.data.field(r.field);i.set(r.field,bk(o,l,t))}return i}class VS extends Rf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ak extends Rf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&Ek(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=iu(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=iu(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=IS();return this.mutations.forEach(r=>{const o=t.get(r.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=e.has(r.key)?null:u;const d=jS(l,u);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(Ct.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ot())}isEqual(t){return this.batchId===t.batchId&&rl(this.mutations,t.mutations,(e,i)=>Kx(e,i))&&rl(this.baseMutations,t.baseMutations,(e,i)=>Kx(e,i))}}class By{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ne(t.mutations.length===i.length);let r=function(){return pk}();const o=t.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new By(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,Ft;function Nk(n){switch(n){default:return St();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function US(n){if(n===void 0)return Ms("GRPC error has no .code"),it.UNKNOWN;switch(n){case De.OK:return it.OK;case De.CANCELLED:return it.CANCELLED;case De.UNKNOWN:return it.UNKNOWN;case De.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case De.INTERNAL:return it.INTERNAL;case De.UNAVAILABLE:return it.UNAVAILABLE;case De.UNAUTHENTICATED:return it.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case De.NOT_FOUND:return it.NOT_FOUND;case De.ALREADY_EXISTS:return it.ALREADY_EXISTS;case De.PERMISSION_DENIED:return it.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case De.ABORTED:return it.ABORTED;case De.OUT_OF_RANGE:return it.OUT_OF_RANGE;case De.UNIMPLEMENTED:return it.UNIMPLEMENTED;case De.DATA_LOSS:return it.DATA_LOSS;default:return St()}}(Ft=De||(De={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Pa([4294967295,4294967295],0);function Zx(n){const t=Dk().encode(n),e=new oS;return e.update(t),new Uint8Array(e.digest())}function Jx(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Pa([e,i],0),new Pa([r,o],0)]}class Fy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Qc(`Invalid padding: ${e}`);if(i<0)throw new Qc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Pa.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(Pa.fromNumber(i)));return r.compare(Mk)===1&&(r=new Pa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=Zx(t),[i,r]=Jx(e);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);if(!this.de(l))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),l=new Fy(o,r,e);return i.forEach(u=>l.insert(u)),l}insert(t){if(this.Ie===0)return;const e=Zx(t),[i,r]=Jx(e);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);this.Ae(l)}}Ae(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,ju.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new If(Ct.min(),r,new me(Kt),ks(),Ot())}}class ju{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new ju(i,e,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class zS{constructor(t,e){this.targetId=t,this.me=e}}class BS{constructor(t,e,i=an.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class tw{constructor(){this.fe=0,this.ge=nw(),this.pe=an.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ot(),e=Ot(),i=Ot();return this.ge.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:St()}}),new ju(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=nw()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kk{constructor(t){this.Le=t,this.Be=new Map,this.ke=ks(),this.qe=ew(),this.Qe=new me(Kt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:St()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,i=t.me.count,r=this.Je(e);if(r){const o=r.target;if(qp(o))if(i===0){const l=new bt(o.path);this.Ue(e,l,dn.newNoDocument(l,Ct.min()))}else ne(i===1);else{const l=this.Ye(e);if(l!==i){const u=this.Ze(t),d=u?this.Xe(u,t,l):1;if(d!==0){this.je(e);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,f)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let l,u;try{l=za(i).toUint8Array()}catch(d){if(d instanceof pS)return sl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Fy(l,r,o)}catch(d){return sl(d instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.mightContain(u)||(this.Ue(e,o,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((o,l)=>{const u=this.Je(l);if(u){if(o.current&&qp(u.target)){const d=new bt(u.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,dn.newNoDocument(d,t))}o.be&&(e.set(l,o.ve()),o.Ce())}});let i=Ot();this.qe.forEach((o,l)=>{let u=!0;l.forEachWhile(d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(t));const r=new If(t,e,this.Qe,this.ke,i);return this.ke=ks(),this.qe=ew(),this.Qe=new me(Kt),r}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new tw,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new rn(Kt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||pt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new tw),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function ew(){return new me(bt.comparator)}function nw(){return new me(bt.comparator)}const Ok={asc:"ASCENDING",desc:"DESCENDING"},Pk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jk={and:"AND",or:"OR"};class Lk{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Qp(n,t){return n.useProto3Json||Tf(t)?t:{value:t}}function Zd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function FS(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Vk(n,t){return Zd(n,t.toTimestamp())}function Hi(n){return ne(!!n),Ct.fromTimestamp(function(e){const i=Pr(e);return new ke(i.seconds,i.nanos)}(n))}function Hy(n,t){return Wp(n,t).canonicalString()}function Wp(n,t){const e=function(r){return new ce(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function HS(n){const t=ce.fromString(n);return ne(WS(t)),t}function Kp(n,t){return Hy(n.databaseId,t.path)}function lp(n,t){const e=HS(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new bt(GS(e))}function qS(n,t){return Hy(n.databaseId,t)}function Uk(n){const t=HS(n);return t.length===4?ce.emptyPath():GS(t)}function Yp(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GS(n){return ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iw(n,t,e){return{name:Kp(n,t),fields:e.value.mapValue.fields}}function zk(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:St()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(ne(p===void 0||typeof p=="string"),an.fromBase64String(p||"")):(ne(p===void 0||p instanceof Buffer||p instanceof Uint8Array),an.fromUint8Array(p||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,u=l&&function(f){const p=f.code===void 0?it.UNKNOWN:US(f.code);return new ht(p,f.message||"")}(l);e=new BS(i,r,o,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=lp(n,i.document.name),o=Hi(i.document.updateTime),l=i.document.createTime?Hi(i.document.createTime):Ct.min(),u=new Cn({mapValue:{fields:i.document.fields}}),d=dn.newFoundDocument(r,o,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];e=new Pd(f,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=lp(n,i.document),o=i.readTime?Hi(i.readTime):Ct.min(),l=dn.newNoDocument(r,o),u=i.removedTargetIds||[];e=new Pd([],u,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=lp(n,i.document),o=i.removedTargetIds||[];e=new Pd([],o,r,null)}else{if(!("filter"in t))return St();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new Ik(r,o),u=i.targetId;e=new zS(u,l)}}return e}function Bk(n,t){let e;if(t instanceof Pu)e={update:iw(n,t.key,t.value)};else if(t instanceof VS)e={delete:Kp(n,t.key)};else if(t instanceof qr)e={update:iw(n,t.key,t.data),updateMask:Yk(t.fieldMask)};else{if(!(t instanceof Ak))return St();e={verify:Kp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,l){const u=l.transform;if(u instanceof bu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ll)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wu)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw St()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Vk(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:St()}(n,t.precondition)),e}function Fk(n,t){return n&&n.length>0?(ne(t!==void 0),n.map(e=>function(r,o){let l=r.updateTime?Hi(r.updateTime):Hi(o);return l.isEqual(Ct.min())&&(l=Hi(o)),new Tk(l,r.transformResults||[])}(e,t))):[]}function Hk(n,t){return{documents:[qS(n,t.path)]}}function qk(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=qS(n,r);const o=function(f){if(f.length!==0)return QS(vi.create(f,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(p=>function(x){return{field:Go(x.field),direction:Qk(x.dir)}}(p))}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=Qp(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{_t:e,parent:r}}function Gk(n){let t=Uk(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){ne(i===1);const p=e.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}let o=[];e.where&&(o=function(v){const x=$S(v);return x instanceof vi&&bS(x)?x.getFilters():[x]}(e.where));let l=[];e.orderBy&&(l=function(v){return v.map(x=>function(C){return new _u($o(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(x))}(e.orderBy));let u=null;e.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,Tf(x)?null:x}(e.limit));let d=null;e.startAt&&(d=function(v){const x=!!v.before,T=v.values||[];return new Xd(T,x)}(e.startAt));let f=null;return e.endAt&&(f=function(v){const x=!v.before,T=v.values||[];return new Xd(T,x)}(e.endAt)),hk(t,r,l,o,u,"F",d,f)}function $k(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function $S(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=$o(e.unaryFilter.field);return Me.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=$o(e.unaryFilter.field);return Me.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$o(e.unaryFilter.field);return Me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=$o(e.unaryFilter.field);return Me.create(l,"!=",{nullValue:"NULL_VALUE"});default:return St()}}(n):n.fieldFilter!==void 0?function(e){return Me.create($o(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return vi.create(e.compositeFilter.filters.map(i=>$S(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return St()}}(e.compositeFilter.op))}(n):St()}function Qk(n){return Ok[n]}function Wk(n){return Pk[n]}function Kk(n){return jk[n]}function Go(n){return{fieldPath:n.canonicalString()}}function $o(n){return nn.fromServerFormat(n.fieldPath)}function QS(n){return n instanceof Me?function(e){if(e.op==="=="){if(Hx(e.value))return{unaryFilter:{field:Go(e.field),op:"IS_NAN"}};if(Fx(e.value))return{unaryFilter:{field:Go(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Hx(e.value))return{unaryFilter:{field:Go(e.field),op:"IS_NOT_NAN"}};if(Fx(e.value))return{unaryFilter:{field:Go(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(e.field),op:Wk(e.op),value:e.value}}}(n):n instanceof vi?function(e){const i=e.getFilters().map(r=>QS(r));return i.length===1?i[0]:{compositeFilter:{op:Kk(e.op),filters:i}}}(n):St()}function Yk(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function WS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e,i,r,o=Ct.min(),l=Ct.min(),u=an.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(t){return new Sr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(t){this.ct=t}}function Zk(n){const t=Gk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$p(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.un=new tO}addToCollectionParentIndex(t,e){return this.un.add(e),at.resolve()}getCollectionParents(t,e){return at.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return at.resolve()}deleteFieldIndex(t,e){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,e){return at.resolve()}getDocumentsMatchingTarget(t,e){return at.resolve(null)}getIndexType(t,e){return at.resolve(0)}getFieldIndexes(t,e){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,e){return at.resolve(Or.min())}getMinOffsetFromCollectionGroup(t,e){return at.resolve(Or.min())}updateCollectionGroup(t,e,i){return at.resolve()}updateIndexEntries(t,e){return at.resolve()}}class tO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new rn(ce.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new rn(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new cl(0)}static kn(){return new cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.changes=new Tl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,dn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?at.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&iu(i.mutation,r,Un.empty(),ke.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Ot()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Ot()){const r=Ma();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let l=$c();return o.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=Ma();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Ot()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((l,u)=>{e.set(l,u)})})}computeViews(t,e,i,r){let o=ks();const l=nu(),u=function(){return nu()}();return e.forEach((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof qr)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),iu(p.mutation,f,p.mutation.getFieldMask(),ke.now())):l.set(f.key,Un.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((f,p)=>l.set(f,p)),e.forEach((f,p)=>{var v;return u.set(f,new nO(p,(v=l.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(t,e){const i=nu();let r=new me((l,u)=>l-u),o=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const u of l)u.keys().forEach(d=>{const f=e.get(d);if(f===null)return;let p=i.get(d)||Un.empty();p=u.applyToLocalView(f,p),i.set(d,p);const v=(r.get(u.batchId)||Ot()).add(d);r=r.insert(u.batchId,v)})}).next(()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,v=IS();p.forEach(x=>{if(!o.has(x)){const T=jS(e.get(x),i.get(x));T!==null&&v.set(x,T),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(t,f,v))}return at.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(l){return bt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):ES(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):at.resolve(Ma());let u=-1,d=o;return l.next(f=>at.forEach(f,(p,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(p)?at.resolve():this.remoteDocumentCache.getEntry(t,p).next(x=>{d=d.insert(p,x)}))).next(()=>this.populateOverlays(t,f,o)).next(()=>this.computeViews(t,d,f,Ot())).next(p=>({batchId:u,changes:RS(p)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new bt(e)).next(i=>{let r=$c();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let l=$c();return this.indexManager.getCollectionParents(t,o).next(u=>at.forEach(u,d=>{const f=function(v,x){return new wl(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,f,i,r).next(p=>{p.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(l=>{o.forEach((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,dn.newInvalidDocument(p)))});let u=$c();return l.forEach((d,f)=>{const p=o.get(d);p!==void 0&&iu(p.mutation,f,Un.empty(),ke.now()),Af(e,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return at.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Hi(r.createTime)}}(e)),at.resolve()}getNamedQuery(t,e){return at.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:Zk(r.bundledQuery),readTime:Hi(r.readTime)}}(e)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.overlays=new me(bt.comparator),this.Ir=new Map}getOverlay(t,e){return at.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ma();return at.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.ht(t,e,o)}),at.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),at.resolve()}getOverlaysForCollection(t,e,i){const r=Ma(),o=e.length+1,l=new bt(e.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return at.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new me((f,p)=>f-p);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Ma(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Ma(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=r)););return at.resolve(u)}ht(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Rk(e,i));let o=this.Ir.get(e);o===void 0&&(o=Ot(),this.Ir.set(e,o)),this.Ir.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Tr=new rn(We.Er),this.dr=new rn(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const i=new We(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new We(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){const e=new bt(new ce([])),i=new We(e,t),r=new We(e,t+1),o=[];return this.dr.forEachInRange([i,r],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new bt(new ce([])),i=new We(e,t),r=new We(e,t+1);let o=Ot();return this.dr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(t){const e=new We(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class We{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return bt.comparator(t.key,e.key)||Kt(t.wr,e.wr)}static Ar(t,e){return Kt(t.wr,e.wr)||bt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new rn(We.Er)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Ck(o,e,i,r);this.mutationQueue.push(l);for(const u of r)this.br=this.br.add(new We(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return at.resolve(l)}lookupMutationBatch(t,e){return at.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.vr(i),o=r<0?0:r;return at.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new We(e,0),r=new We(e,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],l=>{const u=this.Dr(l.wr);o.push(u)}),at.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new rn(Kt);return e.forEach(r=>{const o=new We(r,0),l=new We(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],u=>{i=i.add(u.wr)})}),at.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;bt.isDocumentKey(o)||(o=o.child(""));const l=new We(new bt(o),0);let u=new rn(Kt);return this.br.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.wr)),!0)},l),at.resolve(this.Cr(u))}Cr(t){const e=[];return t.forEach(i=>{const r=this.Dr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ne(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return at.forEach(e.mutations,r=>{const o=new We(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){const i=new We(e,0),r=this.br.firstAfterOrEqual(i);return at.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(t){this.Mr=t,this.docs=function(){return new me(bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,l=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return at.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(e))}getEntries(t,e){let i=ks();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():dn.newInvalidDocument(r))}),at.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=ks();const l=e.path,u=new bt(l.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||$M(GM(p),i)<=0||(r.has(p.key)||Af(e,p))&&(o=o.insert(p.key,p.mutableCopy()))}return at.resolve(o)}getAllFromCollectionGroup(t,e,i,r){St()}Or(t,e){return at.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new cO(this)}getSize(t){return at.resolve(this.size)}}class cO extends eO{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),at.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t){this.persistence=t,this.Nr=new Tl(e=>Ly(e),Vy),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qy,this.targetCount=0,this.kr=cl.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,r)=>e(r)),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),at.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new cl(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,at.resolve()}updateTargetData(t,e){return this.Kn(e),at.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.Nr.forEach((l,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)}),at.waitFor(o).next(()=>r)}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,e){const i=this.Nr.get(e)||null;return at.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),at.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(l=>{o.push(r.markPotentiallyOrphaned(t,l))}),at.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),at.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Br.yr(e);return at.resolve(i)}containsKey(t,e){return at.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(t,e){this.qr={},this.overlays={},this.Qr=new ky(0),this.Kr=!1,this.Kr=!0,this.$r=new aO,this.referenceDelegate=t(this),this.Ur=new uO(this),this.indexManager=new Jk,this.remoteDocumentCache=function(r){return new lO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Xk(e),this.Gr=new sO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new rO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new oO(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){pt("MemoryPersistence","Starting transaction:",t);const r=new dO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(t,e){return at.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}}class dO extends WM{constructor(t){super(),this.currentSequenceNumber=t}}class Gy{constructor(t){this.persistence=t,this.Jr=new qy,this.Yr=null}static Zr(t){return new Gy(t)}get Xr(){if(this.Yr)return this.Yr;throw St()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),at.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),at.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),at.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.Xr,i=>{const r=bt.fromPath(i);return this.ei(t,r).next(o=>{o||e.removeEntry(r,Ct.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return at.or([()=>at.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=Ot(),r=Ot();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new $y(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZI()?8:KM(mn())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.Yi(t,e).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(t,e,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new fO;return this.Xi(t,e,l).next(u=>{if(o.result=u,this.zi)return this.es(t,e,l,u.size)})}).next(()=>o.result)}es(t,e,i,r){return i.documentReadCount<this.ji?(Oc()<=Lt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",qo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),at.resolve()):(Oc()<=Lt.DEBUG&&pt("QueryEngine","Query:",qo(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Oc()<=Lt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",qo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fi(e))):at.resolve())}Yi(t,e){if(Qx(e))return at.resolve(null);let i=Fi(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=$p(e,null,"F"),i=Fi(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const l=Ot(...o);return this.Ji.getDocuments(t,l).next(u=>this.indexManager.getMinOffset(t,i).next(d=>{const f=this.ts(e,u);return this.ns(e,f,l,d.readTime)?this.Yi(t,$p(e,null,"F")):this.rs(t,f,e,d)}))})))}Zi(t,e,i,r){return Qx(e)||r.isEqual(Ct.min())?at.resolve(null):this.Ji.getDocuments(t,i).next(o=>{const l=this.ts(e,o);return this.ns(e,l,i,r)?at.resolve(null):(Oc()<=Lt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qo(e)),this.rs(t,l,e,qM(r,-1)).next(u=>u))})}ts(t,e){let i=new rn(AS(t));return e.forEach((r,o)=>{Af(t,o)&&(i=i.add(o))}),i}ns(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(t,e,i){return Oc()<=Lt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",qo(e)),this.Ji.getDocumentsMatchingQuery(t,e,Or.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new me(Kt),this._s=new Tl(o=>Ly(o),Vy),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new iO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function pO(n,t,e,i){return new gO(n,t,e,i)}async function KS(n,t){const e=Rt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],u=[];let d=Ot();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return e.localDocuments.getDocuments(i,d).next(f=>({hs:f,removedBatchIds:l,addedBatchIds:u}))})})}function yO(n,t){const e=Rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.cs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,p){const v=f.batch,x=v.keys();let T=at.resolve();return x.forEach(C=>{T=T.next(()=>p.getEntry(d,C)).next(S=>{const A=f.docVersions.get(C);ne(A!==null),S.version.compareTo(A)<0&&(v.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),p.addEntry(S)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=Ot();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function YS(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function vO(n,t){const e=Rt(n),i=t.snapshotVersion;let r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;const u=[];t.targetChanges.forEach((p,v)=>{const x=r.get(v);if(!x)return;u.push(e.Ur.removeMatchingKeys(o,p.removedDocuments,v).next(()=>e.Ur.addMatchingKeys(o,p.addedDocuments,v)));let T=x.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?T=T.withResumeToken(an.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,i)),r=r.insert(v,T),function(S,A,L){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(x,T,p)&&u.push(e.Ur.updateTargetData(o,T))});let d=ks(),f=Ot();if(t.documentUpdates.forEach(p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(o,p))}),u.push(_O(o,l,t.documentUpdates).next(p=>{d=p.Ps,f=p.Is})),!i.isEqual(Ct.min())){const p=e.Ur.getLastRemoteSnapshotVersion(o).next(v=>e.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(p)}return at.waitFor(u).next(()=>l.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(e.os=r,o))}function _O(n,t,e){let i=Ot(),r=Ot();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let l=ks();return e.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Ct.min())?(t.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(d),l=l.insert(u,d)):pt("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ps:l,Is:r}})}function bO(n,t){const e=Rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function xO(n,t){const e=Rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ur.getTargetData(i,t).next(o=>o?(r=o,at.resolve(r)):e.Ur.allocateTargetId(i).next(l=>(r=new Sr(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}async function Xp(n,t,e){const i=Rt(n),r=i.os.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!Ou(l))throw l;pt("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.os=i.os.remove(t),i._s.delete(r.target)}function sw(n,t,e){const i=Rt(n);let r=Ct.min(),o=Ot();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,p){const v=Rt(d),x=v._s.get(p);return x!==void 0?at.resolve(v.os.get(x)):v.Ur.getTargetData(f,p)}(i,l,Fi(t)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,u.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,t,e?r:Ct.min(),e?o:Ot())).next(u=>(wO(i,fk(t),u),{documents:u,Ts:o})))}function wO(n,t,e){let i=n.us.get(t)||Ct.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(t,i)}class rw{constructor(){this.activeTargetIds=_k()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class TO{constructor(){this.so=new rw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new rw,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=null;function cp(){return dd===null?dd=function(){return 268435456+Math.round(2147483648*Math.random())}():dd++,"0x"+dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class CO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(e,i,r,o,l){const u=cp(),d=this.xo(e,i.toUriEncodedString());pt("RestConnection",`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,l),this.No(e,d,f,r).then(p=>(pt("RestConnection",`Received RPC '${e}' ${u}: `,p),p),p=>{throw sl("RestConnection",`RPC '${e}' ${u} failed with error: `,p,"url: ",d,"request:",r),p})}Lo(e,i,r,o,l,u){return this.Mo(e,i,r,o,l)}Oo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}xo(e,i){const r=SO[e];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){const o=cp();return new Promise((l,u)=>{const d=new lS;d.setWithCredentials(!0),d.listenOnce(cS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Md.NO_ERROR:const p=d.getResponseJson();pt(un,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(p)),l(p);break;case Md.TIMEOUT:pt(un,`RPC '${t}' ${o} timed out`),u(new ht(it.DEADLINE_EXCEEDED,"Request time out"));break;case Md.HTTP_ERROR:const v=d.getStatus();if(pt(un,`RPC '${t}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const T=x==null?void 0:x.error;if(T&&T.status&&T.message){const C=function(A){const L=A.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(L)>=0?L:it.UNKNOWN}(T.status);u(new ht(C,T.message))}else u(new ht(it.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ht(it.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{pt(un,`RPC '${t}' ${o} completed.`)}});const f=JSON.stringify(r);pt(un,`RPC '${t}' ${o} sending request:`,r),d.send(e,"POST",f,i,15)})}Bo(t,e,i){const r=cp(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=dS(),u=hS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=o.join("");pt(un,`Creating RPC '${t}' stream ${r}: ${p}`,d);const v=l.createWebChannel(p,d);let x=!1,T=!1;const C=new AO({Io:A=>{T?pt(un,`Not sending because RPC '${t}' stream ${r} is closed:`,A):(x||(pt(un,`Opening RPC '${t}' stream ${r} transport.`),v.open(),x=!0),pt(un,`RPC '${t}' stream ${r} sending:`,A),v.send(A))},To:()=>v.close()}),S=(A,L,G)=>{A.listen(L,F=>{try{G(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return S(v,Gc.EventType.OPEN,()=>{T||(pt(un,`RPC '${t}' stream ${r} transport opened.`),C.yo())}),S(v,Gc.EventType.CLOSE,()=>{T||(T=!0,pt(un,`RPC '${t}' stream ${r} transport closed`),C.So())}),S(v,Gc.EventType.ERROR,A=>{T||(T=!0,sl(un,`RPC '${t}' stream ${r} transport errored:`,A),C.So(new ht(it.UNAVAILABLE,"The operation could not be completed")))}),S(v,Gc.EventType.MESSAGE,A=>{var L;if(!T){const G=A.data[0];ne(!!G);const F=G,Y=F.error||((L=F[0])===null||L===void 0?void 0:L.error);if(Y){pt(un,`RPC '${t}' stream ${r} received error:`,Y);const X=Y.status;let Z=function(D){const k=De[D];if(k!==void 0)return US(k)}(X),O=Y.message;Z===void 0&&(Z=it.INTERNAL,O="Unknown error status: "+X+" with message "+Y.message),T=!0,C.So(new ht(Z,O)),v.close()}else pt(un,`RPC '${t}' stream ${r} received:`,G),C.bo(G)}}),S(u,uS.STAT_EVENT,A=>{A.stat===zp.PROXY?pt(un,`RPC '${t}' stream ${r} detected buffering proxy`):A.stat===zp.NOPROXY&&pt(un,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(n){return new Lk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t,e,i=1e3,r=1.5,o=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&pt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t,e,i,r,o,l,u,d){this.ui=t,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new XS(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===it.RESOURCE_EXHAUSTED?(Ms(e.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===e&&this.P_(i,r)},i=>{t(()=>{const r=new ht(it.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,e){const i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return pt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RO extends ZS{constructor(t,e,i,r,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.serializer=o}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=zk(this.serializer,t),i=function(o){if(!("targetChange"in o))return Ct.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ct.min():l.readTime?Hi(l.readTime):Ct.min()}(t);return this.listener.d_(e,i)}A_(t){const e={};e.database=Yp(this.serializer),e.addTarget=function(o,l){let u;const d=l.target;if(u=qp(d)?{documents:Hk(o,d)}:{query:qk(o,d)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=FS(o,l.resumeToken);const f=Qp(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ct.min())>0){u.readTime=Zd(o,l.snapshotVersion.toTimestamp());const f=Qp(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,t);const i=$k(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){const e={};e.database=Yp(this.serializer),e.removeTarget=t,this.a_(e)}}class IO extends ZS{constructor(t,e,i,r,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return ne(!!t.streamToken),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){ne(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=Fk(t.writeResults,t.commitTime),i=Hi(t.commitTime);return this.listener.g_(i,e)}p_(){const t={};t.database=Yp(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Bk(this.serializer,i))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(t,Wp(e,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ht(it.UNKNOWN,o.toString())})}Lo(t,e,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Lo(t,Wp(e,i),r,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ht(it.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ms(e),this.D_=!1):pt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{Ka(this)&&(pt("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Rt(d);f.L_.add(4),await Lu(f),f.q_.set("Unknown"),f.L_.delete(4),await Df(f)}(this))})}),this.q_=new DO(i,r)}}async function Df(n){if(Ka(n))for(const t of n.B_)await t(!0)}async function Lu(n){for(const t of n.B_)await t(!1)}function JS(n,t){const e=Rt(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),Yy(e)?Ky(e):El(e).r_()&&Wy(e,t))}function Qy(n,t){const e=Rt(n),i=El(e);e.N_.delete(t),i.r_()&&tA(e,t),e.N_.size===0&&(i.r_()?i.o_():Ka(e)&&e.q_.set("Unknown"))}function Wy(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ct.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}El(n).A_(t)}function tA(n,t){n.Q_.xe(t),El(n).R_(t)}function Ky(n){n.Q_=new kk({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),El(n).start(),n.q_.v_()}function Yy(n){return Ka(n)&&!El(n).n_()&&n.N_.size>0}function Ka(n){return Rt(n).L_.size===0}function eA(n){n.Q_=void 0}async function kO(n){n.q_.set("Online")}async function OO(n){n.N_.forEach((t,e)=>{Wy(n,t)})}async function PO(n,t){eA(n),Yy(n)?(n.q_.M_(t),Ky(n)):n.q_.set("Unknown")}async function jO(n,t,e){if(n.q_.set("Online"),t instanceof BS&&t.state===2&&t.cause)try{await async function(r,o){const l=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,l),r.N_.delete(u),r.Q_.removeTarget(u))}(n,t)}catch(i){pt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Jd(n,i)}else if(t instanceof Pd?n.Q_.Ke(t):t instanceof zS?n.Q_.He(t):n.Q_.We(t),!e.isEqual(Ct.min()))try{const i=await YS(n.localStore);e.compareTo(i)>=0&&await function(o,l){const u=o.Q_.rt(l);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.N_.get(f);p&&o.N_.set(f,p.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,f)=>{const p=o.N_.get(d);if(!p)return;o.N_.set(d,p.withResumeToken(an.EMPTY_BYTE_STRING,p.snapshotVersion)),tA(o,d);const v=new Sr(p.target,d,f,p.sequenceNumber);Wy(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(n,e)}catch(i){pt("RemoteStore","Failed to raise snapshot:",i),await Jd(n,i)}}async function Jd(n,t,e){if(!Ou(t))throw t;n.L_.add(1),await Lu(n),n.q_.set("Offline"),e||(e=()=>YS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pt("RemoteStore","Retrying IndexedDB access"),await e(),n.L_.delete(1),await Df(n)})}function nA(n,t){return t().catch(e=>Jd(n,e,t))}async function Mf(n){const t=Rt(n),e=jr(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;LO(t);)try{const r=await bO(t.localStore,i);if(r===null){t.O_.length===0&&e.o_();break}i=r.batchId,VO(t,r)}catch(r){await Jd(t,r)}iA(t)&&sA(t)}function LO(n){return Ka(n)&&n.O_.length<10}function VO(n,t){n.O_.push(t);const e=jr(n);e.r_()&&e.V_&&e.m_(t.mutations)}function iA(n){return Ka(n)&&!jr(n).n_()&&n.O_.length>0}function sA(n){jr(n).start()}async function UO(n){jr(n).p_()}async function zO(n){const t=jr(n);for(const e of n.O_)t.m_(e.mutations)}async function BO(n,t,e){const i=n.O_.shift(),r=By.from(i,t,e);await nA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Mf(n)}async function FO(n,t){t&&jr(n).V_&&await async function(i,r){if(function(l){return Nk(l)&&l!==it.ABORTED}(r.code)){const o=i.O_.shift();jr(i).s_(),await nA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Mf(i)}}(n,t),iA(n)&&sA(n)}async function ow(n,t){const e=Rt(n);e.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const i=Ka(e);e.L_.add(3),await Lu(e),i&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await Df(e)}async function HO(n,t){const e=Rt(n);t?(e.L_.delete(2),await Df(e)):t||(e.L_.add(2),await Lu(e),e.q_.set("Unknown"))}function El(n){return n.K_||(n.K_=function(e,i,r){const o=Rt(e);return o.w_(),new RO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:kO.bind(null,n),Ro:OO.bind(null,n),mo:PO.bind(null,n),d_:jO.bind(null,n)}),n.B_.push(async t=>{t?(n.K_.s_(),Yy(n)?Ky(n):n.q_.set("Unknown")):(await n.K_.stop(),eA(n))})),n.K_}function jr(n){return n.U_||(n.U_=function(e,i,r){const o=Rt(e);return o.w_(),new IO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UO.bind(null,n),mo:FO.bind(null,n),f_:zO.bind(null,n),g_:BO.bind(null,n)}),n.B_.push(async t=>{t?(n.U_.s_(),await Mf(n)):(await n.U_.stop(),n.O_.length>0&&(pt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const l=Date.now()+i,u=new Xy(t,e,l,r,o);return u.start(i),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(n,t){if(Ms("AsyncQueue",`${t}: ${n}`),Ou(n))return new ht(it.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t){this.comparator=t?(e,i)=>t(e,i)||bt.comparator(e.key,i.key):(e,i)=>bt.comparator(e.key,i.key),this.keyedMap=$c(),this.sortedSet=new me(this.comparator)}static emptySet(t){return new tl(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof tl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new tl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.W_=new me(bt.comparator)}track(t){const e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):St():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}}class ul{constructor(t,e,i,r,o,l,u,d,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,r,o){const l=[];return e.forEach(u=>{l.push({type:0,doc:u})}),new ul(t,e,tl.emptySet(e),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class GO{constructor(){this.queries=cw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){const r=Rt(e),o=r.queries;r.queries=cw(),o.forEach((l,u)=>{for(const d of u.j_)d.onError(i)})})(this,new ht(it.ABORTED,"Firestore shutting down"))}}function cw(){return new Tl(n=>SS(n),Sf)}async function Jy(n,t){const e=Rt(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.H_()&&t.J_()&&(i=2):(o=new qO,i=t.J_()?0:1);try{switch(i){case 0:o.z_=await e.onListen(r,!0);break;case 1:o.z_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(l){const u=Zy(l,`Initialization of query '${qo(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,o),o.j_.push(t),t.Z_(e.onlineState),o.z_&&t.X_(o.z_)&&ev(e)}async function tv(n,t){const e=Rt(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const l=o.j_.indexOf(t);l>=0&&(o.j_.splice(l,1),o.j_.length===0?r=t.J_()?0:1:!o.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function $O(n,t){const e=Rt(n);let i=!1;for(const r of t){const o=r.query,l=e.queries.get(o);if(l){for(const u of l.j_)u.X_(r)&&(i=!0);l.z_=r}}i&&ev(e)}function QO(n,t,e){const i=Rt(n),r=i.queries.get(t);if(r)for(const o of r.j_)o.onError(e);i.queries.delete(t)}function ev(n){n.Y_.forEach(t=>{t.next()})}var Zp,uw;(uw=Zp||(Zp={})).ea="default",uw.Cache="cache";class nv{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ul(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=ul.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t){this.key=t}}class aA{constructor(t){this.key=t}}class WO{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ot(),this.mutatedKeys=Ot(),this.Aa=AS(t),this.Ra=new tl(this.Aa)}get Va(){return this.Ta}ma(t,e){const i=e?e.fa:new lw,r=e?e.Ra:this.Ra;let o=e?e.mutatedKeys:this.mutatedKeys,l=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((p,v)=>{const x=r.get(p),T=Af(this.query,v)?v:null,C=!!x&&this.mutatedKeys.has(x.key),S=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;x&&T?x.data.isEqual(T.data)?C!==S&&(i.track({type:3,doc:T}),A=!0):this.ga(x,T)||(i.track({type:2,doc:T}),A=!0,(d&&this.Aa(T,d)>0||f&&this.Aa(T,f)<0)&&(u=!0)):!x&&T?(i.track({type:0,doc:T}),A=!0):x&&!T&&(i.track({type:1,doc:x}),A=!0,(d||f)&&(u=!0)),A&&(T?(l=l.add(T),o=S?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{Ra:l,fa:i,ns:u,mutatedKeys:o}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const l=t.fa.G_();l.sort((p,v)=>function(T,C){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return S(T)-S(C)}(p.type,v.type)||this.Aa(p.doc,v.doc)),this.pa(i),r=r!=null&&r;const u=e&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,f=d!==this.Ea;return this.Ea=d,l.length!==0||f?{snapshot:new ul(this.query,t.Ra,o,l,t.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ot(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const e=[];return t.forEach(i=>{this.da.has(i)||e.push(new aA(i))}),this.da.forEach(i=>{t.has(i)||e.push(new rA(i))}),e}ba(t){this.Ta=t.Ts,this.da=Ot();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return ul.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KO{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class YO{constructor(t){this.key=t,this.va=!1}}class XO{constructor(t,e,i,r,o,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Tl(u=>SS(u),Sf),this.Ma=new Map,this.xa=new Set,this.Oa=new me(bt.comparator),this.Na=new Map,this.La=new qy,this.Ba={},this.ka=new Map,this.qa=cl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ZO(n,t,e=!0){const i=dA(n);let r;const o=i.Fa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await oA(i,t,e,!0),r}async function JO(n,t){const e=dA(n);await oA(e,t,!0,!1)}async function oA(n,t,e,i){const r=await xO(n.localStore,Fi(t)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,e);let u;return i&&(u=await tP(n,t,o,l==="current",r.resumeToken)),n.isPrimaryClient&&e&&JS(n.remoteStore,r),u}async function tP(n,t,e,i,r){n.Ka=(v,x,T)=>async function(S,A,L,G){let F=A.view.ma(L);F.ns&&(F=await sw(S.localStore,A.query,!1).then(({documents:O})=>A.view.ma(O,F)));const Y=G&&G.targetChanges.get(A.targetId),X=G&&G.targetMismatches.get(A.targetId)!=null,Z=A.view.applyChanges(F,S.isPrimaryClient,Y,X);return dw(S,A.targetId,Z.wa),Z.snapshot}(n,v,x,T);const o=await sw(n.localStore,t,!0),l=new WO(t,o.Ts),u=l.ma(o.documents),d=ju.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),f=l.applyChanges(u,n.isPrimaryClient,d);dw(n,e,f.wa);const p=new KO(t,e,l);return n.Fa.set(t,p),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),f.snapshot}async function eP(n,t,e){const i=Rt(n),r=i.Fa.get(t),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(l=>!Sf(l,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Xp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Qy(i.remoteStore,r.targetId),Jp(i,r.targetId)}).catch(ku)):(Jp(i,r.targetId),await Xp(i.localStore,r.targetId,!0))}async function nP(n,t){const e=Rt(n),i=e.Fa.get(t),r=e.Ma.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Qy(e.remoteStore,i.targetId))}async function iP(n,t,e){const i=uP(n);try{const r=await function(l,u){const d=Rt(l),f=ke.now(),p=u.reduce((T,C)=>T.add(C.key),Ot());let v,x;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=ks(),S=Ot();return d.cs.getEntries(T,p).next(A=>{C=A,C.forEach((L,G)=>{G.isValidDocument()||(S=S.add(L))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,C)).next(A=>{v=A;const L=[];for(const G of u){const F=Sk(G,v.get(G.key).overlayedDocument);F!=null&&L.push(new qr(G.key,F,yS(F.value.mapValue),gi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,L,u)}).next(A=>{x=A;const L=A.applyToLocalDocumentSet(v,S);return d.documentOverlayCache.saveOverlays(T,A.batchId,L)})}).then(()=>({batchId:x.batchId,changes:RS(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(l,u,d){let f=l.Ba[l.currentUser.toKey()];f||(f=new me(Kt)),f=f.insert(u,d),l.Ba[l.currentUser.toKey()]=f}(i,r.batchId,e),await Vu(i,r.changes),await Mf(i.remoteStore)}catch(r){const o=Zy(r,"Failed to persist write");e.reject(o)}}async function lA(n,t){const e=Rt(n);try{const i=await vO(e.localStore,t);t.targetChanges.forEach((r,o)=>{const l=e.Na.get(o);l&&(ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.va=!0:r.modifiedDocuments.size>0?ne(l.va):r.removedDocuments.size>0&&(ne(l.va),l.va=!1))}),await Vu(e,i,t)}catch(i){await ku(i)}}function hw(n,t,e){const i=Rt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Fa.forEach((o,l)=>{const u=l.view.Z_(t);u.snapshot&&r.push(u.snapshot)}),function(l,u){const d=Rt(l);d.onlineState=u;let f=!1;d.queries.forEach((p,v)=>{for(const x of v.j_)x.Z_(u)&&(f=!0)}),f&&ev(d)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function sP(n,t,e){const i=Rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Na.get(t),o=r&&r.key;if(o){let l=new me(bt.comparator);l=l.insert(o,dn.newNoDocument(o,Ct.min()));const u=Ot().add(o),d=new If(Ct.min(),new Map,new me(Kt),l,u);await lA(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(t),iv(i)}else await Xp(i.localStore,t,!1).then(()=>Jp(i,t,e)).catch(ku)}async function rP(n,t){const e=Rt(n),i=t.batch.batchId;try{const r=await yO(e.localStore,t);uA(e,i,null),cA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(e,r)}catch(r){await ku(r)}}async function aP(n,t,e){const i=Rt(n);try{const r=await function(l,u){const d=Rt(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next(v=>(ne(v!==null),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(i.localStore,t);uA(i,t,e),cA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Vu(i,r)}catch(r){await ku(r)}}function cA(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function uA(n,t,e){const i=Rt(n);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function Jp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Ma.get(t))n.Fa.delete(i),e&&n.Ca.$a(i,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(i=>{n.La.containsKey(i)||hA(n,i)})}function hA(n,t){n.xa.delete(t.path.canonicalString());const e=n.Oa.get(t);e!==null&&(Qy(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),iv(n))}function dw(n,t,e){for(const i of e)i instanceof rA?(n.La.addReference(i.key,t),oP(n,i)):i instanceof aA?(pt("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,t),n.La.containsKey(i.key)||hA(n,i.key)):St()}function oP(n,t){const e=t.key,i=e.path.canonicalString();n.Oa.get(e)||n.xa.has(i)||(pt("SyncEngine","New document in limbo: "+e),n.xa.add(i),iv(n))}function iv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const e=new bt(ce.fromString(t)),i=n.qa.next();n.Na.set(i,new YO(e)),n.Oa=n.Oa.insert(e,i),JS(n.remoteStore,new Sr(Fi(Ef(e.path)),i,"TargetPurposeLimboResolution",ky.oe))}}async function Vu(n,t,e){const i=Rt(n),r=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((u,d)=>{l.push(i.Ka(d,t,e).then(f=>{var p;if((f||e)&&i.isPrimaryClient){const v=f?!f.fromCache:(p=e==null?void 0:e.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=$y.Wi(d.targetId,f);o.push(v)}}))}),await Promise.all(l),i.Ca.d_(r),await async function(d,f){const p=Rt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>at.forEach(f,x=>at.forEach(x.$i,T=>p.persistence.referenceDelegate.addReference(v,x.targetId,T)).next(()=>at.forEach(x.Ui,T=>p.persistence.referenceDelegate.removeReference(v,x.targetId,T)))))}catch(v){if(!Ou(v))throw v;pt("LocalStore","Failed to update sequence numbers: "+v)}for(const v of f){const x=v.targetId;if(!v.fromCache){const T=p.os.get(x),C=T.snapshotVersion,S=T.withLastLimboFreeSnapshotVersion(C);p.os=p.os.insert(x,S)}}}(i.localStore,o))}async function lP(n,t){const e=Rt(n);if(!e.currentUser.isEqual(t)){pt("SyncEngine","User change. New user:",t.toKey());const i=await KS(e.localStore,t);e.currentUser=t,function(o,l){o.ka.forEach(u=>{u.forEach(d=>{d.reject(new ht(it.CANCELLED,l))})}),o.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Vu(e,i.hs)}}function cP(n,t){const e=Rt(n),i=e.Na.get(t);if(i&&i.va)return Ot().add(i.key);{let r=Ot();const o=e.Ma.get(t);if(!o)return r;for(const l of o){const u=e.Fa.get(l);r=r.unionWith(u.view.Va)}return r}}function dA(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=lA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sP.bind(null,t),t.Ca.d_=$O.bind(null,t.eventManager),t.Ca.$a=QO.bind(null,t.eventManager),t}function uP(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aP.bind(null,t),t}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Nf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return pO(this.persistence,new mO,t.initialUser,this.serializer)}Ga(t){return new hO(Gy.Zr,this.serializer)}Wa(t){return new TO}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class ty{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lP.bind(null,this.syncEngine),await HO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new GO}()}createDatastore(t){const e=Nf(t.databaseInfo.databaseId),i=function(o){return new CO(o)}(t.databaseInfo);return function(o,l,u,d){return new NO(o,l,u,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,l,u){return new MO(i,r,o,l,u)}(this.localStore,this.datastore,t.asyncQueue,e=>hw(this.syncEngine,e,0),function(){return aw.D()?new aw:new EO}())}createSyncEngine(t,e){return function(r,o,l,u,d,f,p){const v=new XO(r,o,l,u,d,f);return p&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const o=Rt(r);pt("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Lu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Ms("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=hn.UNAUTHENTICATED,this.clientId=mS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{pt("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(pt("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Zy(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function hp(n,t){n.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await KS(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function fw(n,t){n.asyncQueue.verifyOperationInProgress();const e=await dP(n);pt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>ow(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>ow(t.remoteStore,r)),n._onlineComponents=t}async function dP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pt("FirestoreClient","Using user provided OfflineComponentProvider");try{await hp(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===it.FAILED_PRECONDITION||r.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;sl("Error using user provided cache. Falling back to memory cache: "+e),await hp(n,new tf)}}else pt("FirestoreClient","Using default OfflineComponentProvider"),await hp(n,new tf);return n._offlineComponents}async function fA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pt("FirestoreClient","Using user provided OnlineComponentProvider"),await fw(n,n._uninitializedComponentsProvider._online)):(pt("FirestoreClient","Using default OnlineComponentProvider"),await fw(n,new ty))),n._onlineComponents}function fP(n){return fA(n).then(t=>t.syncEngine)}async function ef(n){const t=await fA(n),e=t.eventManager;return e.onListen=ZO.bind(null,t.syncEngine),e.onUnlisten=eP.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=JO.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=nP.bind(null,t.syncEngine),e}function mP(n,t,e={}){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,f){const p=new sv({next:x=>{p.Za(),l.enqueueAndForget(()=>tv(o,v));const T=x.docs.has(u);!T&&x.fromCache?f.reject(new ht(it.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&x.fromCache&&d&&d.source==="server"?f.reject(new ht(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new nv(Ef(u.path),p,{includeMetadataChanges:!0,_a:!0});return Jy(o,v)}(await ef(n),n.asyncQueue,t,e,i)),i.promise}function gP(n,t,e={}){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,f){const p=new sv({next:x=>{p.Za(),l.enqueueAndForget(()=>tv(o,v)),x.fromCache&&d.source==="server"?f.reject(new ht(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new nv(u,p,{includeMetadataChanges:!0,_a:!0});return Jy(o,v)}(await ef(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,t,e){if(!e)throw new ht(it.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function pP(n,t,e,i){if(t===!0&&i===!0)throw new ht(it.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function gw(n){if(!bt.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pw(n){if(bt.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":St()}function Bn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=kf(n);throw new ht(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Of{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yw(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new PM;switch(i.type){case"firstParty":return new UM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ht(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=mw.get(e);i&&(pt("ComponentProvider","Removing Datastore"),mw.delete(e),i.terminate())}(this),Promise.resolve()}}function yP(n,t,e,i={}){var r;const o=(n=Bn(n,Of))._getSettings(),l=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=hn.MOCK_USER;else{u=$I(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ht(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new hn(f)}n._authCredentials=new jM(new fS(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Gr(this.firestore,t,this._query)}}class fn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fn(this.firestore,t,this._key)}}class Mr extends Gr{constructor(t,e,i){super(t,e,Ef(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fn(this.firestore,null,new bt(t))}withConverter(t){return new Mr(this.firestore,t,this._path)}}function rv(n,t,...e){if(n=Oe(n),gA("collection","path",t),n instanceof Of){const i=ce.fromString(t,...e);return pw(i),new Mr(n,null,i)}{if(!(n instanceof fn||n instanceof Mr))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return pw(i),new Mr(n.firestore,null,i)}}function Zt(n,t,...e){if(n=Oe(n),arguments.length===1&&(t=mS.newId()),gA("doc","path",t),n instanceof Of){const i=ce.fromString(t,...e);return gw(i),new fn(n,null,new bt(i))}{if(!(n instanceof fn||n instanceof Mr))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return gw(i),new fn(n.firestore,n instanceof Mr?n.converter:null,new bt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new XS(this,"async_queue_retry"),this.Vu=()=>{const i=up();i&&pt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const e=up();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=up();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new Is;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ou(t))throw t;pt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const r=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(i);throw Ms("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const r=Xy.createAndSchedule(this,t,e,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&St()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}function _w(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Lr extends Of{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new vw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vw(t),this._firestoreClient=void 0,await t}}}function vP(n,t){const e=typeof n=="object"?n:wy(),i=typeof n=="string"?n:"(default)",r=$a(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=qI("firestore");o&&yP(r,...o)}return r}function Pf(n){if(n._terminated)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_P(n),n._firestoreClient}function _P(n){var t,e,i;const r=n._freezeSettings(),o=function(u,d,f,p){return new ZM(u,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,mA(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new hP(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hl(an.fromBase64String(t))}catch(e){throw new ht(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new hl(an.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^__.*__$/;class xP{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new qr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Pu(t,this.data,e,this.fieldTransforms)}}class pA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new qr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function yA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class Lf{constructor(t,e,i,r,o,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Lf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.Ou(t),r}Nu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return nf(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(yA(this.Cu)&&bP.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class wP{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Nf(t)}Qu(t,e,i,r=!1){return new Lf({Cu:t,methodName:e,qu:i,path:nn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vf(n){const t=n._freezeSettings(),e=Nf(n._databaseId);return new wP(n._databaseId,!!t.ignoreUndefinedProperties,e)}function vA(n,t,e,i,r,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,t,e,r);hv("Data must be an object, but it was:",l,i);const u=_A(i,l);let d,f;if(o.merge)d=new Un(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const x=ey(t,v,e);if(!l.contains(x))throw new ht(it.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);xA(p,x)||p.push(x)}d=new Un(p),f=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=l.fieldTransforms;return new xP(new Cn(u),d,f)}class Uf extends Sl{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Uf}}function TP(n,t,e){return new Lf({Cu:3,qu:t.settings.qu,methodName:n._methodName,xu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class lv extends Sl{_toFieldTransform(t){return new zy(t.path,new bu)}isEqual(t){return t instanceof lv}}class cv extends Sl{constructor(t,e){super(t),this.Ku=e}_toFieldTransform(t){const e=TP(this,t,!0),i=this.Ku.map(o=>Al(o,e)),r=new ll(i);return new zy(t.path,r)}isEqual(t){return t instanceof cv&&il(this.Ku,t.Ku)}}class uv extends Sl{constructor(t,e){super(t),this.$u=e}_toFieldTransform(t){const e=new wu(t.serializer,DS(t.serializer,this.$u));return new zy(t.path,e)}isEqual(t){return t instanceof uv&&this.$u===t.$u}}function EP(n,t,e,i){const r=n.Qu(1,t,e);hv("Data must be an object, but it was:",r,i);const o=[],l=Cn.empty();Wa(i,(d,f)=>{const p=dv(t,d,e);f=Oe(f);const v=r.Nu(p);if(f instanceof Uf)o.push(p);else{const x=Al(f,v);x!=null&&(o.push(p),l.set(p,x))}});const u=new Un(o);return new pA(l,u,r.fieldTransforms)}function SP(n,t,e,i,r,o){const l=n.Qu(1,t,e),u=[ey(t,i,e)],d=[r];if(o.length%2!=0)throw new ht(it.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(ey(t,o[x])),d.push(o[x+1]);const f=[],p=Cn.empty();for(let x=u.length-1;x>=0;--x)if(!xA(f,u[x])){const T=u[x];let C=d[x];C=Oe(C);const S=l.Nu(T);if(C instanceof Uf)f.push(T);else{const A=Al(C,S);A!=null&&(f.push(T),p.set(T,A))}}const v=new Un(f);return new pA(p,v,l.fieldTransforms)}function AP(n,t,e,i=!1){return Al(e,n.Qu(i?4:3,t))}function Al(n,t){if(bA(n=Oe(n)))return hv("Unsupported field value:",t,n),_A(n,t);if(n instanceof Sl)return function(i,r){if(!yA(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const u of i){let d=Al(u,r.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=Oe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DS(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ke.fromDate(i);return{timestampValue:Zd(r.serializer,o)}}if(i instanceof ke){const o=new ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Zd(r.serializer,o)}}if(i instanceof av)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hl)return{bytesValue:FS(r.serializer,i._byteString)};if(i instanceof fn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ov)return function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return Uy(u.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${kf(i)}`)}(n,t)}function _A(n,t){const e={};return gS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wa(n,(i,r)=>{const o=Al(r,t.Mu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function bA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof av||n instanceof hl||n instanceof fn||n instanceof Sl||n instanceof ov)}function hv(n,t,e){if(!bA(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=kf(e);throw i==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+i)}}function ey(n,t,e){if((t=Oe(t))instanceof jf)return t._internalPath;if(typeof t=="string")return dv(n,t);throw nf("Field path arguments must be of type string or ",n,!1,void 0,e)}const CP=new RegExp("[~\\*/\\[\\]]");function dv(n,t,e){if(t.search(CP)>=0)throw nf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new jf(...t.split("."))._internalPath}catch{throw nf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function nf(n,t,e,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new ht(it.INVALID_ARGUMENT,u+n+d)}function xA(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new RP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(zf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class RP extends wA{data(){return super.data()}}function zf(n,t){return typeof t=="string"?dv(n,t):t instanceof jf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fv{}class EA extends fv{}function SA(n,t,...e){let i=[];t instanceof fv&&i.push(t),i=i.concat(e),function(o){const l=o.filter(d=>d instanceof mv).length,u=o.filter(d=>d instanceof Bf).length;if(l>1||l>0&&u>0)throw new ht(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Bf extends EA{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Bf(t,e,i)}_apply(t){const e=this._parse(t);return CA(t._query,e),new Gr(t.firestore,t.converter,Gp(t._query,e))}_parse(t){const e=Vf(t.firestore);return function(o,l,u,d,f,p,v){let x;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ht(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){xw(v,p);const T=[];for(const C of v)T.push(bw(d,o,C));x={arrayValue:{values:T}}}else x=bw(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||xw(v,p),x=AP(u,l,v,p==="in"||p==="not-in");return Me.create(f,p,x)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function AA(n,t,e){const i=t,r=zf("where",n);return Bf._create(r,i,e)}class mv extends fv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new mv(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:vi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let l=r;const u=o.getFlattenedFilters();for(const d of u)CA(l,d),l=Gp(l,d)}(t._query,e),new Gr(t.firestore,t.converter,Gp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gv extends EA{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new gv(t,e)}_apply(t){const e=function(r,o,l){if(r.startAt!==null)throw new ht(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ht(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(o,l)}(t._query,this._field,this._direction);return new Gr(t.firestore,t.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new wl(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function IP(n,t="asc"){const e=t,i=zf("orderBy",n);return gv._create(i,e)}function bw(n,t,e){if(typeof(e=Oe(e))=="string"){if(e==="")throw new ht(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ES(t)&&e.indexOf("/")!==-1)throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ce.fromString(e));if(!bt.isDocumentKey(i))throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bx(n,new bt(i))}if(e instanceof fn)return Bx(n,e._key);throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(e)}.`)}function xw(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function CA(n,t){const e=function(r,o){for(const l of r)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class NP{convertValue(t,e="none"){switch(Ba(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Se(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(za(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw St()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Wa(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;const o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>Se(l.doubleValue));return new ov(o)}convertGeoPoint(t){return new av(Se(t.latitude),Se(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Py(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(pu(t));default:return null}}convertTimestamp(t){const e=Pr(t);return new ke(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ce.fromString(t);ne(WS(i));const r=new yu(i.get(1),i.get(3)),o=new bt(i.popFirst(5));return r.isEqual(e)||Ms(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class IA extends wA{constructor(t,e,i,r,o,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(zf("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class jd extends IA{data(t={}){return super.data(t)}}class NA{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new jd(this._firestore,this._userDataWriter,i.key,i,new Wc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>{const d=new jd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Wc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new jd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Wc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:DP(u.type),doc:d,oldIndex:f,newIndex:p}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function DP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(n){n=Bn(n,fn);const t=Bn(n.firestore,Lr);return mP(Pf(t),n._key).then(e=>MA(t,n,e))}class pv extends NP{constructor(t){super(),this.firestore=t}convertBytes(t){return new hl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fn(this.firestore,null,e)}}function MP(n){n=Bn(n,Gr);const t=Bn(n.firestore,Lr),e=Pf(t),i=new pv(t);return TA(n._query),gP(e,n._query).then(r=>new NA(t,i,n,r))}function kP(n,t,e){n=Bn(n,fn);const i=Bn(n.firestore,Lr),r=RA(n.converter,t);return yv(i,[vA(Vf(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,gi.none())])}function xe(n,t,e,...i){n=Bn(n,fn);const r=Bn(n.firestore,Lr),o=Vf(r);let l;return l=typeof(t=Oe(t))=="string"||t instanceof jf?SP(o,"updateDoc",n._key,t,e,i):EP(o,"updateDoc",n._key,t),yv(r,[l.toMutation(n._key,gi.exists(!0))])}function OP(n,t){const e=Bn(n.firestore,Lr),i=Zt(n),r=RA(n.converter,t);return yv(e,[vA(Vf(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,gi.exists(!1))]).then(()=>i)}function DA(n,...t){var e,i,r;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof t[l]!="object"||_w(t[l])||(o=t[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(_w(t[l])){const v=t[l];t[l]=(e=v.next)===null||e===void 0?void 0:e.bind(v),t[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),t[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,p;if(n instanceof fn)f=Bn(n.firestore,Lr),p=Ef(n._key.path),d={next:v=>{t[l]&&t[l](MA(f,n,v))},error:t[l+1],complete:t[l+2]};else{const v=Bn(n,Gr);f=Bn(v.firestore,Lr),p=v._query;const x=new pv(f);d={next:T=>{t[l]&&t[l](new NA(f,x,v,T))},error:t[l+1],complete:t[l+2]},TA(n._query)}return function(x,T,C,S){const A=new sv(S),L=new nv(T,A,C);return x.asyncQueue.enqueueAndForget(async()=>Jy(await ef(x),L)),()=>{A.Za(),x.asyncQueue.enqueueAndForget(async()=>tv(await ef(x),L))}}(Pf(f),p,u,d)}function yv(n,t){return function(i,r){const o=new Is;return i.asyncQueue.enqueueAndForget(async()=>iP(await fP(i),r,o)),o.promise}(Pf(n),t)}function MA(n,t,e){const i=e.docs.get(t._key),r=new pv(n);return new IA(n,r,t._key,i,new Wc(e.hasPendingWrites,e.fromCache),t.converter)}function PP(){return new lv("serverTimestamp")}function jP(...n){return new cv("arrayUnion",n)}function Pc(n){return new uv("increment",n)}(function(t,e=!0){(function(r){xl=r})(_l),qi(new pi("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new Lr(new LM(i.getProvider("auth-internal")),new BM(i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ht(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(f.options.projectId,p)}(l,r),l);return o=Object.assign({useFetchStreams:e},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),li(jx,"4.7.3",t),li(jx,"4.7.3","esm2017")})();const kA="@firebase/installations",vv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=1e4,PA=`w:${vv}`,jA="FIS_v2",LP="https://firebaseinstallations.googleapis.com/v1",VP=60*60*1e3,UP="installations",zP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fa=new Ga(UP,zP,BP);function LA(n){return n instanceof _i&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA({projectId:n}){return`${LP}/projects/${n}/installations`}function UA(n){return{token:n.token,requestStatus:2,expiresIn:HP(n.expiresIn),creationTime:Date.now()}}async function zA(n,t){const i=(await t.json()).error;return Fa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function BA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function FP(n,{refreshToken:t}){const e=BA(n);return e.append("Authorization",qP(t)),e}async function FA(n){const t=await n();return t.status>=500&&t.status<600?n():t}function HP(n){return Number(n.replace("s","000"))}function qP(n){return`${jA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=VA(n),r=BA(n),o=t.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:e,authVersion:jA,appId:n.appId,sdkVersion:PA},u={method:"POST",headers:r,body:JSON.stringify(l)},d=await FA(()=>fetch(i,u));if(d.ok){const f=await d.json();return{fid:f.fid||e,registrationStatus:2,refreshToken:f.refreshToken,authToken:UA(f.authToken)}}else throw await zA("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^[cdef][\w-]{21}$/,ny="";function WP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=KP(n);return QP.test(e)?e:ny}catch{return ny}}function KP(n){return $P(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Map;function GA(n,t){const e=Ff(n);$A(e,t),YP(e,t)}function $A(n,t){const e=qA.get(n);if(e)for(const i of e)i(t)}function YP(n,t){const e=XP();e&&e.postMessage({key:n,fid:t}),ZP()}let ka=null;function XP(){return!ka&&"BroadcastChannel"in self&&(ka=new BroadcastChannel("[Firebase] FID Change"),ka.onmessage=n=>{$A(n.data.key,n.data.fid)}),ka}function ZP(){qA.size===0&&ka&&(ka.close(),ka=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="firebase-installations-database",tj=1,Ha="firebase-installations-store";let dp=null;function _v(){return dp||(dp=wE(JP,tj,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Ha)}}})),dp}async function sf(n,t){const e=Ff(n),r=(await _v()).transaction(Ha,"readwrite"),o=r.objectStore(Ha),l=await o.get(e);return await o.put(t,e),await r.done,(!l||l.fid!==t.fid)&&GA(n,t.fid),t}async function QA(n){const t=Ff(n),i=(await _v()).transaction(Ha,"readwrite");await i.objectStore(Ha).delete(t),await i.done}async function Hf(n,t){const e=Ff(n),r=(await _v()).transaction(Ha,"readwrite"),o=r.objectStore(Ha),l=await o.get(e),u=t(l);return u===void 0?await o.delete(e):await o.put(u,e),await r.done,u&&(!l||l.fid!==u.fid)&&GA(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bv(n){let t;const e=await Hf(n.appConfig,i=>{const r=ej(i),o=nj(n,r);return t=o.registrationPromise,o.installationEntry});return e.fid===ny?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function ej(n){const t=n||{fid:WP(),registrationStatus:0};return WA(t)}function nj(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Fa.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=ij(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:sj(n)}:{installationEntry:t}}async function ij(n,t){try{const e=await GP(n,t);return sf(n.appConfig,e)}catch(e){throw LA(e)&&e.customData.serverCode===409?await QA(n.appConfig):await sf(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function sj(n){let t=await ww(n.appConfig);for(;t.registrationStatus===1;)await HA(100),t=await ww(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await bv(n);return i||e}return t}function ww(n){return Hf(n,t=>{if(!t)throw Fa.create("installation-not-found");return WA(t)})}function WA(n){return rj(n)?{fid:n.fid,registrationStatus:0}:n}function rj(n){return n.registrationStatus===1&&n.registrationTime+OA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj({appConfig:n,heartbeatServiceProvider:t},e){const i=oj(n,e),r=FP(n,e),o=t.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:PA,appId:n.appId}},u={method:"POST",headers:r,body:JSON.stringify(l)},d=await FA(()=>fetch(i,u));if(d.ok){const f=await d.json();return UA(f)}else throw await zA("Generate Auth Token",d)}function oj(n,{fid:t}){return`${VA(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xv(n,t=!1){let e;const i=await Hf(n.appConfig,o=>{if(!KA(o))throw Fa.create("not-registered");const l=o.authToken;if(!t&&uj(l))return o;if(l.requestStatus===1)return e=lj(n,t),o;{if(!navigator.onLine)throw Fa.create("app-offline");const u=dj(o);return e=cj(n,u),u}});return e?await e:i.authToken}async function lj(n,t){let e=await Tw(n.appConfig);for(;e.authToken.requestStatus===1;)await HA(100),e=await Tw(n.appConfig);const i=e.authToken;return i.requestStatus===0?xv(n,t):i}function Tw(n){return Hf(n,t=>{if(!KA(t))throw Fa.create("not-registered");const e=t.authToken;return fj(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function cj(n,t){try{const e=await aj(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return await sf(n.appConfig,i),e}catch(e){if(LA(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await QA(n.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await sf(n.appConfig,i)}throw e}}function KA(n){return n!==void 0&&n.registrationStatus===2}function uj(n){return n.requestStatus===2&&!hj(n)}function hj(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+VP}function dj(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function fj(n){return n.requestStatus===1&&n.requestTime+OA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(n){const t=n,{installationEntry:e,registrationPromise:i}=await bv(t);return i?i.catch(console.error):xv(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(n,t=!1){const e=n;return await pj(e),(await xv(e,t)).token}async function pj(n){const{registrationPromise:t}=await bv(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(n){if(!n||!n.options)throw fp("App Configuration");if(!n.name)throw fp("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw fp(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function fp(n){return Fa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="installations",vj="installations-internal",_j=n=>{const t=n.getProvider("app").getImmediate(),e=yj(t),i=$a(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},bj=n=>{const t=n.getProvider("app").getImmediate(),e=$a(t,YA).getImmediate();return{getId:()=>mj(e),getToken:r=>gj(e,r)}};function xj(){qi(new pi(YA,_j,"PUBLIC")),qi(new pi(vj,bj,"PRIVATE"))}xj();li(kA,vv);li(kA,vv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="analytics",wj="firebase_id",Tj="origin",Ej=60*1e3,Sj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new _f("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fn=new Ga("analytics","Analytics",Aj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(n){if(!n.startsWith(wv)){const t=Fn.create("invalid-gtag-resource",{gtagURL:n});return In.warn(t.message),""}return n}function XA(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function Rj(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function Ij(n,t){const e=Rj("firebase-js-sdk-policy",{createScriptURL:Cj}),i=document.createElement("script"),r=`${wv}?l=${n}&id=${t}`;i.src=e?e==null?void 0:e.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function Nj(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function Dj(n,t,e,i,r,o){const l=i[r];try{if(l)await t[l];else{const d=(await XA(e)).find(f=>f.measurementId===r);d&&await t[d.appId]}}catch(u){In.error(u)}n("config",r,o)}async function Mj(n,t,e,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const u=await XA(e);for(const d of l){const f=u.find(v=>v.measurementId===d),p=f&&t[f.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),n("event",i,r||{})}catch(o){In.error(o)}}function kj(n,t,e,i){async function r(o,...l){try{if(o==="event"){const[u,d]=l;await Mj(n,t,e,u,d)}else if(o==="config"){const[u,d]=l;await Dj(n,t,e,i,u,d)}else if(o==="consent"){const[u,d]=l;n("consent",u,d)}else if(o==="get"){const[u,d,f]=l;n("get",u,d,f)}else if(o==="set"){const[u]=l;n("set",u)}else n(o,...l)}catch(u){In.error(u)}}return r}function Oj(n,t,e,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=kj(o,n,t,e),{gtagCore:o,wrappedGtag:window[r]}}function Pj(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(wv)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=30,Lj=1e3;class Vj{constructor(t={},e=Lj){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const ZA=new Vj;function Uj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function zj(n){var t;const{appId:e,apiKey:i}=n,r={method:"GET",headers:Uj(i)},o=Sj.replace("{app-id}",e),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let u="";try{const d=await l.json();!((t=d.error)===null||t===void 0)&&t.message&&(u=d.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:u})}return l.json()}async function Bj(n,t=ZA,e){const{appId:i,apiKey:r,measurementId:o}=n.options;if(!i)throw Fn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw Fn.create("no-api-key")}const l=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new qj;return setTimeout(async()=>{u.abort()},Ej),JA({appId:i,apiKey:r,measurementId:o},l,u,t)}async function JA(n,{throttleEndTimeMillis:t,backoffCount:e},i,r=ZA){var o;const{appId:l,measurementId:u}=n;try{await Fj(i,t)}catch(d){if(u)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:u};throw d}try{const d=await zj(n);return r.deleteThrottleMetadata(l),d}catch(d){const f=d;if(!Hj(f)){if(r.deleteThrottleMetadata(l),u)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:u};throw d}const p=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?ox(e,r.intervalMillis,jj):ox(e,r.intervalMillis),v={throttleEndTimeMillis:Date.now()+p,backoffCount:e+1};return r.setThrottleMetadata(l,v),In.debug(`Calling attemptFetch again in ${p} millis`),JA(n,v,i,r)}}function Fj(n,t){return new Promise((e,i)=>{const r=Math.max(t-Date.now(),0),o=setTimeout(e,r);n.addEventListener(()=>{clearTimeout(o),i(Fn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Hj(n){if(!(n instanceof _i)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class qj{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Gj(n,t,e,i,r){if(r&&r.global){n("event",e,i);return}else{const o=await t,l=Object.assign(Object.assign({},i),{send_to:o});n("event",e,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(){if(vE())try{await _E()}catch(n){return In.warn(Fn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return In.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Qj(n,t,e,i,r,o,l){var u;const d=Bj(n);d.then(T=>{e[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>In.error(T)),t.push(d);const f=$j().then(T=>{if(T)return i.getId()}),[p,v]=await Promise.all([d,f]);Pj(o)||Ij(o,p.measurementId),r("js",new Date);const x=(u=l==null?void 0:l.config)!==null&&u!==void 0?u:{};return x[Tj]="firebase",x.update=!0,v!=null&&(x[wj]=v),r("config",p.measurementId,x),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(t){this.app=t}_delete(){return delete su[this.app.options.appId],Promise.resolve()}}let su={},Ew=[];const Sw={};let mp="dataLayer",Kj="gtag",Aw,t1,Cw=!1;function Yj(){const n=[];if(yE()&&n.push("This is a browser extension environment."),JI()||n.push("Cookies are not available."),n.length>0){const t=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),e=Fn.create("invalid-analytics-context",{errorInfo:t});In.warn(e.message)}}function Xj(n,t,e){Yj();const i=n.options.appId;if(!i)throw Fn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fn.create("no-api-key");if(su[i]!=null)throw Fn.create("already-exists",{id:i});if(!Cw){Nj(mp);const{wrappedGtag:o,gtagCore:l}=Oj(su,Ew,Sw,mp,Kj);t1=o,Aw=l,Cw=!0}return su[i]=Qj(n,Ew,Sw,t,Aw,mp,e),new Wj(n)}function Zj(n=wy()){n=Oe(n);const t=$a(n,rf);return t.isInitialized()?t.getImmediate():Jj(n)}function Jj(n,t={}){const e=$a(n,rf);if(e.isInitialized()){const r=e.getImmediate();if(il(t,e.getOptions()))return r;throw Fn.create("already-initialized")}return e.initialize({options:t})}function tL(n,t,e,i){n=Oe(n),Gj(t1,su[n.app.options.appId],t,e,i).catch(r=>In.error(r))}const Rw="@firebase/analytics",Iw="0.10.8";function eL(){qi(new pi(rf,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return Xj(i,r,e)},"PUBLIC")),qi(new pi("analytics-internal",n,"PRIVATE")),li(Rw,Iw),li(Rw,Iw,"esm2017");function n(t){try{const e=t.getProvider(rf).getImmediate();return{logEvent:(i,r,o)=>tL(e,i,r,o)}}catch(e){throw Fn.create("interop-component-reg-failed",{reason:e})}}}eL();const nL={apiKey:"AIzaSyAQVMls3e6y1TlA7qGAw3GqxZbLNYdLlyg",authDomain:"life-quest-d8995.firebaseapp.com",projectId:"life-quest-d8995",storageBucket:"life-quest-d8995.firebasestorage.app",messagingSenderId:"323449557827",appId:"1:323449557827:web:81d3dfd15c80fb665f95f6",measurementId:"G-SNKGY8D5XT"},Tv=TE(nL),qt=CM(Tv),Yt=vP(Tv);Zj(Tv);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Uu(n){return n+.5|0}const Ar=(n,t,e)=>Math.max(Math.min(n,e),t);function Kc(n){return Ar(Uu(n*2.55),0,255)}function kr(n){return Ar(Uu(n*255),0,255)}function ws(n){return Ar(Uu(n/2.55)/100,0,1)}function Nw(n){return Ar(Uu(n*100),0,100)}const oi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},iy=[..."0123456789ABCDEF"],iL=n=>iy[n&15],sL=n=>iy[(n&240)>>4]+iy[n&15],fd=n=>(n&240)>>4===(n&15),rL=n=>fd(n.r)&&fd(n.g)&&fd(n.b)&&fd(n.a);function aL(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&oi[n[1]]*17,g:255&oi[n[2]]*17,b:255&oi[n[3]]*17,a:t===5?oi[n[4]]*17:255}:(t===7||t===9)&&(e={r:oi[n[1]]<<4|oi[n[2]],g:oi[n[3]]<<4|oi[n[4]],b:oi[n[5]]<<4|oi[n[6]],a:t===9?oi[n[7]]<<4|oi[n[8]]:255})),e}const oL=(n,t)=>n<255?t(n):"";function lL(n){var t=rL(n)?iL:sL;return n?"#"+t(n.r)+t(n.g)+t(n.b)+oL(n.a,t):void 0}const cL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function e1(n,t,e){const i=t*Math.min(e,1-e),r=(o,l=(o+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function uL(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function hL(n,t,e){const i=e1(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function dL(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Ev(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),l=Math.min(e,i,r),u=(o+l)/2;let d,f,p;return o!==l&&(p=o-l,f=u>.5?p/(2-o-l):p/(o+l),d=dL(e,i,r,p,o),d=d*60+.5),[d|0,f||0,u]}function Sv(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(kr)}function Av(n,t,e){return Sv(e1,n,t,e)}function fL(n,t,e){return Sv(hL,n,t,e)}function mL(n,t,e){return Sv(uL,n,t,e)}function n1(n){return(n%360+360)%360}function gL(n){const t=cL.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Kc(+t[5]):kr(+t[5]));const r=n1(+t[2]),o=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=fL(r,o,l):t[1]==="hsv"?i=mL(r,o,l):i=Av(r,o,l),{r:i[0],g:i[1],b:i[2],a:e}}function pL(n,t){var e=Ev(n);e[0]=n1(e[0]+t),e=Av(e),n.r=e[0],n.g=e[1],n.b=e[2]}function yL(n){if(!n)return;const t=Ev(n),e=t[0],i=Nw(t[1]),r=Nw(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${ws(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Dw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Mw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vL(){const n={},t=Object.keys(Mw),e=Object.keys(Dw);let i,r,o,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],r=0;r<e.length;r++)o=e[r],u=u.replace(o,Dw[o]);o=parseInt(Mw[l],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let md;function _L(n){md||(md=vL(),md.transparent=[0,0,0,0]);const t=md[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const bL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xL(n){const t=bL.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?Kc(l):Ar(l*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Kc(i):Ar(i,0,255)),r=255&(t[4]?Kc(r):Ar(r,0,255)),o=255&(t[6]?Kc(o):Ar(o,0,255)),{r:i,g:r,b:o,a:e}}}function wL(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ws(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const gp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Fo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function TL(n,t,e){const i=Fo(ws(n.r)),r=Fo(ws(n.g)),o=Fo(ws(n.b));return{r:kr(gp(i+e*(Fo(ws(t.r))-i))),g:kr(gp(r+e*(Fo(ws(t.g))-r))),b:kr(gp(o+e*(Fo(ws(t.b))-o))),a:n.a+e*(t.a-n.a)}}function gd(n,t,e){if(n){let i=Ev(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Av(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function i1(n,t){return n&&Object.assign(t||{},n)}function kw(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=kr(n[3]))):(t=i1(n,{r:0,g:0,b:0,a:1}),t.a=kr(t.a)),t}function EL(n){return n.charAt(0)==="r"?xL(n):gL(n)}class Tu{constructor(t){if(t instanceof Tu)return t;const e=typeof t;let i;e==="object"?i=kw(t):e==="string"&&(i=aL(t)||_L(t)||EL(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=i1(this._rgb);return t&&(t.a=ws(t.a)),t}set rgb(t){this._rgb=kw(t)}rgbString(){return this._valid?wL(this._rgb):void 0}hexString(){return this._valid?lL(this._rgb):void 0}hslString(){return this._valid?yL(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const l=e===o?.5:e,u=2*l-1,d=i.a-r.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;o=1-f,i.r=255&f*i.r+o*r.r+.5,i.g=255&f*i.g+o*r.g+.5,i.b=255&f*i.b+o*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=TL(this._rgb,t._rgb,e)),this}clone(){return new Tu(this.rgb)}alpha(t){return this._rgb.a=kr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Uu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return gd(this._rgb,2,t),this}darken(t){return gd(this._rgb,2,-t),this}saturate(t){return gd(this._rgb,1,t),this}desaturate(t){return gd(this._rgb,1,-t),this}rotate(t){return pL(this._rgb,t),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _s(){}const SL=(()=>{let n=0;return()=>n++})();function ue(n){return n==null}function be(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ht(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function gn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ji(n,t){return gn(n)?n:t}function Vt(n,t){return typeof n>"u"?t:n}const AL=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function le(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ee(n,t,e,i){let r,o,l;if(be(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ht(n))for(l=Object.keys(n),o=l.length,r=0;r<o;r++)t.call(e,n[l[r]],l[r])}function af(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function of(n){if(be(n))return n.map(of);if(Ht(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=of(n[e[r]]);return t}return n}function s1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function CL(n,t,e,i){if(!s1(n))return;const r=t[n],o=e[n];Ht(r)&&Ht(o)?Eu(r,o,i):t[n]=of(o)}function Eu(n,t,e){const i=be(t)?t:[t],r=i.length;if(!Ht(n))return n;e=e||{};const o=e.merger||CL;let l;for(let u=0;u<r;++u){if(l=i[u],!Ht(l))continue;const d=Object.keys(l);for(let f=0,p=d.length;f<p;++f)o(d[f],n,l,e)}return n}function ru(n,t){return Eu(n,t,{merger:RL})}function RL(n,t,e){if(!s1(n))return;const i=t[n],r=e[n];Ht(i)&&Ht(r)?ru(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=of(r))}const Ow={"":n=>n,x:n=>n.x,y:n=>n.y};function IL(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function NL(n){const t=IL(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Su(n,t){return(Ow[t]||(Ow[t]=NL(t)))(n)}function Cv(n){return n.charAt(0).toUpperCase()+n.slice(1)}const lf=n=>typeof n<"u",Vr=n=>typeof n=="function",Pw=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function DL(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Ke=Math.PI,Hn=2*Ke,ML=Hn+Ke,cf=Number.POSITIVE_INFINITY,kL=Ke/180,zn=Ke/2,Sa=Ke/4,jw=Ke*2/3,r1=Math.log10,dl=Math.sign;function au(n,t,e){return Math.abs(n-t)<e}function Lw(n){const t=Math.round(n);n=au(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(r1(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function OL(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function PL(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function uf(n){return!PL(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function jL(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function LL(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Oa(n){return n*(Ke/180)}function Rv(n){return n*(180/Ke)}function Vw(n){if(!gn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function VL(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Ke&&(o+=Hn),{angle:o,distance:r}}function sy(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function UL(n,t){return(n-t+ML)%Hn-Ke}function Vn(n){return(n%Hn+Hn)%Hn}function a1(n,t,e,i){const r=Vn(n),o=Vn(t),l=Vn(e),u=Vn(o-r),d=Vn(l-r),f=Vn(r-o),p=Vn(r-l);return r===o||r===l||i&&o===l||u>d&&f<p}function As(n,t,e){return Math.max(t,Math.min(e,n))}function zL(n){return As(n,-32768,32767)}function Yo(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Iv(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const ry=(n,t,e,i)=>Iv(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),BL=(n,t,e)=>Iv(n,e,i=>n[i][t]>=e);function FL(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const o1=["push","pop","shift","splice","unshift"];function HL(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),o1.forEach(e=>{const i="_onData"+Cv(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const l=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function Uw(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(o1.forEach(o=>{delete n[o]}),delete n._chartjs)}function qL(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const l1=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function c1(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,l1.call(window,()=>{i=!1,n.apply(t,e)}))}}function GL(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const u1=n=>n==="start"?"left":n==="end"?"right":"center",Ln=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,$L=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,pd=n=>n===0||n===1,zw=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Hn/e)),Bw=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Hn/e)+1,ou={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*zn)+1,easeOutSine:n=>Math.sin(n*zn),easeInOutSine:n=>-.5*(Math.cos(Ke*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>pd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>pd(n)?n:zw(n,.075,.3),easeOutElastic:n=>pd(n)?n:Bw(n,.075,.3),easeInOutElastic(n){return pd(n)?n:n<.5?.5*zw(n*2,.1125,.45):.5+.5*Bw(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-ou.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ou.easeInBounce(n*2)*.5:ou.easeOutBounce(n*2-1)*.5+.5};function Nv(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Fw(n){return Nv(n)?n:new Tu(n)}function pp(n){return Nv(n)?n:new Tu(n).saturate(.5).darken(.1).hexString()}const QL=["x","y","borderWidth","radius","tension"],WL=["color","borderColor","backgroundColor"];function KL(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:WL},numbers:{type:"number",properties:QL}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function YL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Hw=new Map;function XL(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Hw.get(e);return i||(i=new Intl.NumberFormat(n,t),Hw.set(e,i)),i}function h1(n,t,e){return XL(t,e).format(n)}const ZL={values(n){return be(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),o=JL(n,e)}const l=r1(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),h1(n,i,d)}};function JL(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var d1={formatters:ZL};function tV(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:d1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const qa=Object.create(null),ay=Object.create(null);function lu(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function yp(n,t,e){return typeof t=="string"?Eu(lu(n,t),e):Eu(lu(n,""),t)}class eV{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>pp(r.backgroundColor),this.hoverBorderColor=(i,r)=>pp(r.borderColor),this.hoverColor=(i,r)=>pp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return yp(this,t,e)}get(t){return lu(this,t)}describe(t,e){return yp(ay,t,e)}override(t,e){return yp(qa,t,e)}route(t,e,i,r){const o=lu(this,t),l=lu(this,i),u="_"+e;Object.defineProperties(o,{[u]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[u],f=l[r];return Ht(d)?Object.assign({},f,d):Vt(d,f)},set(d){this[u]=d}}})}apply(t){t.forEach(e=>e(this))}}var we=new eV({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KL,YL,tV]);function nV(n){return!n||ue(n.size)||ue(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function hf(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function iV(n,t,e,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let l=0;const u=e.length;let d,f,p,v,x;for(d=0;d<u;d++)if(v=e[d],v!=null&&!be(v))l=hf(n,r,o,l,v);else if(be(v))for(f=0,p=v.length;f<p;f++)x=v[f],x!=null&&!be(x)&&(l=hf(n,r,o,l,x));n.restore();const T=o.length/2;if(T>e.length){for(d=0;d<T;d++)delete r[o[d]];o.splice(0,T)}return l}function Aa(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function qw(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function oy(n,t,e,i){f1(n,t,e,i,null)}function f1(n,t,e,i,r){let o,l,u,d,f,p,v,x;const T=t.pointStyle,C=t.rotation,S=t.radius;let A=(C||0)*kL;if(T&&typeof T=="object"&&(o=T.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(A),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(S)||S<=0)){switch(n.beginPath(),T){default:r?n.ellipse(e,i,r/2,S,0,0,Hn):n.arc(e,i,S,0,Hn),n.closePath();break;case"triangle":p=r?r/2:S,n.moveTo(e+Math.sin(A)*p,i-Math.cos(A)*S),A+=jw,n.lineTo(e+Math.sin(A)*p,i-Math.cos(A)*S),A+=jw,n.lineTo(e+Math.sin(A)*p,i-Math.cos(A)*S),n.closePath();break;case"rectRounded":f=S*.516,d=S-f,l=Math.cos(A+Sa)*d,v=Math.cos(A+Sa)*(r?r/2-f:d),u=Math.sin(A+Sa)*d,x=Math.sin(A+Sa)*(r?r/2-f:d),n.arc(e-v,i-u,f,A-Ke,A-zn),n.arc(e+x,i-l,f,A-zn,A),n.arc(e+v,i+u,f,A,A+zn),n.arc(e-x,i+l,f,A+zn,A+Ke),n.closePath();break;case"rect":if(!C){d=Math.SQRT1_2*S,p=r?r/2:d,n.rect(e-p,i-d,2*p,2*d);break}A+=Sa;case"rectRot":v=Math.cos(A)*(r?r/2:S),l=Math.cos(A)*S,u=Math.sin(A)*S,x=Math.sin(A)*(r?r/2:S),n.moveTo(e-v,i-u),n.lineTo(e+x,i-l),n.lineTo(e+v,i+u),n.lineTo(e-x,i+l),n.closePath();break;case"crossRot":A+=Sa;case"cross":v=Math.cos(A)*(r?r/2:S),l=Math.cos(A)*S,u=Math.sin(A)*S,x=Math.sin(A)*(r?r/2:S),n.moveTo(e-v,i-u),n.lineTo(e+v,i+u),n.moveTo(e+x,i-l),n.lineTo(e-x,i+l);break;case"star":v=Math.cos(A)*(r?r/2:S),l=Math.cos(A)*S,u=Math.sin(A)*S,x=Math.sin(A)*(r?r/2:S),n.moveTo(e-v,i-u),n.lineTo(e+v,i+u),n.moveTo(e+x,i-l),n.lineTo(e-x,i+l),A+=Sa,v=Math.cos(A)*(r?r/2:S),l=Math.cos(A)*S,u=Math.sin(A)*S,x=Math.sin(A)*(r?r/2:S),n.moveTo(e-v,i-u),n.lineTo(e+v,i+u),n.moveTo(e+x,i-l),n.lineTo(e-x,i+l);break;case"line":l=r?r/2:Math.cos(A)*S,u=Math.sin(A)*S,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(A)*(r?r/2:S),i+Math.sin(A)*S);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Cs(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function qf(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Gf(n){n.restore()}function sV(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function rV(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function aV(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ue(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function oV(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),l=t-o.actualBoundingBoxLeft,u=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,f=e+o.actualBoundingBoxDescent,p=r.strikethrough?(d+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(l,p),n.lineTo(u,p),n.stroke()}}function lV(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function fl(n,t,e,i,r,o={}){const l=be(t)?t:[t],u=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(n.save(),n.font=r.string,aV(n,o),d=0;d<l.length;++d)f=l[d],o.backdrop&&lV(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ue(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,e,i,o.maxWidth)),n.fillText(f,e,i,o.maxWidth),oV(n,e,i,f,o),i+=Number(r.lineHeight);n.restore()}function df(n,t){const{x:e,y:i,w:r,h:o,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*Ke,Ke,!0),n.lineTo(e,i+o-l.bottomLeft),n.arc(e+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,Ke,zn,!0),n.lineTo(e+r-l.bottomRight,i+o),n.arc(e+r-l.bottomRight,i+o-l.bottomRight,l.bottomRight,zn,0,!0),n.lineTo(e+r,i+l.topRight),n.arc(e+r-l.topRight,i+l.topRight,l.topRight,0,-zn,!0),n.lineTo(e+l.topLeft,i)}const cV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function hV(n,t){const e=(""+n).match(cV);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const dV=n=>+n||0;function m1(n,t){const e={},i=Ht(t),r=i?Object.keys(t):t,o=Ht(n)?i?l=>Vt(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of r)e[l]=dV(o(l));return e}function fV(n){return m1(n,{top:"y",right:"x",bottom:"y",left:"x"})}function el(n){return m1(n,["topLeft","topRight","bottomLeft","bottomRight"])}function wn(n){const t=fV(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function sn(n,t){n=n||{},t=t||we.font;let e=Vt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Vt(n.style,t.style);i&&!(""+i).match(uV)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Vt(n.family,t.family),lineHeight:hV(Vt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Vt(n.weight,t.weight),string:""};return r.string=nV(r),r}function yd(n,t,e,i){let r,o,l;for(r=0,o=n.length;r<o;++r)if(l=n[r],l!==void 0&&l!==void 0)return l}function mV(n,t,e){const{min:i,max:r}=n,o=AL(t,(r-i)/2),l=(u,d)=>e&&u===0?0:u+d;return{min:l(i,-Math.abs(o)),max:l(r,o)}}function $r(n,t){return Object.assign(Object.create(n),t)}function Dv(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=v1("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>Dv([u,...n],t,o,i)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete n[0][d],!0},get(u,d){return p1(u,d,()=>wV(d,t,n,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,d){return $w(u).includes(d)},ownKeys(u){return $w(u)},set(u,d,f){const p=u._storage||(u._storage=r());return u[d]=p[d]=f,delete u._keys,!0}})}function ml(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:g1(n,i),setContext:o=>ml(n,o,e,i),override:o=>ml(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,u){return p1(o,l,()=>pV(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,u){return n[l]=u,delete o[l],!0}})}function g1(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Vr(e)?e:()=>e,isIndexable:Vr(i)?i:()=>i}}const gV=(n,t)=>n?n+Cv(t):t,Mv=(n,t)=>Ht(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function p1(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function pV(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:l}=n;let u=i[t];return Vr(u)&&l.isScriptable(t)&&(u=yV(t,u,n,e)),be(u)&&u.length&&(u=vV(t,u,n,l.isIndexable)),Mv(t,u)&&(u=ml(u,r,o&&o[t],l)),u}function yV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let d=t(o,l||i);return u.delete(n),Mv(n,d)&&(d=kv(r._scopes,r,n,d)),d}function vV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:l,_descriptors:u}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ht(t[0])){const d=t,f=r._scopes.filter(p=>p!==d);t=[];for(const p of d){const v=kv(f,r,n,p);t.push(ml(v,o,l&&l[n],u))}}return t}function y1(n,t,e){return Vr(n)?n(t,e):n}const _V=(n,t)=>n===!0?t:typeof n=="string"?Su(t,n):void 0;function bV(n,t,e,i,r){for(const o of t){const l=_V(e,o);if(l){n.add(l);const u=y1(l._fallback,e,r);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function kv(n,t,e,i){const r=t._rootScopes,o=y1(t._fallback,e,i),l=[...n,...r],u=new Set;u.add(i);let d=Gw(u,l,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=Gw(u,l,o,d,i),d===null)?!1:Dv(Array.from(u),[""],r,o,()=>xV(t,e,i))}function Gw(n,t,e,i,r){for(;e;)e=bV(n,t,e,i,r);return e}function xV(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return be(r)&&Ht(e)?e:r||{}}function wV(n,t,e,i){let r;for(const o of t)if(r=v1(gV(o,n),e),typeof r<"u")return Mv(n,r)?kv(e,i,n,r):r}function v1(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function $w(n){let t=n._keys;return t||(t=n._keys=TV(n._scopes)),t}function TV(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function EV(n,t,e,i){const{iScale:r}=n,{key:o="r"}=this._parsing,l=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+e,p=t[f],l[u]={r:r.parse(Su(p,o),f)};return l}const SV=Number.EPSILON||1e-14,gl=(n,t)=>t<n.length&&!n[t].skip&&n[t],_1=n=>n==="x"?"y":"x";function AV(n,t,e,i){const r=n.skip?t:n,o=t,l=e.skip?t:e,u=sy(o,r),d=sy(l,o);let f=u/(u+d),p=d/(u+d);f=isNaN(f)?0:f,p=isNaN(p)?0:p;const v=i*f,x=i*p;return{previous:{x:o.x-v*(l.x-r.x),y:o.y-v*(l.y-r.y)},next:{x:o.x+x*(l.x-r.x),y:o.y+x*(l.y-r.y)}}}function CV(n,t,e){const i=n.length;let r,o,l,u,d,f=gl(n,0);for(let p=0;p<i-1;++p)if(d=f,f=gl(n,p+1),!(!d||!f)){if(au(t[p],0,SV)){e[p]=e[p+1]=0;continue}r=e[p]/t[p],o=e[p+1]/t[p],u=Math.pow(r,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),e[p]=r*l*t[p],e[p+1]=o*l*t[p])}}function RV(n,t,e="x"){const i=_1(e),r=n.length;let o,l,u,d=gl(n,0);for(let f=0;f<r;++f){if(l=u,u=d,d=gl(n,f+1),!u)continue;const p=u[e],v=u[i];l&&(o=(p-l[e])/3,u[`cp1${e}`]=p-o,u[`cp1${i}`]=v-o*t[f]),d&&(o=(d[e]-p)/3,u[`cp2${e}`]=p+o,u[`cp2${i}`]=v+o*t[f])}}function IV(n,t="x"){const e=_1(t),i=n.length,r=Array(i).fill(0),o=Array(i);let l,u,d,f=gl(n,0);for(l=0;l<i;++l)if(u=d,d=f,f=gl(n,l+1),!!d){if(f){const p=f[t]-d[t];r[l]=p!==0?(f[e]-d[e])/p:0}o[l]=u?f?dl(r[l-1])!==dl(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}CV(n,r,o),RV(n,o,t)}function vd(n,t,e){return Math.max(Math.min(n,e),t)}function NV(n,t){let e,i,r,o,l,u=Cs(n[0],t);for(e=0,i=n.length;e<i;++e)l=o,o=u,u=e<i-1&&Cs(n[e+1],t),o&&(r=n[e],l&&(r.cp1x=vd(r.cp1x,t.left,t.right),r.cp1y=vd(r.cp1y,t.top,t.bottom)),u&&(r.cp2x=vd(r.cp2x,t.left,t.right),r.cp2y=vd(r.cp2y,t.top,t.bottom)))}function DV(n,t,e,i,r){let o,l,u,d;if(t.spanGaps&&(n=n.filter(f=>!f.skip)),t.cubicInterpolationMode==="monotone")IV(n,r);else{let f=i?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)u=n[o],d=AV(f,u,n[Math.min(o+1,l-(i?0:1))%l],t.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,f=u}t.capBezierPoints&&NV(n,e)}function Ov(){return typeof window<"u"&&typeof document<"u"}function Pv(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ff(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const $f=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function MV(n,t){return $f(n).getPropertyValue(t)}const kV=["top","right","bottom","left"];function ja(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=kV[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const OV=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function PV(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let l=!1,u,d;if(OV(r,o,n.target))u=r,d=o;else{const f=t.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function Na(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=$f(e),o=r.boxSizing==="border-box",l=ja(r,"padding"),u=ja(r,"border","width"),{x:d,y:f,box:p}=PV(n,e),v=l.left+(p&&u.left),x=l.top+(p&&u.top);let{width:T,height:C}=t;return o&&(T-=l.width+u.width,C-=l.height+u.height),{x:Math.round((d-v)/T*e.width/i),y:Math.round((f-x)/C*e.height/i)}}function jV(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&Pv(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const l=o.getBoundingClientRect(),u=$f(o),d=ja(u,"border","width"),f=ja(u,"padding");t=l.width-f.width-d.width,e=l.height-f.height-d.height,i=ff(u.maxWidth,o,"clientWidth"),r=ff(u.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||cf,maxHeight:r||cf}}const _d=n=>Math.round(n*10)/10;function LV(n,t,e,i){const r=$f(n),o=ja(r,"margin"),l=ff(r.maxWidth,n,"clientWidth")||cf,u=ff(r.maxHeight,n,"clientHeight")||cf,d=jV(n,t,e);let{width:f,height:p}=d;if(r.boxSizing==="content-box"){const x=ja(r,"border","width"),T=ja(r,"padding");f-=T.width+x.width,p-=T.height+x.height}return f=Math.max(0,f-o.width),p=Math.max(0,i?f/i:p-o.height),f=_d(Math.min(f,l,d.maxWidth)),p=_d(Math.min(p,u,d.maxHeight)),f&&!p&&(p=_d(f/2)),(t!==void 0||e!==void 0)&&i&&d.height&&p>d.height&&(p=d.height,f=_d(Math.floor(p*i))),{width:f,height:p}}function Qw(n,t,e){const i=t||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==r||l.width!==o?(n.currentDevicePixelRatio=i,l.height=r,l.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const VV=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Ov()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Ww(n,t){const e=MV(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Da(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function UV(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function zV(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},l=Da(n,r,e),u=Da(r,o,e),d=Da(o,t,e),f=Da(l,u,e),p=Da(u,d,e);return Da(f,p,e)}const BV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},FV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function nl(n,t,e){return n?BV(t,e):FV()}function b1(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function x1(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function w1(n){return n==="angle"?{between:a1,compare:UL,normalize:Vn}:{between:Yo,compare:(t,e)=>t-e,normalize:t=>t}}function Kw({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function HV(n,t,e){const{property:i,start:r,end:o}=e,{between:l,normalize:u}=w1(i),d=t.length;let{start:f,end:p,loop:v}=n,x,T;if(v){for(f+=d,p+=d,x=0,T=d;x<T&&l(u(t[f%d][i]),r,o);++x)f--,p--;f%=d,p%=d}return p<f&&(p+=d),{start:f,end:p,loop:v,style:n.style}}function T1(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,l=t.length,{compare:u,between:d,normalize:f}=w1(i),{start:p,end:v,loop:x,style:T}=HV(n,t,e),C=[];let S=!1,A=null,L,G,F;const Y=()=>d(r,F,L)&&u(r,F)!==0,X=()=>u(o,L)===0||d(o,F,L),Z=()=>S||Y(),O=()=>!S||X();for(let N=p,D=p;N<=v;++N)G=t[N%l],!G.skip&&(L=f(G[i]),L!==F&&(S=d(L,r,o),A===null&&Z()&&(A=u(L,r)===0?N:D),A!==null&&O()&&(C.push(Kw({start:A,end:N,loop:x,count:l,style:T})),A=null),D=N,F=L));return A!==null&&C.push(Kw({start:A,end:v,loop:x,count:l,style:T})),C}function E1(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=T1(i[r],n.points,t);o.length&&e.push(...o)}return e}function qV(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function GV(n,t,e,i){const r=n.length,o=[];let l=t,u=n[t],d;for(d=t+1;d<=e;++d){const f=n[d%r];f.skip||f.stop?u.skip||(i=!1,o.push({start:t%r,end:(d-1)%r,loop:i}),t=l=f.stop?d:null):(l=d,u.skip&&(t=d)),u=f}return l!==null&&o.push({start:t%r,end:l%r,loop:i}),o}function $V(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:l,end:u}=qV(e,r,o,i);if(i===!0)return Yw(n,[{start:l,end:u,loop:o}],e,t);const d=u<l?u+r:u,f=!!n._fullLoop&&l===0&&u===r-1;return Yw(n,GV(e,l,d,f),e,t)}function Yw(n,t,e,i){return!i||!i.setContext||!e?t:QV(n,t,e,i)}function QV(n,t,e,i){const r=n._chart.getContext(),o=Xw(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,d=e.length,f=[];let p=o,v=t[0].start,x=v;function T(C,S,A,L){const G=u?-1:1;if(C!==S){for(C+=d;e[C%d].skip;)C-=G;for(;e[S%d].skip;)S+=G;C%d!==S%d&&(f.push({start:C%d,end:S%d,loop:A,style:L}),p=L,v=S%d)}}for(const C of t){v=u?v:C.start;let S=e[v%d],A;for(x=v+1;x<=C.end;x++){const L=e[x%d];A=Xw(i.setContext($r(r,{type:"segment",p0:S,p1:L,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:l}))),WV(A,p)&&T(v,x-1,C.loop,p),S=L,p=A}v<x-1&&T(v,x-1,C.loop,p)}return f}function Xw(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function WV(n,t){if(!t)return!1;const e=[],i=function(r,o){return Nv(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class KV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],l=e.duration;o.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=l1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,d;for(;l>=0;--l)d=o[l],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),u=!0):(o[l]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var bs=new KV;const Zw="transparent",YV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Fw(n||Zw),r=i.valid&&Fw(t||Zw);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class XV{constructor(t,e,i,r){const o=e[i];r=yd([t.to,r,o,t.from]);const l=yd([t.from,o,r]);this._active=!0,this._fn=t.fn||YV[t.type||typeof l],this._easing=ou[t.easing]||ou.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=yd([t.to,e,r,t.from]),this._from=yd([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,l=this._loop,u=this._to;let d;if(this._active=o!==u&&(l||e<i),!this._active){this._target[r]=u,this._notify(!0);return}if(e<0){this._target[r]=o;return}d=e/i%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(o,u,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class S1{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ht(t))return;const e=Object.keys(we.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ht(o))return;const l={};for(const u of e)l[u]=o[u];(be(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,r=JV(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&ZV(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(t,e));continue}const p=e[f];let v=o[f];const x=i.get(f);if(v)if(x&&v.active()){v.update(x,p,u);continue}else v.cancel();if(!x||!x.duration){t[f]=p;continue}o[f]=v=new XV(x,t,f,p),r.push(v)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return bs.add(this._chart,i),!0}}function ZV(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function JV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Jw(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function t4(n,t,e){if(e===!1)return!1;const i=Jw(n,e),r=Jw(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function e4(n){let t,e,i,r;return Ht(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function A1(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function tT(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let l,u,d,f;if(t===null)return;let p=!1;for(l=0,u=r.length;l<u;++l){if(d=+r[l],d===e){if(p=!0,i.all)continue;break}f=n.values[d],gn(f)&&(o||t===0||dl(t)===dl(f))&&(t+=f)}return!p&&!i.all?0:t}function n4(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let d,f,p;for(d=0,f=l.length;d<f;++d)p=l[d],u[d]={[r]:p,[o]:n[p]};return u}function vp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function i4(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function s4(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function r4(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function eT(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function nT(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:l,index:u}=i,d=o.axis,f=l.axis,p=i4(o,l,i),v=t.length;let x;for(let T=0;T<v;++T){const C=t[T],{[d]:S,[f]:A}=C,L=C._stacks||(C._stacks={});x=L[f]=r4(r,p,S),x[u]=A,x._top=eT(x,l,!0,i.type),x._bottom=eT(x,l,!1,i.type);const G=x._visualValues||(x._visualValues={});G[u]=A}}function _p(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function a4(n,t){return $r(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function o4(n,t,e){return $r(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function jc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const bp=n=>n==="reset"||n==="none",iT=(n,t)=>t?n:Object.assign({},n),l4=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:A1(e,!0),values:null};class cu{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=vp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&jc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(v,x,T,C)=>v==="x"?x:v==="r"?C:T,o=e.xAxisID=Vt(i.xAxisID,_p(t,"x")),l=e.yAxisID=Vt(i.yAxisID,_p(t,"y")),u=e.rAxisID=Vt(i.rAxisID,_p(t,"r")),d=e.indexAxis,f=e.iAxisID=r(d,o,l,u),p=e.vAxisID=r(d,l,o,u);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Uw(this._data,this),t._stacked&&jc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ht(e)){const r=this._cachedMeta;this._data=n4(e,r)}else if(i!==e){if(i){Uw(i,this);const r=this._cachedMeta;jc(r),r._parsed=[]}e&&Object.isExtensible(e)&&HL(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=vp(e.vScale,e),e.stack!==i.stack&&(r=!0,jc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(nT(this,e._parsed),e._stacked=vp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:l}=i,u=o.axis;let d=t===0&&e===r.length?!0:i._sorted,f=t>0&&i._parsed[t-1],p,v,x;if(this._parsing===!1)i._parsed=r,i._sorted=!0,x=r;else{be(r[t])?x=this.parseArrayData(i,r,t,e):Ht(r[t])?x=this.parseObjectData(i,r,t,e):x=this.parsePrimitiveData(i,r,t,e);const T=()=>v[u]===null||f&&v[u]<f[u];for(p=0;p<e;++p)i._parsed[p+t]=v=x[p],d&&(T()&&(d=!1),f=v);i._sorted=d}l&&nT(this,x)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:l}=t,u=o.axis,d=l.axis,f=o.getLabels(),p=o===l,v=new Array(r);let x,T,C;for(x=0,T=r;x<T;++x)C=x+i,v[x]={[u]:p||o.parse(f[C],C),[d]:l.parse(e[C],C)};return v}parseArrayData(t,e,i,r){const{xScale:o,yScale:l}=t,u=new Array(r);let d,f,p,v;for(d=0,f=r;d<f;++d)p=d+i,v=e[p],u[d]={x:o.parse(v[0],p),y:l.parse(v[1],p)};return u}parseObjectData(t,e,i,r){const{xScale:o,yScale:l}=t,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(r);let p,v,x,T;for(p=0,v=r;p<v;++p)x=p+i,T=e[x],f[p]={x:o.parse(Su(T,u),x),y:l.parse(Su(T,d),x)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,l=e[t.axis],u={keys:A1(r,!0),values:e._stacks[t.axis]._visualValues};return tT(u,l,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let l=o===null?NaN:o;const u=r&&i._stacks[e.axis];r&&u&&(r.values=u,l=tT(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,l=r.length,u=this._getOtherScale(t),d=l4(e,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:v}=s4(u);let x,T;function C(){T=r[x];const S=T[u.axis];return!gn(T[t.axis])||p>S||v<S}for(x=0;x<l&&!(!C()&&(this.updateRangeFromParsed(f,t,T,d),o));++x);if(o){for(x=l-1;x>=0;--x)if(!C()){this.updateRangeFromParsed(f,t,T,d);break}}return f}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,l;for(r=0,o=e.length;r<o;++r)l=e[r][t.axis],gn(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=e4(Vt(this.options.clip,t4(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||r.length-u,f=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,o,u,d),p=u;p<u+d;++p){const v=r[p];v.hidden||(v.active&&f?l.push(v):v.draw(t,o))}for(p=0;p<l.length;++p)l[p].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];o=l.$context||(l.$context=o4(this.getContext(),t,l)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=a4(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,l=t+"-"+e,u=o[l],d=this.enableOptionSharing&&lf(i);if(u)return iT(u,d);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,t),v=r?[`${t}Hover`,"hover",t,""]:[t,""],x=f.getOptionScopes(this.getDataset(),p),T=Object.keys(we.elements[t]),C=()=>this.getContext(i,r,e),S=f.resolveNamedOptions(x,T,C,v);return S.$shared&&(S.$shared=d,o[l]=Object.freeze(iT(S,d))),S}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,l=`animation-${e}`,u=o[l];if(u)return u;let d;if(r.options.animation!==!1){const p=this.chart.config,v=p.datasetAnimationScopeKeys(this._type,e),x=p.getOptionScopes(this.getDataset(),v);d=p.createResolver(x,this.getContext(t,i,e))}const f=new S1(r,d&&d.animations);return d&&d._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||bp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:l}}updateElement(t,e,i,r){bp(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!bp(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const r=i.length,o=e.length,l=Math.min(o,r);l&&this.parse(0,l),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,l=t+e;let u;const d=f=>{for(f.length+=e,u=f.length-1;u>=l;u--)f[u]=f[u-e]};for(d(o),u=t;u<l;++u)o[u]=new this.dataElementType;this._parsing&&d(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&jc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Nt(cu,"defaults",{}),Nt(cu,"datasetElementType",null),Nt(cu,"dataElementType",null);class Ld extends cu{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return EV.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],o=e.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===r.length,options:l};this.updateElement(i,void 0,u,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const o=this._cachedMeta.rScale,l=r==="reset";for(let u=e;u<e+i;u++){const d=t[u],f=this.resolveDataElementOptions(u,d.active?"active":r),p=o.getPointPositionForValue(u,this.getParsed(u).r),v=l?o.xCenter:p.x,x=l?o.yCenter:p.y,T={x:v,y:x,angle:p.angle,skip:isNaN(v)||isNaN(x),options:f};this.updateElement(d,u,T,r)}}}Nt(Ld,"id","radar"),Nt(Ld,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Nt(Ld,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function Ca(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jv{constructor(t){Nt(this,"options");this.options=t||{}}static override(t){Object.assign(jv.prototype,t)}init(){}formats(){return Ca()}parse(){return Ca()}format(){return Ca()}add(){return Ca()}diff(){return Ca()}startOf(){return Ca()}endOf(){return Ca()}}var c4={_date:jv};function u4(n,t,e,i){const{controller:r,data:o,_sorted:l}=n,u=r._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&o.length){const f=u._reversePixels?BL:ry;if(i){if(r._sharedOptions){const p=o[0],v=typeof p.getRange=="function"&&p.getRange(t);if(v){const x=f(o,t,e-v),T=f(o,t,e+v);return{lo:x.lo,hi:T.hi}}}}else{const p=f(o,t,e);if(d){const{vScale:v}=r._cachedMeta,{_parsed:x}=n,T=x.slice(0,p.lo+1).reverse().findIndex(S=>!ue(S[v.axis]));p.lo-=Math.max(0,T);const C=x.slice(p.hi).findIndex(S=>!ue(S[v.axis]));p.hi+=Math.max(0,C)}return p}}return{lo:0,hi:o.length-1}}function Qf(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,d=o.length;u<d;++u){const{index:f,data:p}=o[u],{lo:v,hi:x}=u4(o[u],t,l,r);for(let T=v;T<=x;++T){const C=p[T];C.skip||i(C,f,T)}}}function h4(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,l=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function xp(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||Qf(n,e,t,function(u,d,f){!r&&!Cs(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&o.push({element:u,datasetIndex:d,index:f})},!0),o}function d4(n,t,e,i){let r=[];function o(l,u,d){const{startAngle:f,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:v}=VL(l,{x:t.x,y:t.y});a1(v,f,p)&&r.push({element:l,datasetIndex:u,index:d})}return Qf(n,e,t,o),r}function f4(n,t,e,i,r,o){let l=[];const u=h4(e);let d=Number.POSITIVE_INFINITY;function f(p,v,x){const T=p.inRange(t.x,t.y,r);if(i&&!T)return;const C=p.getCenterPoint(r);if(!(!!o||n.isPointInArea(C))&&!T)return;const A=u(t,C);A<d?(l=[{element:p,datasetIndex:v,index:x}],d=A):A===d&&l.push({element:p,datasetIndex:v,index:x})}return Qf(n,e,t,f),l}function wp(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?d4(n,t,e,r):f4(n,t,e,i,r,o)}function sT(n,t,e,i,r){const o=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return Qf(n,e,t,(d,f,p)=>{d[l]&&d[l](t[e],r)&&(o.push({element:d,datasetIndex:f,index:p}),u=u||d.inRange(t.x,t.y,r))}),i&&!u?[]:o}var m4={modes:{index(n,t,e,i){const r=Na(t,n),o=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?xp(n,r,o,i,l):wp(n,r,o,!1,i,l),d=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const p=u[0].index,v=f.data[p];v&&!v.skip&&d.push({element:v,datasetIndex:f.index,index:p})}),d):[]},dataset(n,t,e,i){const r=Na(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?xp(n,r,o,i,l):wp(n,r,o,!1,i,l);if(u.length>0){const d=u[0].datasetIndex,f=n.getDatasetMeta(d).data;u=[];for(let p=0;p<f.length;++p)u.push({element:f[p],datasetIndex:d,index:p})}return u},point(n,t,e,i){const r=Na(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;return xp(n,r,o,i,l)},nearest(n,t,e,i){const r=Na(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;return wp(n,r,o,e.intersect,i,l)},x(n,t,e,i){const r=Na(t,n);return sT(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Na(t,n);return sT(n,r,"y",e.intersect,i)}}};const C1=["left","top","right","bottom"];function Lc(n,t){return n.filter(e=>e.pos===t)}function rT(n,t){return n.filter(e=>C1.indexOf(e.pos)===-1&&e.box.axis===t)}function Vc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function g4(n){const t=[];let e,i,r,o,l,u;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:l,stackWeight:u=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&o+l,stackWeight:u});return t}function p4(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!C1.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return t}function y4(n,t){const e=p4(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,l,u;for(o=0,l=n.length;o<l;++o){u=n[o];const{fullSize:d}=u.box,f=e[u.stack],p=f&&u.stackWeight/f.weight;u.horizontal?(u.width=p?p*i:d&&t.availableWidth,u.height=r):(u.width=i,u.height=p?p*r:d&&t.availableHeight)}return e}function v4(n){const t=g4(n),e=Vc(t.filter(f=>f.box.fullSize),!0),i=Vc(Lc(t,"left"),!0),r=Vc(Lc(t,"right")),o=Vc(Lc(t,"top"),!0),l=Vc(Lc(t,"bottom")),u=rT(t,"x"),d=rT(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(d).concat(l).concat(u),chartArea:Lc(t,"chartArea"),vertical:i.concat(r).concat(d),horizontal:o.concat(l).concat(u)}}function aT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function R1(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function _4(n,t,e,i){const{pos:r,box:o}=e,l=n.maxPadding;if(!Ht(r)){e.size&&(n[r]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[r]+=e.size}o.getPadding&&R1(l,o.getPadding());const u=Math.max(0,t.outerWidth-aT(l,n,"left","right")),d=Math.max(0,t.outerHeight-aT(l,n,"top","bottom")),f=u!==n.w,p=d!==n.h;return n.w=u,n.h=d,e.horizontal?{same:f,other:p}:{same:p,other:f}}function b4(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function x4(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{o[l]=Math.max(t[l],e[l])}),o}return i(n?["left","right"]:["top","bottom"])}function Yc(n,t,e,i){const r=[];let o,l,u,d,f,p;for(o=0,l=n.length,f=0;o<l;++o){u=n[o],d=u.box,d.update(u.width||t.w,u.height||t.h,x4(u.horizontal,t));const{same:v,other:x}=_4(t,e,u,i);f|=v&&r.length,p=p||x,d.fullSize||r.push(u)}return f&&Yc(r,t,e,i)||p}function bd(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function oT(n,t,e,i){const r=e.padding;let{x:o,y:l}=t;for(const u of n){const d=u.box,f=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/f.weight||1;if(u.horizontal){const v=t.w*p,x=f.size||d.height;lf(f.start)&&(l=f.start),d.fullSize?bd(d,r.left,l,e.outerWidth-r.right-r.left,x):bd(d,t.left+f.placed,l,v,x),f.start=l,f.placed+=v,l=d.bottom}else{const v=t.h*p,x=f.size||d.width;lf(f.start)&&(o=f.start),d.fullSize?bd(d,o,r.top,x,e.outerHeight-r.bottom-r.top):bd(d,o,t.top+f.placed,x,v),f.start=o,f.placed+=v,o=d.right}}t.x=o,t.y=l}var Cr={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=wn(n.options.layout.padding),o=Math.max(t-r.width,0),l=Math.max(e-r.height,0),u=v4(n.boxes),d=u.vertical,f=u.horizontal;ee(n.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const p=d.reduce((S,A)=>A.box.options&&A.box.options.display===!1?S:S+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/p,hBoxMaxHeight:l/2}),x=Object.assign({},r);R1(x,wn(i));const T=Object.assign({maxPadding:x,w:o,h:l,x:r.left,y:r.top},r),C=y4(d.concat(f),v);Yc(u.fullSize,T,v,C),Yc(d,T,v,C),Yc(f,T,v,C)&&Yc(d,T,v,C),b4(T),oT(u.leftAndTop,T,v,C),T.x+=T.w,T.y+=T.h,oT(u.rightAndBottom,T,v,C),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},ee(u.chartArea,S=>{const A=S.box;Object.assign(A,n.chartArea),A.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class I1{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class w4 extends I1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Vd="$chartjs",T4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lT=n=>n===null||n==="";function E4(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Vd]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",lT(r)){const o=Ww(n,"width");o!==void 0&&(n.width=o)}if(lT(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=Ww(n,"height");o!==void 0&&(n.height=o)}return n}const N1=VV?{passive:!0}:!1;function S4(n,t,e){n&&n.addEventListener(t,e,N1)}function A4(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,N1)}function C4(n,t){const e=T4[n.type]||n.type,{x:i,y:r}=Na(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function mf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function R4(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||mf(u.addedNodes,i),l=l&&!mf(u.removedNodes,i);l&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function I4(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||mf(u.removedNodes,i),l=l&&!mf(u.addedNodes,i);l&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Au=new Map;let cT=0;function D1(){const n=window.devicePixelRatio;n!==cT&&(cT=n,Au.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function N4(n,t){Au.size||window.addEventListener("resize",D1),Au.set(n,t)}function D4(n){Au.delete(n),Au.size||window.removeEventListener("resize",D1)}function M4(n,t,e){const i=n.canvas,r=i&&Pv(i);if(!r)return;const o=c1((u,d)=>{const f=r.clientWidth;e(u,d),f<r.clientWidth&&e()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,p=d.contentRect.height;f===0&&p===0||o(f,p)});return l.observe(r),N4(n,o),l}function Tp(n,t,e){e&&e.disconnect(),t==="resize"&&D4(n)}function k4(n,t,e){const i=n.canvas,r=c1(o=>{n.ctx!==null&&e(C4(o,n))},n);return S4(i,t,r),r}class O4 extends I1{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(E4(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Vd])return!1;const i=e[Vd].initial;["height","width"].forEach(o=>{const l=i[o];ue(l)?e.removeAttribute(o):e.setAttribute(o,l)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Vd],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),l={attach:R4,detach:I4,resize:M4}[e]||k4;r[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Tp,detach:Tp,resize:Tp}[e]||A4)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return LV(t,e,i,r)}isAttached(t){const e=t&&Pv(t);return!!(e&&e.isConnected)}}function P4(n){return!Ov()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?w4:O4}class Ur{constructor(){Nt(this,"x");Nt(this,"y");Nt(this,"active",!1);Nt(this,"options");Nt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return uf(this.x)&&uf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}Nt(Ur,"defaults",{}),Nt(Ur,"defaultRoutes");function j4(n,t){const e=n.options.ticks,i=L4(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?U4(t):[],l=o.length,u=o[0],d=o[l-1],f=[];if(l>r)return z4(t,f,o,l/r),f;const p=V4(o,t,r);if(l>0){let v,x;const T=l>1?Math.round((d-u)/(l-1)):null;for(xd(t,f,p,ue(T)?0:u-T,u),v=0,x=l-1;v<x;v++)xd(t,f,p,o[v],o[v+1]);return xd(t,f,p,d,ue(T)?t.length:d+T),f}return xd(t,f,p),f}function L4(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function V4(n,t,e){const i=B4(n),r=t.length/e;if(!i)return Math.max(r,1);const o=OL(i);for(let l=0,u=o.length-1;l<u;l++){const d=o[l];if(d>r)return d}return Math.max(r,1)}function U4(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function z4(n,t,e,i){let r=0,o=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===o&&(t.push(n[l]),r++,o=e[r*i])}function xd(n,t,e,i,r){const o=Vt(i,0),l=Math.min(Vt(r,n.length),n.length);let u=0,d,f,p;for(e=Math.ceil(e),r&&(d=r-i,e=d/Math.floor(d/e)),p=o;p<0;)u++,p=Math.round(o+u*e);for(f=Math.max(o,0);f<l;f++)f===p&&(t.push(n[f]),u++,p=Math.round(o+u*e))}function B4(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const F4=n=>n==="left"?"right":n==="right"?"left":n,uT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,hT=(n,t)=>Math.min(t||n,n);function dT(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function H4(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,l=n._endPixel,u=1e-6;let d=n.getPixelForTick(r),f;if(!(e&&(i===1?f=Math.max(d-o,l-d):t===0?f=(n.getPixelForTick(1)-d)/2:f=(d-n.getPixelForTick(r-1))/2,d+=r<t?f:-f,d<o-u||d>l+u)))return d}function q4(n,t){ee(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Uc(n){return n.drawTicks?n.tickLength:0}function fT(n,t){if(!n.display)return 0;const e=sn(n.font,t),i=wn(n.padding);return(be(n.text)?n.text.length:1)*e.lineHeight+i.height}function G4(n,t){return $r(n,{scale:t,type:"scale"})}function $4(n,t,e){return $r(n,{tick:e,index:t,type:"tick"})}function Q4(n,t,e){let i=u1(n);return(e&&t!=="right"||!e&&t==="right")&&(i=F4(i)),i}function W4(n,t,e,i){const{top:r,left:o,bottom:l,right:u,chart:d}=n,{chartArea:f,scales:p}=d;let v=0,x,T,C;const S=l-r,A=u-o;if(n.isHorizontal()){if(T=Ln(i,o,u),Ht(e)){const L=Object.keys(e)[0],G=e[L];C=p[L].getPixelForValue(G)+S-t}else e==="center"?C=(f.bottom+f.top)/2+S-t:C=uT(n,e,t);x=u-o}else{if(Ht(e)){const L=Object.keys(e)[0],G=e[L];T=p[L].getPixelForValue(G)-A+t}else e==="center"?T=(f.left+f.right)/2-A+t:T=uT(n,e,t);C=Ln(i,l,r),v=e==="left"?-zn:zn}return{titleX:T,titleY:C,maxWidth:x,rotation:v}}class zu extends Ur{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=ji(t,Number.POSITIVE_INFINITY),e=ji(e,Number.NEGATIVE_INFINITY),i=ji(i,Number.POSITIVE_INFINITY),r=ji(r,Number.NEGATIVE_INFINITY),{min:ji(t,i),max:ji(e,r),minDefined:gn(t),maxDefined:gn(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),l;if(r&&o)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,t),r||(e=Math.min(e,l.min)),o||(i=Math.max(i,l.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:ji(e,ji(i,e)),max:ji(i,ji(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=mV(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?dT(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=j4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),le(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=le(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=hT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let l=r,u,d,f;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),v=p.widest.width,x=p.highest.height,T=As(this.chart.width-v,0,this.maxWidth);u=t.offset?this.maxWidth/i:T/(i-1),v+6>u&&(u=T/(i-(t.offset?.5:1)),d=this.maxHeight-Uc(t.grid)-e.padding-fT(t.title,this.chart.options.font),f=Math.sqrt(v*v+x*x),l=Rv(Math.min(Math.asin(As((p.highest.height+6)/u,-1,1)),Math.asin(As(d/f,-1,1))-Math.asin(As(x/f,-1,1)))),l=Math.max(r,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=fT(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Uc(o)+d):(t.height=this.maxHeight,t.width=Uc(o)+d),i.display&&this.ticks.length){const{first:f,last:p,widest:v,highest:x}=this._getLabelSizes(),T=i.padding*2,C=Oa(this.labelRotation),S=Math.cos(C),A=Math.sin(C);if(u){const L=i.mirror?0:A*v.width+S*x.height;t.height=Math.min(this.maxHeight,t.height+L+T)}else{const L=i.mirror?0:S*v.width+A*x.height;t.width=Math.min(this.maxWidth,t.width+L+T)}this._calculatePadding(f,p,A,S)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,T=0;d?f?(x=r*t.width,T=i*e.height):(x=i*t.height,T=r*e.width):o==="start"?T=e.width:o==="end"?x=t.width:o!=="inner"&&(x=t.width/2,T=e.width/2),this.paddingLeft=Math.max((x-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((T-v+l)*this.width/(this.width-v),0)}else{let p=e.height/2,v=t.height/2;o==="start"?(p=0,v=t.height):o==="end"&&(p=e.height,v=0),this.paddingTop=p+l,this.paddingBottom=v+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ue(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=dT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,l=[],u=[],d=Math.floor(e/hT(e,i));let f=0,p=0,v,x,T,C,S,A,L,G,F,Y,X;for(v=0;v<e;v+=d){if(C=t[v].label,S=this._resolveTickFontOptions(v),r.font=A=S.string,L=o[A]=o[A]||{data:{},gc:[]},G=S.lineHeight,F=Y=0,!ue(C)&&!be(C))F=hf(r,L.data,L.gc,F,C),Y=G;else if(be(C))for(x=0,T=C.length;x<T;++x)X=C[x],!ue(X)&&!be(X)&&(F=hf(r,L.data,L.gc,F,X),Y+=G);l.push(F),u.push(Y),f=Math.max(F,f),p=Math.max(Y,p)}q4(o,e);const Z=l.indexOf(f),O=u.indexOf(p),N=D=>({width:l[D]||0,height:u[D]||0});return{first:N(0),last:N(e-1),widest:N(Z),highest:N(O),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zL(this._alignToPixels?Aa(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=$4(this.getContext(),t,i))}return this.$context||(this.$context=G4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Oa(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),l=t.autoSkipPadding||0,u=o?o.widest.width+l:0,d=o?o.highest.height+l:0;return this.isHorizontal()?d*i>u*r?u/i:d/r:d*r<u*i?d/i:u/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:l,border:u}=r,d=o.offset,f=this.isHorizontal(),v=this.ticks.length+(d?1:0),x=Uc(o),T=[],C=u.setContext(this.getContext()),S=C.display?C.width:0,A=S/2,L=function(tt){return Aa(i,tt,S)};let G,F,Y,X,Z,O,N,D,k,j,U,M;if(l==="top")G=L(this.bottom),O=this.bottom-x,D=G-A,j=L(t.top)+A,M=t.bottom;else if(l==="bottom")G=L(this.top),j=t.top,M=L(t.bottom)-A,O=G+A,D=this.top+x;else if(l==="left")G=L(this.right),Z=this.right-x,N=G-A,k=L(t.left)+A,U=t.right;else if(l==="right")G=L(this.left),k=t.left,U=L(t.right)-A,Z=G+A,N=this.left+x;else if(e==="x"){if(l==="center")G=L((t.top+t.bottom)/2+.5);else if(Ht(l)){const tt=Object.keys(l)[0],ut=l[tt];G=L(this.chart.scales[tt].getPixelForValue(ut))}j=t.top,M=t.bottom,O=G+A,D=O+x}else if(e==="y"){if(l==="center")G=L((t.left+t.right)/2);else if(Ht(l)){const tt=Object.keys(l)[0],ut=l[tt];G=L(this.chart.scales[tt].getPixelForValue(ut))}Z=G-A,N=Z-x,k=t.left,U=t.right}const ft=Vt(r.ticks.maxTicksLimit,v),gt=Math.max(1,Math.ceil(v/ft));for(F=0;F<v;F+=gt){const tt=this.getContext(F),ut=o.setContext(tt),yt=u.setContext(tt),Pt=ut.lineWidth,V=ut.color,rt=yt.dash||[],dt=yt.dashOffset,ct=ut.tickWidth,lt=ut.tickColor,Et=ut.tickBorderDash||[],wt=ut.tickBorderDashOffset;Y=H4(this,F,d),Y!==void 0&&(X=Aa(i,Y,Pt),f?Z=N=k=U=X:O=D=j=M=X,T.push({tx1:Z,ty1:O,tx2:N,ty2:D,x1:k,y1:j,x2:U,y2:M,width:Pt,color:V,borderDash:rt,borderDashOffset:dt,tickWidth:ct,tickColor:lt,tickBorderDash:Et,tickBorderDashOffset:wt}))}return this._ticksLength=v,this._borderValue=G,T}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:p,mirror:v}=o,x=Uc(i.grid),T=x+p,C=v?-p:T,S=-Oa(this.labelRotation),A=[];let L,G,F,Y,X,Z,O,N,D,k,j,U,M="middle";if(r==="top")Z=this.bottom-C,O=this._getXAxisLabelAlignment();else if(r==="bottom")Z=this.top+C,O=this._getXAxisLabelAlignment();else if(r==="left"){const gt=this._getYAxisLabelAlignment(x);O=gt.textAlign,X=gt.x}else if(r==="right"){const gt=this._getYAxisLabelAlignment(x);O=gt.textAlign,X=gt.x}else if(e==="x"){if(r==="center")Z=(t.top+t.bottom)/2+T;else if(Ht(r)){const gt=Object.keys(r)[0],tt=r[gt];Z=this.chart.scales[gt].getPixelForValue(tt)+T}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")X=(t.left+t.right)/2-T;else if(Ht(r)){const gt=Object.keys(r)[0],tt=r[gt];X=this.chart.scales[gt].getPixelForValue(tt)}O=this._getYAxisLabelAlignment(x).textAlign}e==="y"&&(d==="start"?M="top":d==="end"&&(M="bottom"));const ft=this._getLabelSizes();for(L=0,G=u.length;L<G;++L){F=u[L],Y=F.label;const gt=o.setContext(this.getContext(L));N=this.getPixelForTick(L)+o.labelOffset,D=this._resolveTickFontOptions(L),k=D.lineHeight,j=be(Y)?Y.length:1;const tt=j/2,ut=gt.color,yt=gt.textStrokeColor,Pt=gt.textStrokeWidth;let V=O;l?(X=N,O==="inner"&&(L===G-1?V=this.options.reverse?"left":"right":L===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?f==="near"||S!==0?U=-j*k+k/2:f==="center"?U=-ft.highest.height/2-tt*k+k:U=-ft.highest.height+k/2:f==="near"||S!==0?U=k/2:f==="center"?U=ft.highest.height/2-tt*k:U=ft.highest.height-j*k,v&&(U*=-1),S!==0&&!gt.showLabelBackdrop&&(X+=k/2*Math.sin(S))):(Z=N,U=(1-j)*k/2);let rt;if(gt.showLabelBackdrop){const dt=wn(gt.backdropPadding),ct=ft.heights[L],lt=ft.widths[L];let Et=U-dt.top,wt=0-dt.left;switch(M){case"middle":Et-=ct/2;break;case"bottom":Et-=ct;break}switch(O){case"center":wt-=lt/2;break;case"right":wt-=lt;break;case"inner":L===G-1?wt-=lt:L>0&&(wt-=lt/2);break}rt={left:wt,top:Et,width:lt+dt.width,height:ct+dt.height,color:gt.backdropColor}}A.push({label:Y,font:D,textOffset:U,options:{rotation:S,color:ut,strokeColor:yt,strokeWidth:Pt,textAlign:V,textBaseline:M,translation:[X,Z],backdrop:rt}})}return A}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Oa(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,l=this._getLabelSizes(),u=t+o,d=l.widest.width;let f,p;return e==="left"?r?(p=this.right+o,i==="near"?f="left":i==="center"?(f="center",p+=d/2):(f="right",p+=d)):(p=this.right-u,i==="near"?f="right":i==="center"?(f="center",p-=d/2):(f="left",p=this.left)):e==="right"?r?(p=this.left+o,i==="near"?f="right":i==="center"?(f="center",p-=d/2):(f="left",p-=d)):(p=this.left+u,i==="near"?f="left":i==="center"?(f="center",p+=d/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,l;const u=(d,f,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(e.display)for(o=0,l=r.length;o<l;++o){const d=r[o];e.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,p,v,x;this.isHorizontal()?(f=Aa(t,this.left,l)-l/2,p=Aa(t,this.right,u)+u/2,v=x=d):(v=Aa(t,this.top,l)-l/2,x=Aa(t,this.bottom,u)+u/2,f=p=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(f,v),e.lineTo(p,x),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&qf(i,r);const o=this.getLabelItems(t);for(const l of o){const u=l.options,d=l.font,f=l.label,p=l.textOffset;fl(i,f,0,p,d,u)}r&&Gf(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=sn(i.font),l=wn(i.padding),u=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||Ht(e)?(d+=l.bottom,be(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=l.top;const{titleX:f,titleY:p,maxWidth:v,rotation:x}=W4(this,d,e,u);fl(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:x,textAlign:Q4(u,e,r),textBaseline:"middle",translation:[f,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Vt(t.grid&&t.grid.z,-1),r=Vt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zu.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,l;for(o=0,l=e.length;o<l;++o){const u=e[o];u[i]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return sn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class wd{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;X4(e)&&(i=this.register(e));const r=this.items,o=t.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,K4(t,l,i),this.override&&we.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in we[r]&&(delete we[r][i],this.override&&delete qa[i])}}function K4(n,t,e){const i=Eu(Object.create(null),[e?we.get(e):{},we.get(t),n.defaults]);we.set(t,i),n.defaultRoutes&&Y4(t,n.defaultRoutes),n.descriptors&&we.describe(t,n.descriptors)}function Y4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),d=l.join(".");we.route(o,r,d,u)})}function X4(n){return"id"in n&&"defaults"in n}class Z4{constructor(){this.controllers=new wd(cu,"datasets",!0),this.elements=new wd(Ur,"elements"),this.plugins=new wd(Object,"plugins"),this.scales=new wd(zu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ee(r,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const r=Cv(t);le(i["before"+r],[],i),e[t](i),le(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Vi=new Z4;class J4{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,e,i,r){r=r||{};for(const o of t){const l=o.plugin,u=l[i],d=[e,r,o.options];if(le(u,d,l)===!1&&r.cancelable)return!1}return!0}invalidate(){ue(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Vt(i.options&&i.options.plugins,{}),o=tU(i);return r===!1&&!e?[]:nU(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,l)=>o.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function tU(n){const t={},e=[],i=Object.keys(Vi.plugins.items);for(let o=0;o<i.length;o++)e.push(Vi.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const l=r[o];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function eU(n,t){return!t&&n===!1?null:n===!0?{}:n}function nU(n,{plugins:t,localIds:e},i,r){const o=[],l=n.getContext();for(const u of t){const d=u.id,f=eU(i[d],r);f!==null&&o.push({plugin:u,options:iU(n.config,{plugin:u,local:e[d]},f,l)})}return o}function iU(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),l=n.getOptionScopes(i,o);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ly(n,t){const e=we.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function sU(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function rU(n,t){return n===t?"_index_":"_value_"}function mT(n){if(n==="x"||n==="y"||n==="r")return n}function aU(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function cy(n,...t){if(mT(n))return n;for(const e of t){const i=e.axis||aU(e.position)||n.length>1&&mT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function gT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function oU(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return gT(n,"x",e[0])||gT(n,"y",e[0])}return{}}function lU(n,t){const e=qa[n.type]||{scales:{}},i=t.scales||{},r=ly(n.type,t),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ht(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=cy(l,u,oU(l,n),we.scales[u.type]),f=rU(d,r),p=e.scales||{};o[l]=ru(Object.create(null),[{axis:d},u,p[d],p[f]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,d=l.indexAxis||ly(u,t),p=(qa[u]||{}).scales||{};Object.keys(p).forEach(v=>{const x=sU(v,d),T=l[x+"AxisID"]||x;o[T]=o[T]||Object.create(null),ru(o[T],[{axis:x},i[T],p[v]])})}),Object.keys(o).forEach(l=>{const u=o[l];ru(u,[we.scales[u.type],we.scale])}),o}function M1(n){const t=n.options||(n.options={});t.plugins=Vt(t.plugins,{}),t.scales=lU(n,t)}function k1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function cU(n){return n=n||{},n.data=k1(n.data),M1(n),n}const pT=new Map,O1=new Set;function Td(n,t){let e=pT.get(n);return e||(e=t(),pT.set(n,e),O1.add(e)),e}const zc=(n,t,e)=>{const i=Su(t,e);i!==void 0&&n.add(i)};class uU{constructor(t){this._config=cU(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=k1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),M1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Td(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Td(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Td(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Td(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const d=new Set;e.forEach(p=>{t&&(d.add(t),p.forEach(v=>zc(d,t,v))),p.forEach(v=>zc(d,r,v)),p.forEach(v=>zc(d,qa[o]||{},v)),p.forEach(v=>zc(d,we,v)),p.forEach(v=>zc(d,ay,v))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),O1.has(e)&&l.set(e,f),f}chartOptionScopes(){const{options:t,type:e}=this;return[t,qa[e]||{},we.datasets[e]||{},{type:e},we,ay]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=yT(this._resolverCache,t,r);let d=l;if(dU(l,e)){o.$shared=!1,i=Vr(i)?i():i;const f=this.createResolver(t,i,u);d=ml(l,i,f)}for(const f of e)o[f]=d[f];return o}createResolver(t,e,i=[""],r){const{resolver:o}=yT(this._resolverCache,t,i);return Ht(e)?ml(o,e,void 0,r):o}}function yT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:Dv(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const hU=n=>Ht(n)&&Object.getOwnPropertyNames(n).some(t=>Vr(n[t]));function dU(n,t){const{isScriptable:e,isIndexable:i}=g1(n);for(const r of t){const o=e(r),l=i(r),u=(l||o)&&n[r];if(o&&(Vr(u)||hU(u))||l&&be(u))return!0}return!1}var fU="4.4.8";const mU=["top","bottom","left","right","chartArea"];function vT(n,t){return n==="top"||n==="bottom"||mU.indexOf(n)===-1&&t==="x"}function _T(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function bT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),le(e&&e.onComplete,[n],t)}function gU(n){const t=n.chart,e=t.options.animation;le(e&&e.onProgress,[n],t)}function P1(n){return Ov()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Ud={},xT=n=>{const t=P1(n);return Object.values(Ud).filter(e=>e.canvas===t).pop()};function pU(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const l=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=l)}}}function yU(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function Ed(n,t,e){return n.options.clip?n[e]:t[e]}function vU(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ed(e,t,"left"),right:Ed(e,t,"right"),top:Ed(i,t,"top"),bottom:Ed(i,t,"bottom")}:t}var _r;let Wf=(_r=class{static register(...t){Vi.add(...t),wT()}static unregister(...t){Vi.remove(...t),wT()}constructor(t,e){const i=this.config=new uU(e),r=P1(t),o=xT(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||P4(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,p=d&&d.width;if(this.id=SL(),this.ctx=u,this.canvas=d,this.width=p,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new J4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GL(v=>this.update(v),l.resizeDelay||0),this._dataChanges=[],Ud[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}bs.listen(this,"complete",bT),bs.listen(this,"progress",gU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return ue(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Vi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Qw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qw(this.canvas,this.ctx),this}stop(){return bs.stop(this),this}resize(t,e){bs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,e,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Qw(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),le(i.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ee(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];e&&(o=o.concat(Object.keys(e).map(l=>{const u=e[l],d=cy(l,u),f=d==="r",p=d==="x";return{options:u,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),ee(o,l=>{const u=l.options,d=u.id,f=cy(d,u),p=Vt(u.type,l.dtype);(u.position===void 0||vT(u.position,f)!==vT(l.dposition))&&(u.position=l.dposition),r[d]=!0;let v=null;if(d in i&&i[d].type===p)v=i[d];else{const x=Vi.getScale(p);v=new x({id:d,type:p,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(u,t)}),ee(r,(l,u)=>{l||delete i[u]}),ee(i,l=>{Cr.configure(this,l,l.options),Cr.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(_T("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||ly(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const d=Vi.getController(u),{datasetElementType:f,dataElementType:p}=we.datasets[u];Object.assign(d,{dataElementType:Vi.getElement(p),datasetElementType:f&&Vi.getElement(f)}),l.controller=new d(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:v}=this.getDatasetMeta(f),x=!r&&o.indexOf(v)===-1;v.buildOrUpdateElements(x),l=Math.max(+v.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||ee(o,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_T("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){ee(this.scales,t=>{Cr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Pw(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const l=i==="_removeElements"?-o:o;pU(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!Pw(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Cr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ee(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Vr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bs.has(this)?this.attached&&!bs.running(this)&&bs.start(this):(this.draw(),bT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const l=e[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,r=!i.disabled,o=vU(t,this.chartArea),l={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",l)!==!1&&(r&&qf(e,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),r&&Gf(e),l.cancelable=!1,this.notifyPlugins("afterDatasetDraw",l))}isPointInArea(t){return Cs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=m4.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=$r(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),l=o.controller._resolveAnimations(void 0,r);lf(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),bs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qw(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ud[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,l)=>{e.addEventListener(this,o,l),t[o]=l},r=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};ee(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,f)=>{e.addEventListener(this,d,f),t[d]=f},r=(d,f)=>{t[d]&&(e.removeEventListener(this,d,f),delete t[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,l,u,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,d=t.length;u<d;++u){l=t[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!af(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(d,f)=>d.filter(p=>!f.some(v=>p.datasetIndex===v.datasetIndex&&p.index===v.index)),l=o(e,t),u=i?t:o(t,e);l.length&&this.updateHoverStyle(l,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,l=e,u=this._getActiveElements(t,r,i,l),d=DL(t),f=yU(t,this._lastEvent,i,d);i&&(this._lastEvent=null,le(o.onHover,[t,u,this],this),d&&le(o.onClick,[t,u,this],this));const p=!af(u,r);return(p||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=f,p}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}},Nt(_r,"defaults",we),Nt(_r,"instances",Ud),Nt(_r,"overrides",qa),Nt(_r,"registry",Vi),Nt(_r,"version",fU),Nt(_r,"getChart",xT),_r);function wT(){return ee(Wf.instances,n=>n._plugins.invalidate())}function j1(n,t,e=t){n.lineCap=Vt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Vt(e.borderDash,t.borderDash)),n.lineDashOffset=Vt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Vt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Vt(e.borderWidth,t.borderWidth),n.strokeStyle=Vt(e.borderColor,t.borderColor)}function _U(n,t,e){n.lineTo(e.x,e.y)}function bU(n){return n.stepped?sV:n.tension||n.cubicInterpolationMode==="monotone"?rV:_U}function L1(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:l,end:u}=t,d=Math.max(r,l),f=Math.min(o,u),p=r<l&&o<l||r>u&&o>u;return{count:i,start:d,loop:t.loop,ilen:f<d&&!p?i+f-d:f-d}}function xU(n,t,e,i){const{points:r,options:o}=t,{count:l,start:u,loop:d,ilen:f}=L1(r,e,i),p=bU(o);let{move:v=!0,reverse:x}=i||{},T,C,S;for(T=0;T<=f;++T)C=r[(u+(x?f-T:T))%l],!C.skip&&(v?(n.moveTo(C.x,C.y),v=!1):p(n,S,C,x,o.stepped),S=C);return d&&(C=r[(u+(x?f:0))%l],p(n,S,C,x,o.stepped)),!!d}function wU(n,t,e,i){const r=t.points,{count:o,start:l,ilen:u}=L1(r,e,i),{move:d=!0,reverse:f}=i||{};let p=0,v=0,x,T,C,S,A,L;const G=Y=>(l+(f?u-Y:Y))%o,F=()=>{S!==A&&(n.lineTo(p,A),n.lineTo(p,S),n.lineTo(p,L))};for(d&&(T=r[G(0)],n.moveTo(T.x,T.y)),x=0;x<=u;++x){if(T=r[G(x)],T.skip)continue;const Y=T.x,X=T.y,Z=Y|0;Z===C?(X<S?S=X:X>A&&(A=X),p=(v*p+Y)/++v):(F(),n.lineTo(Y,X),C=Z,v=0,S=A=X),L=X}F()}function uy(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?wU:xU}function TU(n){return n.stepped?UV:n.tension||n.cubicInterpolationMode==="monotone"?zV:Da}function EU(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),j1(n,t.options),n.stroke(r)}function SU(n,t,e,i){const{segments:r,options:o}=t,l=uy(t);for(const u of r)j1(n,o,u.style),n.beginPath(),l(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const AU=typeof Path2D=="function";function CU(n,t,e,i){AU&&!t.options.segment?EU(n,t,e,i):SU(n,t,e,i)}class Rr extends Ur{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;DV(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$V(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,l=E1(this,{property:e,start:r,end:r});if(!l.length)return;const u=[],d=TU(i);let f,p;for(f=0,p=l.length;f<p;++f){const{start:v,end:x}=l[f],T=o[v],C=o[x];if(T===C){u.push(T);continue}const S=Math.abs((r-T[e])/(C[e]-T[e])),A=d(T,C,S,i.stepped);A[e]=t[e],u.push(A)}return u.length===1?u[0]:u}pathSegment(t,e,i){return uy(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=uy(this);let l=this._loop;e=e||0,i=i||this.points.length-e;for(const u of r)l&=o(t,this,u,{start:e,end:e+i-1});return!!l}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),CU(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Nt(Rr,"id","line"),Nt(Rr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Nt(Rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Nt(Rr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function TT(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class zd extends Ur{constructor(e){super();Nt(this,"parsed");Nt(this,"skip");Nt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.options,{x:l,y:u}=this.getProps(["x","y"],r);return Math.pow(e-l,2)+Math.pow(i-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return TT(this,e,"x",i)}inYRange(e,i){return TT(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!Cs(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,oy(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Nt(zd,"id","point"),Nt(zd,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Nt(zd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function RU(n,t,e){const i=n.segments,r=n.points,o=t.points,l=[];for(const u of i){let{start:d,end:f}=u;f=Lv(d,f,r);const p=hy(e,r[d],r[f],u.loop);if(!t.segments){l.push({source:u,target:p,start:r[d],end:r[f]});continue}const v=E1(t,p);for(const x of v){const T=hy(e,o[x.start],o[x.end],x.loop),C=T1(u,r,T);for(const S of C)l.push({source:S,target:x,start:{[e]:ET(p,T,"start",Math.max)},end:{[e]:ET(p,T,"end",Math.min)}})}}return l}function hy(n,t,e,i){if(i)return;let r=t[n],o=e[n];return n==="angle"&&(r=Vn(r),o=Vn(o)),{property:n,start:r,end:o}}function IU(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,o=[];return t.segments.forEach(({start:l,end:u})=>{u=Lv(l,u,r);const d=r[l],f=r[u];i!==null?(o.push({x:d.x,y:i}),o.push({x:f.x,y:i})):e!==null&&(o.push({x:e,y:d.y}),o.push({x:e,y:f.y}))}),o}function Lv(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function ET(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function V1(n,t){let e=[],i=!1;return be(n)?(i=!0,e=n):e=IU(n,t),e.length?new Rr({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function ST(n){return n&&n.fill!==!1}function NU(n,t,e){let r=n[t].fill;const o=[t];let l;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!gn(r))return r;if(l=n[r],!l)return!1;if(l.visible)return r;o.push(r),r=l.fill}return!1}function DU(n,t,e){const i=PU(n);if(Ht(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return gn(r)&&Math.floor(r)===r?MU(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function MU(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function kU(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ht(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function OU(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ht(n)?i=n.value:i=t.getBaseValue(),i}function PU(n){const t=n.options,e=t.fill;let i=Vt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function jU(n){const{scale:t,index:e,line:i}=n,r=[],o=i.segments,l=i.points,u=LU(t,e);u.push(V1({x:null,y:t.bottom},i));for(let d=0;d<o.length;d++){const f=o[d];for(let p=f.start;p<=f.end;p++)VU(r,l[p],u)}return new Rr({points:r,options:{}})}function LU(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const o=i[r];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function VU(n,t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r],{first:l,last:u,point:d}=UU(o,t,"x");if(!(!d||l&&u)){if(l)i.unshift(d);else if(n.push(d),!u)break}}n.push(...i)}function UU(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],o=n.segments,l=n.points;let u=!1,d=!1;for(let f=0;f<o.length;f++){const p=o[f],v=l[p.start][e],x=l[p.end][e];if(Yo(r,v,x)){u=r===v,d=r===x;break}}return{first:u,last:d,point:i}}class U1{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:l}=this;return e=e||{start:0,end:Hn},t.arc(r,o,l,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,o=t.angle;return{x:e+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}}function zU(n){const{chart:t,fill:e,line:i}=n;if(gn(e))return BU(t,e);if(e==="stack")return jU(n);if(e==="shape")return!0;const r=FU(n);return r instanceof U1?r:V1(r,i)}function BU(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function FU(n){return(n.scale||{}).getPointPositionForValue?qU(n):HU(n)}function HU(n){const{scale:t={},fill:e}=n,i=kU(e,t);if(gn(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function qU(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,l=OU(e,t,o),u=[];if(i.grid.circular){const d=t.getPointPositionForValue(0,o);return new U1({x:d.x,y:d.y,radius:t.getDistanceFromCenterForValue(l)})}for(let d=0;d<r;++d)u.push(t.getPointPositionForValue(d,l));return u}function Ep(n,t,e){const i=zU(t),{line:r,scale:o,axis:l}=t,u=r.options,d=u.fill,f=u.backgroundColor,{above:p=f,below:v=f}=d||{};i&&r.points.length&&(qf(n,e),GU(n,{line:r,target:i,above:p,below:v,area:e,scale:o,axis:l}),Gf(n))}function GU(n,t){const{line:e,target:i,above:r,below:o,area:l,scale:u}=t,d=e._loop?"angle":t.axis;n.save(),d==="x"&&o!==r&&(AT(n,i,l.top),CT(n,{line:e,target:i,color:r,scale:u,property:d}),n.restore(),n.save(),AT(n,i,l.bottom)),CT(n,{line:e,target:i,color:o,scale:u,property:d}),n.restore()}function AT(n,t,e){const{segments:i,points:r}=t;let o=!0,l=!1;n.beginPath();for(const u of i){const{start:d,end:f}=u,p=r[d],v=r[Lv(d,f,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(p.x,e),n.lineTo(p.x,p.y)),l=!!t.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(v.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function CT(n,t){const{line:e,target:i,property:r,color:o,scale:l}=t,u=RU(e,i,r);for(const{source:d,target:f,start:p,end:v}of u){const{style:{backgroundColor:x=o}={}}=d,T=i!==!0;n.save(),n.fillStyle=x,$U(n,l,T&&hy(r,p,v)),n.beginPath();const C=!!e.pathSegment(n,d);let S;if(T){C?n.closePath():RT(n,i,v,r);const A=!!i.pathSegment(n,f,{move:C,reverse:!0});S=C&&A,S||RT(n,i,p,r)}n.closePath(),n.fill(S?"evenodd":"nonzero"),n.restore()}}function $U(n,t,e){const{top:i,bottom:r}=t.chart.chartArea,{property:o,start:l,end:u}=e||{};o==="x"&&(n.beginPath(),n.rect(l,i,u-l,r-i),n.clip())}function RT(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var QU={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let o,l,u,d;for(l=0;l<i;++l)o=n.getDatasetMeta(l),u=o.dataset,d=null,u&&u.options&&u instanceof Rr&&(d={visible:n.isDatasetVisible(l),index:l,fill:DU(u,l,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=d,r.push(d);for(l=0;l<i;++l)d=r[l],!(!d||d.fill===!1)&&(d.fill=NU(r,l,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let l=r.length-1;l>=0;--l){const u=r[l].$filler;u&&(u.line.updateControlPoints(o,u.axis),i&&u.fill&&Ep(n.ctx,u,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const o=i[r].$filler;ST(o)&&Ep(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!ST(i)||e.drawTime!=="beforeDatasetDraw"||Ep(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const IT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},WU=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class NT extends Ur{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=le(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=sn(i.font),o=r.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=IT(i,o);let f,p;e.font=r.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(l,o,u,d)+10):(p=this.maxHeight,f=this._fitCols(l,r,u,d)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],p=r+u;let v=t;o.textAlign="left",o.textBaseline="middle";let x=-1,T=-p;return this.legendItems.forEach((C,S)=>{const A=i+e/2+o.measureText(C.text).width;(S===0||f[f.length-1]+A+2*u>l)&&(v+=p,f[f.length-(S>0?0:1)]=0,T+=p,x++),d[S]={left:0,top:T,row:x,width:A,height:r},f[f.length-1]+=A+u}),v}_fitCols(t,e,i,r){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],p=l-t;let v=u,x=0,T=0,C=0,S=0;return this.legendItems.forEach((A,L)=>{const{itemWidth:G,itemHeight:F}=KU(i,e,o,A,r);L>0&&T+F+2*u>p&&(v+=x+u,f.push({width:x,height:T}),C+=x+u,S++,x=T=0),d[L]={left:C,top:T,col:S,width:G,height:F},x=Math.max(x,G),T+=F+u}),v+=x,f.push({width:x,height:T}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,l=nl(o,this.left,this.width);if(this.isHorizontal()){let u=0,d=Ln(i,this.left+r,this.right-this.lineWidths[u]);for(const f of e)u!==f.row&&(u=f.row,d=Ln(i,this.left+r,this.right-this.lineWidths[u])),f.top+=this.top+t+r,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+r}else{let u=0,d=Ln(i,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const f of e)f.col!==u&&(u=f.col,d=Ln(i,this.top+t+r,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+r,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;qf(t,this),this._draw(),Gf(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:l}=t,u=we.color,d=nl(t.rtl,this.left,this.width),f=sn(l.font),{padding:p}=l,v=f.size,x=v/2;let T;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:C,boxHeight:S,itemHeight:A}=IT(l,v),L=function(Z,O,N){if(isNaN(C)||C<=0||isNaN(S)||S<0)return;r.save();const D=Vt(N.lineWidth,1);if(r.fillStyle=Vt(N.fillStyle,u),r.lineCap=Vt(N.lineCap,"butt"),r.lineDashOffset=Vt(N.lineDashOffset,0),r.lineJoin=Vt(N.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=Vt(N.strokeStyle,u),r.setLineDash(Vt(N.lineDash,[])),l.usePointStyle){const k={radius:S*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:D},j=d.xPlus(Z,C/2),U=O+x;f1(r,k,j,U,l.pointStyleWidth&&C)}else{const k=O+Math.max((v-S)/2,0),j=d.leftForLtr(Z,C),U=el(N.borderRadius);r.beginPath(),Object.values(U).some(M=>M!==0)?df(r,{x:j,y:k,w:C,h:S,radius:U}):r.rect(j,k,C,S),r.fill(),D!==0&&r.stroke()}r.restore()},G=function(Z,O,N){fl(r,N.text,Z,O+A/2,f,{strikethrough:N.hidden,textAlign:d.textAlign(N.textAlign)})},F=this.isHorizontal(),Y=this._computeTitleHeight();F?T={x:Ln(o,this.left+p,this.right-i[0]),y:this.top+p+Y,line:0}:T={x:this.left+p,y:Ln(o,this.top+Y+p,this.bottom-e[0].height),line:0},b1(this.ctx,t.textDirection);const X=A+p;this.legendItems.forEach((Z,O)=>{r.strokeStyle=Z.fontColor,r.fillStyle=Z.fontColor;const N=r.measureText(Z.text).width,D=d.textAlign(Z.textAlign||(Z.textAlign=l.textAlign)),k=C+x+N;let j=T.x,U=T.y;d.setWidth(this.width),F?O>0&&j+k+p>this.right&&(U=T.y+=X,T.line++,j=T.x=Ln(o,this.left+p,this.right-i[T.line])):O>0&&U+X>this.bottom&&(j=T.x=j+e[T.line].width+p,T.line++,U=T.y=Ln(o,this.top+Y+p,this.bottom-e[T.line].height));const M=d.x(j);if(L(M,U,Z),j=$L(D,j+C+x,F?j+k:this.right,t.rtl),G(d.x(j),U,Z),F)T.x+=k+p;else if(typeof Z.text!="string"){const ft=f.lineHeight;T.y+=z1(Z,ft)+p}else T.y+=X}),x1(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=sn(e.font),r=wn(e.padding);if(!e.display)return;const o=nl(t.rtl,this.left,this.width),l=this.ctx,u=e.position,d=i.size/2,f=r.top+d;let p,v=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),p=this.top+f,v=Ln(t.align,v,this.right-x);else{const C=this.columnSizes.reduce((S,A)=>Math.max(S,A.height),0);p=f+Ln(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const T=Ln(u,v,v+x);l.textAlign=o.textAlign(u1(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,fl(l,e.text,T,p,i)}_computeTitleHeight(){const t=this.options.title,e=sn(t.font),i=wn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Yo(t,this.left,this.right)&&Yo(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Yo(t,r.left,r.left+r.width)&&Yo(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!ZU(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=WU(r,i);r&&!o&&le(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&le(e.onHover,[t,i,this],this)}else i&&le(e.onClick,[t,i,this],this)}}function KU(n,t,e,i,r){const o=YU(i,n,t,e),l=XU(r,i,t.lineHeight);return{itemWidth:o,itemHeight:l}}function YU(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,l)=>o.length>l.length?o:l)),t+e.size/2+i.measureText(r).width}function XU(n,t,e){let i=n;return typeof t.text!="string"&&(i=z1(t,e)),i}function z1(n,t){const e=n.text?n.text.length:0;return t*e}function ZU(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var JU={id:"legend",_element:NT,start(n,t,e){const i=n.legend=new NT({ctx:n.ctx,options:e,chart:n});Cr.configure(n,i,e),Cr.addBox(n,i)},stop(n){Cr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Cr.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(e?0:void 0),p=wn(f.borderWidth);return{text:t[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Xc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),r+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=n.length;o<l;++o){const d=n[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),p=sy(t,f);p<r&&(r=p,u=d)}}if(u){const d=u.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Li(n,t){return t&&(be(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function xs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function t5(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(r);return{chart:n,label:l,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function DT(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:l,boxHeight:u}=t,d=sn(t.bodyFont),f=sn(t.titleFont),p=sn(t.footerFont),v=o.length,x=r.length,T=i.length,C=wn(t.padding);let S=C.height,A=0,L=i.reduce((Y,X)=>Y+X.before.length+X.lines.length+X.after.length,0);if(L+=n.beforeBody.length+n.afterBody.length,v&&(S+=v*f.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),L){const Y=t.displayColors?Math.max(u,d.lineHeight):d.lineHeight;S+=T*Y+(L-T)*d.lineHeight+(L-1)*t.bodySpacing}x&&(S+=t.footerMarginTop+x*p.lineHeight+(x-1)*t.footerSpacing);let G=0;const F=function(Y){A=Math.max(A,e.measureText(Y).width+G)};return e.save(),e.font=f.string,ee(n.title,F),e.font=d.string,ee(n.beforeBody.concat(n.afterBody),F),G=t.displayColors?l+2+t.boxPadding:0,ee(i,Y=>{ee(Y.before,F),ee(Y.lines,F),ee(Y.after,F)}),G=0,e.font=p.string,ee(n.footer,F),e.restore(),A+=C.width,{width:A,height:S}}function e5(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function n5(n,t,e,i){const{x:r,width:o}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&r+o+l>t.width||n==="right"&&r-o-l<0)return!0}function i5(n,t,e,i){const{x:r,width:o}=e,{width:l,chartArea:{left:u,right:d}}=n;let f="center";return i==="center"?f=r<=(u+d)/2?"left":"right":r<=o/2?f="left":r>=l-o/2&&(f="right"),n5(f,n,t,e)&&(f="center"),f}function MT(n,t,e){const i=e.yAlign||t.yAlign||e5(n,e);return{xAlign:e.xAlign||t.xAlign||i5(n,t,e,i),yAlign:i}}function s5(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function r5(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function kT(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:l}=n,{xAlign:u,yAlign:d}=e,f=r+o,{topLeft:p,topRight:v,bottomLeft:x,bottomRight:T}=el(l);let C=s5(t,u);const S=r5(t,d,f);return d==="center"?u==="left"?C+=f:u==="right"&&(C-=f):u==="left"?C-=Math.max(p,x)+r:u==="right"&&(C+=Math.max(v,T)+r),{x:As(C,0,i.width-t.width),y:As(S,0,i.height-t.height)}}function Sd(n,t,e){const i=wn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function OT(n){return Li([],xs(n))}function a5(n,t,e){return $r(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function PT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const B1={beforeTitle:_s,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:_s,beforeBody:_s,beforeLabel:_s,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ue(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:_s,afterBody:_s,beforeFooter:_s,footer:_s,afterFooter:_s};function An(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?B1[t].call(e,i):r}class dy extends Ur{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new S1(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=a5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=An(i,"beforeTitle",this,t),o=An(i,"title",this,t),l=An(i,"afterTitle",this,t);let u=[];return u=Li(u,xs(r)),u=Li(u,xs(o)),u=Li(u,xs(l)),u}getBeforeBody(t,e){return OT(An(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return ee(t,o=>{const l={before:[],lines:[],after:[]},u=PT(i,o);Li(l.before,xs(An(u,"beforeLabel",this,o))),Li(l.lines,An(u,"label",this,o)),Li(l.after,xs(An(u,"afterLabel",this,o))),r.push(l)}),r}getAfterBody(t,e){return OT(An(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=An(i,"beforeFooter",this,t),o=An(i,"footer",this,t),l=An(i,"afterFooter",this,t);let u=[];return u=Li(u,xs(r)),u=Li(u,xs(o)),u=Li(u,xs(l)),u}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],l=[];let u=[],d,f;for(d=0,f=e.length;d<f;++d)u.push(t5(this.chart,e[d]));return t.filter&&(u=u.filter((p,v,x)=>t.filter(p,v,x,i))),t.itemSort&&(u=u.sort((p,v)=>t.itemSort(p,v,i))),ee(u,p=>{const v=PT(t.callbacks,p);r.push(An(v,"labelColor",this,p)),o.push(An(v,"labelPointStyle",this,p)),l.push(An(v,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,l=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=Xc[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const d=this._size=DT(this,i),f=Object.assign({},u,d),p=MT(this.chart,i,f),v=kT(i,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:v}=el(u),{x,y:T}=t,{width:C,height:S}=e;let A,L,G,F,Y,X;return o==="center"?(Y=T+S/2,r==="left"?(A=x,L=A-l,F=Y+l,X=Y-l):(A=x+C,L=A+l,F=Y-l,X=Y+l),G=A):(r==="left"?L=x+Math.max(d,p)+l:r==="right"?L=x+C-Math.max(f,v)-l:L=this.caretX,o==="top"?(F=T,Y=F-l,A=L-l,G=L+l):(F=T+S,Y=F+l,A=L+l,G=L-l),X=F),{x1:A,x2:L,x3:G,y1:F,y2:Y,y3:X}}drawTitle(t,e,i){const r=this.title,o=r.length;let l,u,d;if(o){const f=nl(i.rtl,this.x,this.width);for(t.x=Sd(this,i.titleAlign,i),e.textAlign=f.textAlign(i.titleAlign),e.textBaseline="middle",l=sn(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,d=0;d<o;++d)e.fillText(r[d],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,d+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,r,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=o,p=sn(o.bodyFont),v=Sd(this,"left",o),x=r.x(v),T=d<p.lineHeight?(p.lineHeight-d)/2:0,C=e.y+T;if(o.usePointStyle){const S={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},A=r.leftForLtr(x,f)+f/2,L=C+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,oy(t,S,A,L),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,oy(t,S,A,L)}else{t.lineWidth=Ht(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const S=r.leftForLtr(x,f),A=r.leftForLtr(r.xPlus(x,1),f-2),L=el(l.borderRadius);Object.values(L).some(G=>G!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,df(t,{x:S,y:C,w:f,h:d,radius:L}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),df(t,{x:A,y:C+1,w:f-2,h:d-2,radius:L}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(S,C,f,d),t.strokeRect(S,C,f,d),t.fillStyle=l.backgroundColor,t.fillRect(A,C+1,f-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:p}=i,v=sn(i.bodyFont);let x=v.lineHeight,T=0;const C=nl(i.rtl,this.x,this.width),S=function(N){e.fillText(N,C.x(t.x+T),t.y+x/2),t.y+=x+o},A=C.textAlign(l);let L,G,F,Y,X,Z,O;for(e.textAlign=l,e.textBaseline="middle",e.font=v.string,t.x=Sd(this,A,i),e.fillStyle=i.bodyColor,ee(this.beforeBody,S),T=u&&A!=="right"?l==="center"?f/2+p:f+2+p:0,Y=0,Z=r.length;Y<Z;++Y){for(L=r[Y],G=this.labelTextColors[Y],e.fillStyle=G,ee(L.before,S),F=L.lines,u&&F.length&&(this._drawColorBox(e,t,Y,C,i),x=Math.max(v.lineHeight,d)),X=0,O=F.length;X<O;++X)S(F[X]),x=v.lineHeight;ee(L.after,S)}T=0,x=v.lineHeight,ee(this.afterBody,S),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let l,u;if(o){const d=nl(i.rtl,this.x,this.width);for(t.x=Sd(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",l=sn(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<o;++u)e.fillText(r[u],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:l}=this,{x:u,y:d}=t,{width:f,height:p}=i,{topLeft:v,topRight:x,bottomLeft:T,bottomRight:C}=el(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(u+v,d),l==="top"&&this.drawCaret(t,e,i,r),e.lineTo(u+f-x,d),e.quadraticCurveTo(u+f,d,u+f,d+x),l==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(u+f,d+p-C),e.quadraticCurveTo(u+f,d+p,u+f-C,d+p),l==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(u+T,d+p),e.quadraticCurveTo(u,d+p,u,d+p-T),l==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(u,d+v),e.quadraticCurveTo(u,d,u+v,d),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const l=Xc[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=DT(this,t),d=Object.assign({},l,this._size),f=MT(e,t,d),p=kT(t,d,f,e);(r._to!==p.x||o._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=wn(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),b1(t,e.textDirection),o.y+=l.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),x1(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),o=!af(i,r),l=this._positionChanged(r,e);(o||l)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],l=this._getActiveElements(t,o,e,i),u=this._positionChanged(l,t),d=e||!af(l,o)||u;return d&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,l=Xc[o.position].call(this,t,e);return l!==!1&&(i!==l.x||r!==l.y)}}Nt(dy,"positioners",Xc);var o5={id:"tooltip",_element:dy,positioners:Xc,afterInit(n,t,e){e&&(n.tooltip=new dy({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:B1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function l5(n,t){const e=[],{bounds:r,step:o,min:l,max:u,precision:d,count:f,maxTicks:p,maxDigits:v,includeBounds:x}=n,T=o||1,C=p-1,{min:S,max:A}=t,L=!ue(l),G=!ue(u),F=!ue(f),Y=(A-S)/(v+1);let X=Lw((A-S)/C/T)*T,Z,O,N,D;if(X<1e-14&&!L&&!G)return[{value:S},{value:A}];D=Math.ceil(A/X)-Math.floor(S/X),D>C&&(X=Lw(D*X/C/T)*T),ue(d)||(Z=Math.pow(10,d),X=Math.ceil(X*Z)/Z),r==="ticks"?(O=Math.floor(S/X)*X,N=Math.ceil(A/X)*X):(O=S,N=A),L&&G&&o&&jL((u-l)/o,X/1e3)?(D=Math.round(Math.min((u-l)/X,p)),X=(u-l)/D,O=l,N=u):F?(O=L?l:O,N=G?u:N,D=f-1,X=(N-O)/D):(D=(N-O)/X,au(D,Math.round(D),X/1e3)?D=Math.round(D):D=Math.ceil(D));const k=Math.max(Vw(X),Vw(O));Z=Math.pow(10,ue(d)?k:d),O=Math.round(O*Z)/Z,N=Math.round(N*Z)/Z;let j=0;for(L&&(x&&O!==l?(e.push({value:l}),O<l&&j++,au(Math.round((O+j*X)*Z)/Z,l,jT(l,Y,n))&&j++):O<l&&j++);j<D;++j){const U=Math.round((O+j*X)*Z)/Z;if(G&&U>u)break;e.push({value:U})}return G&&x&&N!==u?e.length&&au(e[e.length-1].value,u,jT(u,Y,n))?e[e.length-1].value=u:e.push({value:u}):(!G||N===u)&&e.push({value:N}),e}function jT(n,t,{horizontal:e,minRotation:i}){const r=Oa(i),o=(e?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+n).length;return Math.min(t/o,l)}class LT extends zu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ue(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const l=d=>r=e?r:d,u=d=>o=i?o:d;if(t){const d=dl(r),f=dl(o);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(r===o){let d=o===0?1:Math.abs(o*.05);u(o+d),t||l(r-d)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,l=l5(r,o);return t.bounds==="ticks"&&LL(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return h1(t,this.chart.options.locale,this.options.ticks.format)}}function fy(n){const t=n.ticks;if(t.display&&n.display){const e=wn(t.backdropPadding);return Vt(t.font&&t.font.size,we.font.size)+e.height}return 0}function c5(n,t,e){return e=be(e)?e:[e],{w:iV(n,t.string,e),h:e.length*t.lineHeight}}function VT(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function u5(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],o=n._pointLabels.length,l=n.options.pointLabels,u=l.centerPointLabels?Ke/o:0;for(let d=0;d<o;d++){const f=l.setContext(n.getPointLabelContext(d));r[d]=f.padding;const p=n.getPointPosition(d,n.drawingArea+r[d],u),v=sn(f.font),x=c5(n.ctx,v,n._pointLabels[d]);i[d]=x;const T=Vn(n.getIndexAngle(d)+u),C=Math.round(Rv(T)),S=VT(C,p.x,x.w,0,180),A=VT(C,p.y,x.h,90,270);h5(e,t,T,S,A)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=m5(n,i,r)}function h5(n,t,e,i,r){const o=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e));let u=0,d=0;i.start<t.l?(u=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-u)):i.end>t.r&&(u=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+u)),r.start<t.t?(d=(t.t-r.start)/l,n.t=Math.min(n.t,t.t-d)):r.end>t.b&&(d=(r.end-t.b)/l,n.b=Math.max(n.b,t.b+d))}function d5(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:o,padding:l,size:u}=e,d=n.getPointPosition(t,i+r+l,o),f=Math.round(Rv(Vn(d.angle+zn))),p=y5(d.y,u.h,f),v=g5(f),x=p5(d.x,u.w,v);return{visible:!0,x:d.x,y:p,textAlign:v,left:x,top:p,right:x+u.w,bottom:p+u.h}}function f5(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:o}=n;return!(Cs({x:e,y:i},t)||Cs({x:e,y:o},t)||Cs({x:r,y:i},t)||Cs({x:r,y:o},t))}function m5(n,t,e){const i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:l,display:u}=o.pointLabels,d={extra:fy(o)/2,additionalAngle:l?Ke/r:0};let f;for(let p=0;p<r;p++){d.padding=e[p],d.size=t[p];const v=d5(n,p,d);i.push(v),u==="auto"&&(v.visible=f5(v,f),v.visible&&(f=v))}return i}function g5(n){return n===0||n===180?"center":n<180?"left":"right"}function p5(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function y5(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function v5(n,t,e){const{left:i,top:r,right:o,bottom:l}=e,{backdropColor:u}=t;if(!ue(u)){const d=el(t.borderRadius),f=wn(t.backdropPadding);n.fillStyle=u;const p=i-f.left,v=r-f.top,x=o-i+f.width,T=l-r+f.height;Object.values(d).some(C=>C!==0)?(n.beginPath(),df(n,{x:p,y:v,w:x,h:T,radius:d}),n.fill()):n.fillRect(p,v,x,T)}}function _5(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const o=n._pointLabelItems[r];if(!o.visible)continue;const l=i.setContext(n.getPointLabelContext(r));v5(e,l,o);const u=sn(l.font),{x:d,y:f,textAlign:p}=o;fl(e,n._pointLabels[r],d,f+u.lineHeight/2,u,{color:l.color,textAlign:p,textBaseline:"middle"})}}function F1(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,Hn);else{let o=n.getPointPosition(0,t);r.moveTo(o.x,o.y);for(let l=1;l<i;l++)o=n.getPointPosition(l,t),r.lineTo(o.x,o.y)}}function b5(n,t,e,i,r){const o=n.ctx,l=t.circular,{color:u,lineWidth:d}=t;!l&&!i||!u||!d||e<0||(o.save(),o.strokeStyle=u,o.lineWidth=d,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),F1(n,e,l,i),o.closePath(),o.stroke(),o.restore())}function x5(n,t,e){return $r(n,{label:e,index:t,type:"pointLabel"})}class Zc extends LT{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=wn(fy(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=gn(t)&&!isNaN(t)?t:0,this.max=gn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fy(this.options))}generateTickLabels(t){LT.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=le(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?u5(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=Hn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Vn(t*e+Oa(i))}getDistanceFromCenterForValue(t){if(ue(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ue(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return x5(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-zn+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),F1(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,l=this._pointLabels.length;let u,d,f;if(e.pointLabels.display&&_5(this,l),r.display&&this.ticks.forEach((p,v)=>{if(v!==0||v===0&&this.min<0){d=this.getDistanceFromCenterForValue(p.value);const x=this.getContext(v),T=r.setContext(x),C=o.setContext(x);b5(this,T,d,l,C)}}),i.display){for(t.save(),u=l-1;u>=0;u--){const p=i.setContext(this.getPointLabelContext(u)),{color:v,lineWidth:x}=p;!x||!v||(t.lineWidth=x,t.strokeStyle=v,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,d=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),f=this.getPointPosition(u,d),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(f.x,f.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((u,d)=>{if(d===0&&this.min>=0&&!e.reverse)return;const f=i.setContext(this.getContext(d)),p=sn(f.font);if(o=this.getDistanceFromCenterForValue(this.ticks[d].value),f.showLabelBackdrop){t.font=p.string,l=t.measureText(u.label).width,t.fillStyle=f.backdropColor;const v=wn(f.backdropPadding);t.fillRect(-l/2-v.left,-o-p.size/2-v.top,l+v.width,p.size+v.height)}fl(t,u.label,0,-o,p,{color:f.color,strokeColor:f.textStrokeColor,strokeWidth:f.textStrokeWidth})}),t.restore()}drawTitle(){}}Nt(Zc,"id","radialLinear"),Nt(Zc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:d1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Nt(Zc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Nt(Zc,"descriptors",{angleLines:{_fallback:"grid"}});const Kf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rn=Object.keys(Kf);function UT(n,t){return n-t}function zT(n,t){if(ue(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),gn(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(r&&(l=r==="week"&&(uf(o)||o===!0)?e.startOf(l,"isoWeek",o):e.startOf(l,r)),+l)}function BT(n,t,e,i){const r=Rn.length;for(let o=Rn.indexOf(n);o<r-1;++o){const l=Kf[Rn[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return Rn[o]}return Rn[r-1]}function w5(n,t,e,i,r){for(let o=Rn.length-1;o>=Rn.indexOf(e);o--){const l=Rn[o];if(Kf[l].common&&n._adapter.diff(r,i,l)>=t-1)return l}return Rn[e?Rn.indexOf(e):0]}function T5(n){for(let t=Rn.indexOf(n)+1,e=Rn.length;t<e;++t)if(Kf[Rn[t]].common)return Rn[t]}function FT(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Iv(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function E5(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),l=t[t.length-1].value;let u,d;for(u=o;u<=l;u=+r.add(u,1,i))d=e[u],d>=0&&(t[d].major=!0);return t}function HT(n,t,e){const i=[],r={},o=t.length;let l,u;for(l=0;l<o;++l)u=t[l],r[u]=l,i.push({value:u,major:!1});return o===0||!e?i:E5(n,i,r,e)}class gf extends zu{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new c4._date(t.adapters.date);r.init(e),ru(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:zT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),r=gn(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=gn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=this.max,u=FL(r,o,l);return this._unit=e.unit||(i.autoSkip?BT(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):w5(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:T5(this._unit),this.initOffsets(r),t.reverse&&u.reverse(),HT(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=As(e,0,l),i=As(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,l=o.unit||BT(o.minUnit,e,i,this._getLabelCapacity(e)),u=Vt(r.ticks.stepSize,1),d=l==="week"?o.isoWeekday:!1,f=uf(d)||d===!0,p={};let v=e,x,T;if(f&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,f?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const C=r.ticks.source==="data"&&this.getDataTimestamps();for(x=v,T=0;x<i;x=+t.add(x,u,l),T++)FT(p,x,C);return(x===i||r.bounds==="ticks"||T===1)&&FT(p,x,C),Object.keys(p).sort(UT).map(S=>+S)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,l=e||r[o];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,r){const o=this.options,l=o.ticks.callback;if(l)return le(l,[t,e,i],this);const u=o.time.displayFormats,d=this._unit,f=this._majorUnit,p=d&&u[d],v=f&&u[f],x=i[e],T=f&&v&&x&&x.major;return this._adapter.format(t,r||(T?v:p))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Oa(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),l=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,HT(this,[t],this._majorUnit),r),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(zT(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qL(t.sort(UT))}}Nt(gf,"id","time"),Nt(gf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ad(n,t,e){let i=0,r=n.length-1,o,l,u,d;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=ry(n,"pos",t)),{pos:o,time:u}=n[i],{pos:l,time:d}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=ry(n,"time",t)),{time:o,pos:u}=n[i],{time:l,pos:d}=n[r]);const f=l-o;return f?u+(d-u)*(t-o)/f:u}class qT extends gf{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ad(e,this.min),this._tableRange=Ad(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let l,u,d,f,p;for(l=0,u=t.length;l<u;++l)f=t[l],f>=e&&f<=i&&r.push(f);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=r.length;l<u;++l)p=r[l+1],d=r[l-1],f=r[l],Math.round((p+d)/2)!==f&&o.push({time:f,pos:l/(u-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ad(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Ad(this._table,i*this._tableRange+this._minPos,!0)}}Nt(qT,"id","timeseries"),Nt(qT,"defaults",gf.defaults);const H1="label";function GT(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function S5(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function q1(n,t){n.labels=t}function G1(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H1;const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(l=>l[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function A5(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H1;const e={labels:[],datasets:[]};return q1(e,n.labels),G1(e,n.datasets,t),e}function C5(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:f=[],fallbackContent:p,updateMode:v,...x}=n,T=Q.useRef(null),C=Q.useRef(null),S=()=>{T.current&&(C.current=new Wf(T.current,{type:l,data:A5(u,o),options:d&&{...d},plugins:f}),GT(t,C.current))},A=()=>{GT(t,null),C.current&&(C.current.destroy(),C.current=null)};return Q.useEffect(()=>{!r&&C.current&&d&&S5(C.current,d)},[r,d]),Q.useEffect(()=>{!r&&C.current&&q1(C.current.config.data,u.labels)},[r,u.labels]),Q.useEffect(()=>{!r&&C.current&&u.datasets&&G1(C.current.config.data,u.datasets,o)},[r,u.datasets]),Q.useEffect(()=>{C.current&&(r?(A(),setTimeout(S)):C.current.update(v))},[r,d,u.labels,u.datasets,v]),Q.useEffect(()=>{C.current&&(A(),setTimeout(S))},[l]),Q.useEffect(()=>(S(),()=>A()),[]),py.createElement("canvas",{ref:T,role:"img",height:e,width:i,...x},p)}const R5=Q.forwardRef(C5);function I5(n,t){return Wf.register(t),Q.forwardRef((e,i)=>py.createElement(R5,{...e,ref:i,type:n}))}const N5=I5("radar",Ld),D5=["/avatars/default1.png","/avatars/default2.png","/avatars/default3.png","/avatars/default4.png"],$1=({currentAvatarUrl:n,onAvatarUpdate:t,onClose:e})=>{const[i,r]=Q.useState(""),[o,l]=Q.useState(null),[u,d]=Q.useState(!1),f=async v=>{if(v.preventDefault(),!(!i||!qt.currentUser)){d(!0),l(null);try{const T=(await fetch(i)).headers.get("content-type");if(!(T!=null&&T.startsWith("image/")))throw new Error("Please provide a valid image URL");await xe(Zt(Yt,"users",qt.currentUser.uid),{avatarUrl:i}),t(i),e()}catch(x){console.error("Error setting avatar:",x),l("Failed to set avatar. Please provide a valid image URL.")}finally{d(!1)}}},p=async v=>{if(qt.currentUser)try{await xe(Zt(Yt,"users",qt.currentUser.uid),{avatarUrl:v}),t(v),e()}catch(x){console.error("Error setting preset avatar:",x),l("Failed to set avatar")}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Change Avatar"}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[o&&_.jsx("div",{className:"text-red-500 text-sm",children:o}),n&&_.jsx("div",{className:"flex justify-center",children:_.jsx("img",{src:n,alt:"Current avatar",className:"w-24 h-24 rounded-full object-cover"})}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Enter Image URL"}),_.jsxs("form",{onSubmit:f,className:"space-y-2",children:[_.jsx("input",{type:"url",value:i,onChange:v=>r(v.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 bg-surface-light rounded-lg text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),_.jsx("button",{type:"submit",disabled:u,className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:u?"Setting Avatar...":"Set Avatar"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Or Choose a Preset"}),_.jsx("div",{className:"grid grid-cols-4 gap-2",children:D5.map(v=>_.jsx("button",{onClick:()=>p(v),className:"aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-primary transition-all",children:_.jsx("img",{src:v,alt:"Preset avatar",className:"w-full h-full object-cover"})},v))})]})]})]})})},M5=({user:n,onUpdate:t})=>{var d,f,p,v,x,T,C;const[e,i]=Q.useState(!1),r=(S,A)=>{const L={...S};return A&&(A.forEach(G=>{const F=G.parentStat.toLowerCase();if(F in L){const Y=G.value*(G.boostRatio||1);L[F]+=Y}}),Object.keys(L).forEach(G=>{L[G]=Math.min(L[G],100)})),L},o=async S=>{var L;if(!n)return;const A=((L=n.customStats)==null?void 0:L.filter(G=>G.name!==S.name||G.parentStat!==S.parentStat))||[];try{await xe(Zt(Yt,"users",n.uid),{customStats:A}),t({customStats:A})}catch(G){console.error("Error deleting substat:",G)}},l=n?r(n.stats,n.customStats):null,u=((d=n==null?void 0:n.customStats)==null?void 0:d.reduce((S,A)=>{const L=A.parentStat.toLowerCase();return S[L]||(S[L]=[]),S[L].push(A),S},{}))||{};return _.jsxs("div",{className:"card",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Stats"}),_.jsxs("button",{onClick:()=>t({showAddSubstatModal:!0}),className:"btn-primary flex items-center gap-2 text-sm",children:[_.jsx("span",{children:"+"}),_.jsx("span",{children:"Add Substat"})]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Physical"}),_.jsx("span",{className:"text-primary",children:Math.floor((l==null?void 0:l.physical)||0)})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full mb-2",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(l==null?void 0:l.physical)||0}%`}})}),(f=u.physical)==null?void 0:f.map(S=>_.jsxs("div",{className:"ml-4 flex items-center justify-between text-sm group",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:S.icon}),_.jsx("span",{className:"text-gray-400",children:S.name}),_.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.boostRatio||1)*100,"%)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-gray-400",children:["+",S.value]}),_.jsx("button",{onClick:()=>o(S),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-400 transition-opacity",children:"×"})]})]},S.name))]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Mental"}),_.jsx("span",{className:"text-primary",children:Math.floor((l==null?void 0:l.mental)||0)})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full mb-2",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(l==null?void 0:l.mental)||0}%`}})}),(p=u.mental)==null?void 0:p.map(S=>_.jsxs("div",{className:"ml-4 flex items-center justify-between text-sm group",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:S.icon}),_.jsx("span",{className:"text-gray-400",children:S.name}),_.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.boostRatio||1)*100,"%)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-gray-400",children:["+",S.value]}),_.jsx("button",{onClick:()=>o(S),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-400 transition-opacity",children:"×"})]})]},S.name))]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Creativity"}),_.jsx("span",{className:"text-primary",children:Math.floor((l==null?void 0:l.creativity)||0)})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full mb-2",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(l==null?void 0:l.creativity)||0}%`}})}),(v=u.creativity)==null?void 0:v.map(S=>_.jsxs("div",{className:"ml-4 flex items-center justify-between text-sm group",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:S.icon}),_.jsx("span",{className:"text-gray-400",children:S.name}),_.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.boostRatio||1)*100,"%)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-gray-400",children:["+",S.value]}),_.jsx("button",{onClick:()=>o(S),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-400 transition-opacity",children:"×"})]})]},S.name))]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Spiritual"}),_.jsx("span",{className:"text-primary",children:Math.floor((l==null?void 0:l.spiritual)||0)})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full mb-2",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(l==null?void 0:l.spiritual)||0}%`}})}),(x=u.spiritual)==null?void 0:x.map(S=>_.jsxs("div",{className:"ml-4 flex items-center justify-between text-sm group",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:S.icon}),_.jsx("span",{className:"text-gray-400",children:S.name}),_.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.boostRatio||1)*100,"%)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-gray-400",children:["+",S.value]}),_.jsx("button",{onClick:()=>o(S),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-400 transition-opacity",children:"×"})]})]},S.name))]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Social"}),_.jsx("span",{className:"text-primary",children:Math.floor((l==null?void 0:l.social)||0)})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full mb-2",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(l==null?void 0:l.social)||0}%`}})}),(T=u.social)==null?void 0:T.map(S=>_.jsxs("div",{className:"ml-4 flex items-center justify-between text-sm group",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:S.icon}),_.jsx("span",{className:"text-gray-400",children:S.name}),_.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.boostRatio||1)*100,"%)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-gray-400",children:["+",S.value]}),_.jsx("button",{onClick:()=>o(S),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-400 transition-opacity",children:"×"})]})]},S.name))]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Knowledge"}),_.jsx("span",{className:"text-primary",children:Math.floor((l==null?void 0:l.knowledge)||0)})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full mb-2",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(l==null?void 0:l.knowledge)||0}%`}})}),(C=u.knowledge)==null?void 0:C.map(S=>_.jsxs("div",{className:"ml-4 flex items-center justify-between text-sm group",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:S.icon}),_.jsx("span",{className:"text-gray-400",children:S.name}),_.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.boostRatio||1)*100,"%)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"text-gray-400",children:["+",S.value]}),_.jsx("button",{onClick:()=>o(S),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-400 transition-opacity",children:"×"})]})]},S.name))]})]})]})},k5=[{key:"physical",label:"Physical",icon:"🏃"},{key:"mental",label:"Mental",icon:"🧠"},{key:"creativity",label:"Creativity",icon:"🎨"},{key:"spiritual",label:"Spiritual",icon:"🌟"},{key:"social",label:"Social",icon:"👥"},{key:"knowledge",label:"Knowledge",icon:"📚"}],O5=["📈","⚔️","🎮","🎨","📝","🎥","🎭","🎪","🎯","🎲","📚","💻","🎹","🎸"],P5=({onClose:n,onAdd:t})=>{const[e,i]=Q.useState(""),[r,o]=Q.useState(""),[l,u]=Q.useState("📈"),[d,f]=Q.useState(.1),[p,v]=Q.useState(""),x=async()=>{if(!e.trim()){v("Please enter a name for your substat");return}if(!r){v("Please select a parent stat");return}if(!qt.currentUser)return;const T={name:e.trim(),value:10,icon:l,parentStat:r,boostRatio:d};try{const S=(await Ya(Zt(Yt,"users",qt.currentUser.uid))).data();if(!S)throw new Error("User data not found");const A=S.stats||{physical:0,mental:0,creativity:0,spiritual:0,social:0,knowledge:0},L=T.value*d,G=A[r]||0,F=Math.min(100,G+L);await xe(Zt(Yt,"users",qt.currentUser.uid),{customStats:jP(T),stats:{...A,[r]:F}}),t(T),n()}catch(C){console.error("Error adding custom stat:",C),v("Failed to add custom stat")}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Add Custom Stat"}),_.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[p&&_.jsx("div",{className:"text-red-500 text-sm",children:p}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stat Name"}),_.jsx("input",{type:"text",value:e,onChange:T=>i(T.target.value),placeholder:"e.g., Content Creation",className:"input w-full"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Parent Stat"}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:k5.map(T=>_.jsxs("button",{onClick:()=>o(T.key),className:`flex items-center gap-2 p-2 rounded-lg transition-colors ${r===T.key?"bg-primary text-white":"bg-surface-light hover:bg-surface-light/80 text-gray-300"}`,children:[_.jsx("span",{children:T.icon}),_.jsx("span",{children:T.label})]},T.key))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Icon"}),_.jsx("div",{className:"grid grid-cols-5 gap-2",children:O5.map(T=>_.jsx("button",{onClick:()=>u(T),className:`h-10 rounded-lg flex items-center justify-center text-xl transition-colors ${l===T?"bg-primary text-white":"bg-surface-light hover:bg-surface-light/80"}`,children:T},T))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Contribution to Parent Stat"}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("input",{type:"range",min:"0",max:"100",value:d*100,onChange:T=>f(parseInt(T.target.value)/100),className:"flex-1"}),_.jsxs("span",{className:"text-primary font-medium w-12 text-right",children:[Math.round(d*100),"%"]})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"How much this substat contributes to its parent stat when improved"})]}),_.jsx("button",{onClick:x,className:"btn-primary w-full",children:"Add Custom Stat"})]})]})})},Sp=[{label:"Easy",value:"easy",xp:50},{label:"Medium",value:"medium",xp:100},{label:"Hard",value:"hard",xp:200}],j5=[{key:"physical",name:"Physical",icon:"🏃"},{key:"mental",name:"Mental",icon:"🧠"},{key:"creativity",name:"Creativity",icon:"🎨"},{key:"spiritual",name:"Spiritual",icon:"🌟"},{key:"social",name:"Social",icon:"👥"},{key:"knowledge",name:"Knowledge",icon:"📚"}],$T=[{value:"daily",label:"Daily Quest",icon:"📅"},{value:"weekly",label:"Weekly Quest",icon:"📆"},{value:"achievement",label:"Achievement",icon:"🏆"},{value:"habit",label:"Habit",icon:"🔄"}],L5=({onClose:n,customStats:t})=>{const[e,i]=Q.useState(""),[r,o]=Q.useState(""),[l,u]=Q.useState(Sp[0].value),[d,f]=Q.useState($T[0].value),[p,v]=Q.useState({}),[x,T]=Q.useState({}),[C,S]=Q.useState(""),A=(F,Y)=>{v(X=>({...X,[F]:Y}))},L=(F,Y)=>{T(X=>({...X,[F]:Y}))},G=async()=>{var F;if(!e.trim()){S("Please enter a quest title");return}if(qt.currentUser)try{const Y={title:e.trim(),description:r.trim(),difficulty:l,type:d,experience:((F=Sp.find(X=>X.value===l))==null?void 0:F.xp)||50,statBoosts:p,substatBoosts:x,userId:qt.currentUser.uid,completed:!1,createdAt:PP(),completedAt:null};await OP(rv(Yt,"quests"),Y),n()}catch(Y){console.error("Error creating quest:",Y),S("Failed to create quest")}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Create New Quest"}),_.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[C&&_.jsx("div",{className:"text-red-500 text-sm",children:C}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quest Title"}),_.jsx("input",{type:"text",value:e,onChange:F=>i(F.target.value),placeholder:"e.g., Morning Workout",className:"input w-full"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),_.jsx("textarea",{value:r,onChange:F=>o(F.target.value),placeholder:"Describe your quest...",className:"input w-full h-24 resize-none"})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quest Type"}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:$T.map(F=>_.jsxs("button",{onClick:()=>f(F.value),className:`flex items-center gap-2 p-2 rounded-lg transition-colors ${d===F.value?"bg-primary text-white":"bg-surface-light hover:bg-surface-light/80 text-gray-300"}`,children:[_.jsx("span",{children:F.icon}),_.jsx("span",{children:F.label})]},F.value))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty"}),_.jsx("div",{className:"grid grid-cols-3 gap-2",children:Sp.map(F=>_.jsxs("button",{onClick:()=>u(F.value),className:`p-2 rounded-lg transition-colors ${l===F.value?"bg-primary text-white":"bg-surface-light hover:bg-surface-light/80 text-gray-300"}`,children:[F.label,_.jsxs("div",{className:"text-xs opacity-75",children:["+",F.xp," XP"]})]},F.value))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stat Boosts"}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:j5.map(F=>_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:F.icon}),_.jsx("span",{className:"text-gray-300",children:F.name})]}),_.jsx("input",{type:"range",min:"0",max:"10",value:p[F.key]||0,onChange:Y=>A(F.key,parseInt(Y.target.value)),className:"w-full"}),_.jsxs("div",{className:"text-right text-sm text-primary",children:["+",p[F.key]||0]})]},F.key))})]}),t.length>0&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Substat Boosts"}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(F=>_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{children:F.icon}),_.jsx("span",{className:"text-gray-300",children:F.name})]}),_.jsx("input",{type:"range",min:"0",max:"20",value:x[F.name]||0,onChange:Y=>L(F.name,parseInt(Y.target.value)),className:"w-full"}),_.jsxs("div",{className:"text-right text-sm text-primary",children:["+",x[F.name]||0]})]},F.name))})]}),_.jsx("button",{onClick:G,className:"btn-primary w-full",children:"Create Quest"})]})]})})},V5=()=>{const[n,t]=Q.useState([]),[e,i]=Q.useState(!0),[r,o]=Q.useState(null);return Q.useEffect(()=>{if(!qt.currentUser)return;const x=rv(Yt,"quests"),T=SA(x,AA("userId","==",qt.currentUser.uid),IP("createdAt","desc")),C=DA(T,S=>{try{const A=S.docs.map(L=>({id:L.id,...L.data()}));t(A),i(!1)}catch(A){console.error("Error fetching quests:",A),o("Failed to fetch quests"),i(!1)}},S=>{console.error("Error in quests subscription:",S),o("Failed to subscribe to quests"),i(!1)});return()=>C()},[]),{quests:n,loading:e,error:r,completeQuest:async x=>{if(qt.currentUser)try{const T=Zt(Yt,"quests",x),C=n.find(F=>F.id===x);if(!C)throw new Error("Quest not found");await xe(T,{completed:!0,completedAt:ke.now()});const S=Zt(Yt,"users",qt.currentUser.uid),L=(await Ya(S)).data();if(!L)throw new Error("User data not found");const G={};if(Object.entries(C.statBoosts).forEach(([F,Y])=>{G[`stats.${F}`]=Pc(Y)}),Object.keys(C.substatBoosts).length>0&&L.customStats){const F=L.customStats.map(Y=>{const X=C.substatBoosts[Y.name]||0;if(X>0){const Z=Math.min(100,Y.value+X),O=Y.value*(Y.boostRatio||.1),D=Z*(Y.boostRatio||.1)-O,k=G[`stats.${Y.parentStat}`]||Pc(0);return G[`stats.${Y.parentStat}`]=Pc(k.operand+D),{...Y,value:Z}}return Y});await xe(S,{customStats:F,...G,experience:Pc(C.experience)})}else await xe(S,{...G,experience:Pc(C.experience)})}catch(T){throw console.error("Error completing quest:",T),new Error("Failed to complete quest")}},getDailyQuests:()=>n.filter(x=>x.type==="daily"&&!x.completed),getWeeklyQuests:()=>n.filter(x=>x.type==="weekly"&&!x.completed),getAchievements:()=>n.filter(x=>x.type==="achievement"),getHabits:()=>n.filter(x=>x.type==="habit"&&!x.completed),getCompletedQuests:()=>n.filter(x=>x.completed)}},QT=({currentImageUrl:n,onImageUpdate:t,onClose:e})=>{const[i,r]=Q.useState(n||""),[o,l]=Q.useState(null),u=v=>{try{if(v.includes("imgur.com")){v=v.replace(/\.[^/.]+$/,"");let x;if(v.includes("/a/")||v.includes("/gallery/"),x=v.split("/").pop(),x)return`https://i.imgur.com/${x}.jpg`}return v}catch(x){return console.error("Error converting URL:",x),v}},d=v=>new Promise(x=>{const T=new Image;T.onload=()=>x(!0),T.onerror=()=>x(!1),T.src=v}),f=async()=>{try{if(l(null),!i.trim()){l("Please enter an image URL");return}const v=u(i.trim());if(!await d(v)){l("Invalid image URL. Please make sure it's a direct link to an image.");return}t(v)}catch(v){console.error("Error setting image:",v),l("Failed to set image. Please try a different URL.")}},p=["https://i.imgur.com/qW4fKh3.jpg","https://i.imgur.com/3tYXHLU.jpg","https://i.imgur.com/mF9DGp4.jpg","https://i.imgur.com/dHKKrPv.jpg","https://i.imgur.com/JxKgK9Z.jpg","https://i.imgur.com/L8579Xt.jpg"];return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Change Quick Image"}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[n&&_.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:_.jsx("img",{src:n,alt:"Current",className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Image URL"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",value:i,onChange:v=>r(v.target.value),placeholder:"Enter image URL...",className:"flex-1 px-4 py-2 bg-surface-light rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"}),_.jsx("button",{onClick:f,className:"px-4 py-2 bg-primary text-black rounded-lg hover:bg-primary-dark transition-colors",children:"Set"})]}),o&&_.jsx("p",{className:"text-red-500 text-sm",children:o})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Or choose a preset"}),_.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map((v,x)=>_.jsx("button",{onClick:()=>t(v),className:"aspect-video rounded-lg overflow-hidden hover:ring-2 hover:ring-primary transition-all",children:_.jsx("img",{src:v,alt:`Preset ${x+1}`,className:"w-full h-full object-cover"})},x))})]})]})]})})},tn=[];for(let n=0;n<256;++n)tn.push((n+256).toString(16).slice(1));function U5(n,t=0){return(tn[n[t+0]]+tn[n[t+1]]+tn[n[t+2]]+tn[n[t+3]]+"-"+tn[n[t+4]]+tn[n[t+5]]+"-"+tn[n[t+6]]+tn[n[t+7]]+"-"+tn[n[t+8]]+tn[n[t+9]]+"-"+tn[n[t+10]]+tn[n[t+11]]+tn[n[t+12]]+tn[n[t+13]]+tn[n[t+14]]+tn[n[t+15]]).toLowerCase()}let Ap;const z5=new Uint8Array(16);function B5(){if(!Ap){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ap=crypto.getRandomValues.bind(crypto)}return Ap(z5)}const F5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),WT={randomUUID:F5};function te(n,t,e){var r;if(WT.randomUUID&&!n)return WT.randomUUID();n=n||{};const i=n.random??((r=n.rng)==null?void 0:r.call(n))??B5();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,U5(i)}const KT=[{id:te(),title:"Take a 30-minute walk",description:"Go for a refreshing 30-minute walk outside.",difficulty:"easy",timeToAccept:60,timeToComplete:24,type:"physical",rewards:{experience:50,stats:{physical:2,mental:1}}},{id:te(),title:"Do 20 Push-ups",description:"Complete 20 push-ups (can be done in sets).",difficulty:"medium",timeToAccept:30,timeToComplete:24,type:"physical",rewards:{experience:75,stats:{physical:3}}},{id:te(),title:"Morning Stretching Routine",description:"Complete a 15-minute morning stretching routine.",difficulty:"easy",timeToAccept:120,timeToComplete:24,type:"physical",rewards:{experience:40,stats:{physical:2,spiritual:1}}},{id:te(),title:"Run 2km",description:"Go for a 2km run at your own pace.",difficulty:"medium",timeToAccept:90,timeToComplete:24,type:"physical",rewards:{experience:85,stats:{physical:4,mental:2}}},{id:te(),title:"Yoga Session",description:"Complete a 20-minute yoga session.",difficulty:"medium",timeToAccept:60,timeToComplete:24,type:"physical",rewards:{experience:65,stats:{physical:3,spiritual:2}}},{id:te(),title:"Meditation Session",description:"Complete a 10-minute meditation session.",difficulty:"easy",timeToAccept:60,timeToComplete:24,type:"mental",rewards:{experience:45,stats:{mental:2,spiritual:2}}},{id:te(),title:"Solve a Puzzle",description:"Complete a crossword, sudoku, or similar puzzle.",difficulty:"medium",timeToAccept:45,timeToComplete:24,type:"mental",rewards:{experience:60,stats:{mental:3,knowledge:1}}},{id:te(),title:"Memory Exercise",description:"Practice a memory exercise for 15 minutes.",difficulty:"medium",timeToAccept:60,timeToComplete:24,type:"mental",rewards:{experience:55,stats:{mental:3,knowledge:2}}},{id:te(),title:"Focus Time",description:"Spend 25 minutes in focused work without distractions.",difficulty:"hard",timeToAccept:30,timeToComplete:24,type:"mental",rewards:{experience:80,stats:{mental:4,knowledge:2}}},{id:te(),title:"Call a Friend",description:"Call a friend or family member you haven't spoken to in a while.",difficulty:"easy",timeToAccept:180,timeToComplete:24,type:"social",rewards:{experience:55,stats:{social:3,mental:1}}},{id:te(),title:"Group Activity",description:"Participate in a group activity or meeting.",difficulty:"medium",timeToAccept:120,timeToComplete:24,type:"social",rewards:{experience:80,stats:{social:4}}},{id:te(),title:"Help Someone",description:"Offer help to someone in need.",difficulty:"medium",timeToAccept:180,timeToComplete:24,type:"social",rewards:{experience:70,stats:{social:3,spiritual:2}}},{id:te(),title:"Team Project",description:"Work on a project with others.",difficulty:"hard",timeToAccept:240,timeToComplete:24,type:"social",rewards:{experience:100,stats:{social:5,knowledge:2}}},{id:te(),title:"Draw Something",description:"Spend 20 minutes drawing or sketching anything.",difficulty:"easy",timeToAccept:90,timeToComplete:24,type:"creative",rewards:{experience:45,stats:{creativity:3}}},{id:te(),title:"Write a Short Story",description:"Write a short story or creative piece (minimum 500 words).",difficulty:"hard",timeToAccept:120,timeToComplete:24,type:"creative",rewards:{experience:100,stats:{creativity:4,knowledge:2}}},{id:te(),title:"Photography Challenge",description:"Take 5 creative photos of everyday objects.",difficulty:"medium",timeToAccept:120,timeToComplete:24,type:"creative",rewards:{experience:65,stats:{creativity:3,knowledge:1}}},{id:te(),title:"Music Creation",description:"Create a simple melody or rhythm.",difficulty:"medium",timeToAccept:90,timeToComplete:24,type:"creative",rewards:{experience:70,stats:{creativity:3,mental:2}}},{id:te(),title:"Read an Article",description:"Read an educational article about a topic you're interested in.",difficulty:"easy",timeToAccept:60,timeToComplete:24,type:"knowledge",rewards:{experience:40,stats:{knowledge:2,mental:1}}},{id:te(),title:"Learn Something New",description:"Watch an educational video or tutorial about a new topic.",difficulty:"medium",timeToAccept:90,timeToComplete:24,type:"knowledge",rewards:{experience:70,stats:{knowledge:3,creativity:1}}},{id:te(),title:"Research Project",description:"Research a topic you're curious about for 30 minutes.",difficulty:"hard",timeToAccept:120,timeToComplete:24,type:"knowledge",rewards:{experience:90,stats:{knowledge:4,mental:2}}},{id:te(),title:"Language Practice",description:"Practice a language you're learning for 20 minutes.",difficulty:"medium",timeToAccept:60,timeToComplete:24,type:"knowledge",rewards:{experience:60,stats:{knowledge:3,social:1}}},{id:te(),title:"Gratitude Journal",description:"Write down 3 things you're grateful for today.",difficulty:"easy",timeToAccept:60,timeToComplete:24,type:"spiritual",rewards:{experience:45,stats:{spiritual:2,mental:1}}},{id:te(),title:"Nature Walk",description:"Take a mindful walk in nature for 20 minutes.",difficulty:"easy",timeToAccept:120,timeToComplete:24,type:"spiritual",rewards:{experience:50,stats:{spiritual:2,physical:1}}},{id:te(),title:"Mindful Eating",description:"Practice mindful eating during one meal.",difficulty:"medium",timeToAccept:90,timeToComplete:24,type:"spiritual",rewards:{experience:55,stats:{spiritual:3,physical:1}}},{id:te(),title:"Reflection Time",description:"Spend 15 minutes in quiet reflection.",difficulty:"medium",timeToAccept:60,timeToComplete:24,type:"spiritual",rewards:{experience:50,stats:{spiritual:3,mental:2}}},{id:te(),title:"Cook a New Recipe",description:"Try cooking a recipe you've never made before.",difficulty:"medium",timeToAccept:180,timeToComplete:24,type:"creative",rewards:{experience:75,stats:{creativity:3,knowledge:2}}},{id:te(),title:"Dance Session",description:"Dance to your favorite music for 15 minutes.",difficulty:"easy",timeToAccept:30,timeToComplete:24,type:"physical",rewards:{experience:45,stats:{physical:2,mental:1}}},{id:te(),title:"Plant Care",description:"Take care of your plants or start a new one.",difficulty:"easy",timeToAccept:60,timeToComplete:24,type:"spiritual",rewards:{experience:40,stats:{spiritual:2,knowledge:1}}},{id:te(),title:"Digital Detox",description:"Spend 1 hour without using any digital devices.",difficulty:"hard",timeToAccept:60,timeToComplete:24,type:"mental",rewards:{experience:85,stats:{mental:3,spiritual:2}}}],Cd=43200,YT=1440,XT=Symbol.for("constructDateFrom");function Vv(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&XT in n?n[XT](t):n instanceof Date?new n.constructor(t):new Date(t)}function zr(n,t){return Vv(n,n)}let H5={};function q5(){return H5}function ZT(n){const t=zr(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Uv(n,...t){const e=Vv.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function Bd(n,t){const e=+zr(n)-+zr(t);return e<0?-1:e>0?1:e}function G5(n){return Vv(n,Date.now())}function $5(n,t,e){const[i,r]=Uv(e==null?void 0:e.in,n,t),o=i.getFullYear()-r.getFullYear(),l=i.getMonth()-r.getMonth();return o*12+l}function Q5(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function W5(n,t){return+zr(n)-+zr(t)}function K5(n,t){const e=zr(n);return e.setHours(23,59,59,999),e}function Y5(n,t){const e=zr(n),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function X5(n,t){const e=zr(n);return+K5(e)==+Y5(e)}function Z5(n,t,e){const[i,r,o]=Uv(e==null?void 0:e.in,n,n,t),l=Bd(r,o),u=Math.abs($5(r,o));if(u<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-l*u);let d=Bd(r,o)===-l;X5(i)&&u===1&&Bd(i,o)===1&&(d=!1);const f=l*(u-+d);return f===0?0:f}function J5(n,t,e){const i=W5(n,t)/1e3;return Q5(e==null?void 0:e.roundingMethod)(i)}const t3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},e3=(n,t,e)=>{let i;const r=t3[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Cp(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const n3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},i3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},s3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r3={date:Cp({formats:n3,defaultWidth:"full"}),time:Cp({formats:i3,defaultWidth:"full"}),dateTime:Cp({formats:s3,defaultWidth:"full"})},a3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},o3=(n,t,e,i)=>a3[n];function Bc(n){return(t,e)=>{const i=e!=null&&e.context?String(e.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,u=e!=null&&e.width?String(e.width):l;r=n.formattingValues[u]||n.formattingValues[l]}else{const l=n.defaultWidth,u=e!=null&&e.width?String(e.width):n.defaultWidth;r=n.values[u]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}const l3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},u3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},h3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},d3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},f3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m3=(n,t)=>{const e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},g3={ordinalNumber:m3,era:Bc({values:l3,defaultWidth:"wide"}),quarter:Bc({values:c3,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Bc({values:u3,defaultWidth:"wide"}),day:Bc({values:h3,defaultWidth:"wide"}),dayPeriod:Bc({values:d3,defaultWidth:"wide",formattingValues:f3,defaultFormattingWidth:"wide"})};function Fc(n){return(t,e={})=>{const i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;const l=o[0],u=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?y3(u,v=>v.test(l)):p3(u,v=>v.test(l));let f;f=n.valueCallback?n.valueCallback(d):d,f=e.valueCallback?e.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function p3(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function y3(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function v3(n){return(t,e={})=>{const i=t.match(n.matchPattern);if(!i)return null;const r=i[0],o=t.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=e.valueCallback?e.valueCallback(l):l;const u=t.slice(r.length);return{value:l,rest:u}}}const _3=/^(\d+)(th|st|nd|rd)?/i,b3=/\d+/i,x3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w3={any:[/^b/i,/^(a|c)/i]},T3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},E3={any:[/1/i,/2/i,/3/i,/4/i]},S3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},A3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},C3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},R3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},I3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},N3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},D3={ordinalNumber:v3({matchPattern:_3,parsePattern:b3,valueCallback:n=>parseInt(n,10)}),era:Fc({matchPatterns:x3,defaultMatchWidth:"wide",parsePatterns:w3,defaultParseWidth:"any"}),quarter:Fc({matchPatterns:T3,defaultMatchWidth:"wide",parsePatterns:E3,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fc({matchPatterns:S3,defaultMatchWidth:"wide",parsePatterns:A3,defaultParseWidth:"any"}),day:Fc({matchPatterns:C3,defaultMatchWidth:"wide",parsePatterns:R3,defaultParseWidth:"any"}),dayPeriod:Fc({matchPatterns:I3,defaultMatchWidth:"any",parsePatterns:N3,defaultParseWidth:"any"})},M3={code:"en-US",formatDistance:e3,formatLong:r3,formatRelative:o3,localize:g3,match:D3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function k3(n,t,e){const i=q5(),r=(e==null?void 0:e.locale)??i.locale??M3,o=2520,l=Bd(n,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:l}),[d,f]=Uv(e==null?void 0:e.in,...l>0?[t,n]:[n,t]),p=J5(f,d),v=(ZT(f)-ZT(d))/1e3,x=Math.round((p-v)/60);let T;if(x<2)return e!=null&&e.includeSeconds?p<5?r.formatDistance("lessThanXSeconds",5,u):p<10?r.formatDistance("lessThanXSeconds",10,u):p<20?r.formatDistance("lessThanXSeconds",20,u):p<40?r.formatDistance("halfAMinute",0,u):p<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):x===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",x,u);if(x<45)return r.formatDistance("xMinutes",x,u);if(x<90)return r.formatDistance("aboutXHours",1,u);if(x<YT){const C=Math.round(x/60);return r.formatDistance("aboutXHours",C,u)}else{if(x<o)return r.formatDistance("xDays",1,u);if(x<Cd){const C=Math.round(x/YT);return r.formatDistance("xDays",C,u)}else if(x<Cd*2)return T=Math.round(x/Cd),r.formatDistance("aboutXMonths",T,u)}if(T=Z5(f,d),T<12){const C=Math.round(x/Cd);return r.formatDistance("xMonths",C,u)}else{const C=T%12,S=Math.trunc(T/12);return C<3?r.formatDistance("aboutXYears",S,u):C<9?r.formatDistance("overXYears",S,u):r.formatDistance("almostXYears",S+1,u)}}function JT(n,t){return k3(n,G5(n),t)}const O3=({user:n,onUpdate:t})=>{const[e,i]=Q.useState([]),[r,o]=Q.useState(!1),l=async()=>{if(!(n!=null&&n.uid)||r){console.log("Cannot generate quest:",{hasUserId:!!(n!=null&&n.uid),loading:r});return}try{o(!0),console.log("Starting quest generation");const v=Date.now(),x=e.map(C=>({...C,status:C.status==="available"&&v>C.availableUntil?"expired":C.status})).filter(C=>C.status!=="expired");console.log("Current quests after filtering:",x);const T=x.filter(C=>C.status==="available").length;if(console.log("Available quests count:",T),T<3){if(!(Math.random()<.02)){console.log("Random chance check failed, skipping quest generation");return}const S=KT.filter(F=>!x.some(Y=>Y.title===F.title));if(console.log("Available quest templates:",S.length),S.length===0){console.log("No more quest templates available");return}const A=Math.floor(Math.random()*S.length),G={...S[A],availableUntil:v+2*60*60*1e3,status:"available"};x.push(G),console.log("Added new quest:",G.title)}console.log("Updating Firestore with quests:",x),await xe(Zt(Yt,"users",n.uid),{activeQuests:x}),console.log("Successfully updated Firestore")}catch(v){console.error("Error generating new quests:",v)}finally{o(!1)}};Q.useEffect(()=>{if(!(n!=null&&n.uid)){console.log("No user ID available");return}console.log("Setting up Firestore listener for user:",n.uid);const v=DA(Zt(Yt,"users",n.uid),async x=>{const T=x.data();if(console.log("Received user data:",T),!T){console.log("No user data found");return}if(T.activeQuests)console.log("Found existing quests:",T.activeQuests),i(T.activeQuests);else{console.log("Initializing new quests for user");const C=Date.now(),S=[];for(let A=0;A<3;A++){const L=KT.filter(F=>!S.some(Y=>Y.title===F.title));if(L.length===0){console.log("No more available quest templates");break}const G=L[Math.floor(Math.random()*L.length)];S.push({...G,availableUntil:C+2*60*60*1e3,status:"available"})}console.log("Generated initial quests:",S);try{await xe(Zt(Yt,"users",n.uid),{activeQuests:S}),console.log("Successfully updated Firestore with initial quests"),i(S)}catch(A){console.error("Error initializing quests:",A)}}});return()=>v()},[n==null?void 0:n.uid]),Q.useEffect(()=>{if(!(n!=null&&n.uid)){console.log("No user ID available for quest generation");return}console.log("Starting periodic quest generation"),l();const v=setInterval(()=>{console.log("Checking for new quests..."),l()},5*60*1e3);return()=>clearInterval(v)},[n==null?void 0:n.uid]);const u=async v=>{if(!(!n||r)){o(!0);try{const x=Date.now(),T=e.map(C=>C.id===v.id?{...C,status:"accepted",acceptedAt:x,availableUntil:x+24*60*60*1e3}:C);await xe(Zt(Yt,"users",n.uid),{activeQuests:T})}catch(x){console.error("Error accepting quest:",x)}finally{o(!1)}}},d=async v=>{if(!(!n||r)){o(!0);try{const x=Date.now(),T=e.map(A=>A.id===v.id?{...A,status:"completed",completedAt:x}:A),C=n.experience+v.rewards.experience,S={...n.stats};Object.entries(v.rewards.stats).forEach(([A,L])=>{const G=A;S[G]=Math.min(100,(S[G]||0)+(L||0))}),await xe(Zt(Yt,"users",n.uid),{activeQuests:T,experience:C,stats:S})}catch(x){console.error("Error completing quest:",x)}finally{o(!1)}}},f=v=>{if(v.status==="available")return`Expires ${JT(v.availableUntil,{addSuffix:!0})}`;if(v.status==="accepted"&&v.acceptedAt){const x=v.acceptedAt+864e5;return`Expires ${JT(x,{addSuffix:!0})}`}return""},p=v=>{switch(v){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-gray-400"}};return _.jsxs("div",{className:"card",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-4",children:"Random Quests"}),_.jsxs("div",{className:"space-y-4",children:[e.map(v=>_.jsxs("div",{className:`p-4 rounded-lg bg-surface-light ${v.status==="completed"?"opacity-50":""}`,children:[_.jsxs("div",{className:"flex justify-between items-start mb-2",children:[_.jsx("h3",{className:"text-gray-100 font-medium",children:v.title}),_.jsx("span",{className:`text-sm ${p(v.difficulty)}`,children:v.difficulty})]}),_.jsx("p",{className:"text-gray-400 text-sm mb-3",children:v.description}),_.jsxs("div",{className:"mb-3",children:[_.jsx("p",{className:"text-sm text-gray-300",children:"Rewards:"}),_.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[_.jsxs("span",{className:"text-yellow-400",children:["+",v.rewards.experience," XP"]}),Object.entries(v.rewards.stats).map(([x,T])=>_.jsxs("span",{className:"text-primary",children:["+",T," ",x]},x))]})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-gray-400",children:f(v)}),_.jsxs("div",{className:"flex gap-2",children:[v.status==="available"&&_.jsx("button",{onClick:()=>u(v),disabled:r,className:"btn-primary text-sm",children:"Accept"}),v.status==="accepted"&&_.jsx("button",{onClick:()=>d(v),disabled:r,className:"btn-primary text-sm",children:"Complete"})]})]})]},v.id)),e.length===0&&_.jsx("div",{className:"text-center text-gray-400 py-8",children:"No quests available right now. Check back soon!"})]})]})};Wf.register(Zc,zd,Rr,QU,o5,JU);const P3=()=>{const[n]=Mu(qt),[t,e]=Q.useState(null),[i,r]=Q.useState(!0),[o,l]=Q.useState(!1),[u,d]=Q.useState(!1),[f,p]=Q.useState(!1),[v,x]=Q.useState(!1),[T,C]=Q.useState(!1),{loading:S,error:A,completeQuest:L,getDailyQuests:G,getWeeklyQuests:F,getHabits:Y,getAchievements:X}=V5();Q.useEffect(()=>{(async()=>{var ft;if(n)try{const gt=await Ya(Zt(Yt,"users",n.uid));if(gt.exists()){const tt=gt.data(),ut={id:n.uid,uid:n.uid,email:n.email||"",displayName:n.displayName||"",avatarUrl:tt.avatarUrl||"",bannerUrl:tt.bannerUrl||"",topImageUrl:tt.topImageUrl||"",sideImageUrl:tt.sideImageUrl||"",quickImageUrl:tt.quickImageUrl||"",headerImageUrl:tt.headerImageUrl||"",showAddSubstatModal:tt.showAddSubstatModal||!1,stats:tt.stats||{physical:0,mental:0,creativity:0,spiritual:0,social:0,knowledge:0},customStats:tt.customStats||[],activeQuests:tt.activeQuests||[],experience:tt.experience||0,level:tt.level||1,createdAt:((ft=tt.createdAt)==null?void 0:ft.toDate())||new Date,hp:tt.hp||100,energy:tt.energy||100,themeColor:tt.themeColor||"",borderColor:tt.borderColor||"",showBorders:tt.showBorders||!1};e(ut)}else{const tt={id:n.uid,uid:n.uid,email:n.email||"",displayName:n.displayName||"",avatarUrl:"",bannerUrl:"",topImageUrl:"",sideImageUrl:"",quickImageUrl:"",headerImageUrl:"",showAddSubstatModal:!1,stats:{physical:0,mental:0,creativity:0,spiritual:0,social:0,knowledge:0},customStats:[],activeQuests:[],experience:0,level:1,createdAt:new Date,hp:100,energy:100,themeColor:"",borderColor:"",showBorders:!1},ut={...tt,createdAt:new Date};await xe(Zt(Yt,"users",n.uid),ut),e(tt)}}catch(gt){console.error("Error fetching user data:",gt)}finally{r(!1)}})()},[n]);const Z=(M,ft)=>{const gt={...M};return ft&&(ft.forEach(tt=>{const ut=tt.parentStat.toLowerCase();if(ut in gt){const yt=tt.value*(tt.boostRatio||1);gt[ut]+=yt}}),Object.keys(gt).forEach(tt=>{gt[tt]=Math.min(gt[tt],100)})),gt},O={labels:["Physical","Mental","Creativity","Spiritual","Social","Knowledge"],datasets:[{label:"Current Stats",data:t?(()=>{const M=Z(t.stats,t.customStats);return[M.physical,M.mental,M.creativity,M.spiritual,M.social,M.knowledge]})():[],backgroundColor:"rgba(74, 222, 128, 0.1)",borderColor:"rgba(74, 222, 128, 0.5)",borderWidth:1,pointBackgroundColor:"#4ADE80",pointBorderColor:"#4ADE80",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#4ADE80",pointRadius:4,fill:!0}]},N={scales:{r:{beginAtZero:!0,min:0,max:100,angleLines:{color:"rgba(255, 255, 255, 0.05)",lineWidth:1},grid:{color:"rgba(255, 255, 255, 0.05)",circular:!0},pointLabels:{color:"rgb(156, 163, 175)",font:{size:16,family:"'Inter var', sans-serif",weight:"normal"},padding:20},ticks:{display:!1,stepSize:20}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgb(17, 24, 39)",titleFont:{size:14,family:"'Inter var', sans-serif"},bodyFont:{size:12,family:"'Inter var', sans-serif"},padding:12,cornerRadius:8}},elements:{line:{tension:.2}},layout:{padding:20}},D=M=>{e(ft=>ft?{...ft,customStats:[...ft.customStats||[],M]}:null)},k=async M=>{n&&(await xe(Zt(Yt,"users",n.uid),{quickImageUrl:M}),e(ft=>ft?{...ft,quickImageUrl:M}:null),x(!1))},j=async M=>{n&&(await xe(Zt(Yt,"users",n.uid),{headerImageUrl:M}),e(ft=>ft?{...ft,headerImageUrl:M}:null),C(!1))},U=M=>{t&&e({...t,...M})};return i||!t?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):_.jsxs("div",{className:"container mx-auto px-4 py-8",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:"Dashboard"}),_.jsxs("button",{onClick:()=>p(!0),className:"btn-primary flex items-center gap-2",children:[_.jsx("span",{children:"Create Quest"}),_.jsx("span",{children:"+"})]})]}),_.jsxs("div",{className:"flex gap-6",children:[_.jsxs("div",{className:"w-80 space-y-6",children:[_.jsxs("div",{className:"card",children:[_.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-surface-light mb-4 relative group cursor-pointer",onClick:()=>l(!0),children:[t.avatarUrl?_.jsx("img",{src:t.avatarUrl,alt:"Profile",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl font-bold text-primary",children:t.displayName?t.displayName[0].toUpperCase():"?"}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Avatar"})})]}),_.jsx("h2",{className:"text-xl font-bold text-gray-100 text-center mb-2",children:t.displayName||"User"}),_.jsxs("div",{className:"flex items-center justify-center gap-2",children:[_.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",t==null?void 0:t.level]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full w-32",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${((t==null?void 0:t.experience)||0)/(((t==null?void 0:t.level)||1)*1e3)*100}%`}})}),_.jsxs("div",{className:"text-sm text-gray-400",children:[t==null?void 0:t.experience,"/",((t==null?void 0:t.level)||1)*1e3," XP"]})]})]}),_.jsx("div",{className:"bg-surface-dark rounded-xl p-4",children:_.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden aspect-video",onClick:()=>x(!0),children:[t!=null&&t.quickImageUrl?_.jsx("img",{src:t.quickImageUrl,alt:"Quick Image",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full bg-surface-light flex items-center justify-center",children:_.jsx("span",{className:"text-gray-400",children:"Add Quick Image"})}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Image"})})]})}),_.jsx(M5,{user:t,onUpdate:M=>{M.showAddSubstatModal?d(!0):e(ft=>ft?{...ft,...M}:null)}}),_.jsx("div",{className:"card",children:_.jsx(O3,{user:t,onUpdate:U})})]}),_.jsxs("div",{className:"flex-1 space-y-8",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-100 mb-4",children:"Daily Energy"}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"HP"}),_.jsxs("span",{className:"text-primary",children:[t==null?void 0:t.hp,"%"]})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full",children:_.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:`${t==null?void 0:t.hp}%`}})})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[_.jsx("span",{className:"text-gray-300",children:"Energy"}),_.jsxs("span",{className:"text-primary",children:[t==null?void 0:t.energy,"%"]})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full",children:_.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${t==null?void 0:t.energy}%`}})})]})]})]}),_.jsx("div",{className:"card",children:_.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden aspect-video",onClick:()=>C(!0),children:[t!=null&&t.headerImageUrl?_.jsx("img",{src:t.headerImageUrl,alt:"Header Image",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full bg-surface-light flex items-center justify-center",children:_.jsx("span",{className:"text-gray-400",children:"Add Header Image"})}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Image"})})]})})]}),_.jsxs("div",{className:"card bg-[#1E2024] border border-gray-800 mb-6",children:[_.jsx("h2",{className:"text-2xl font-semibold text-gray-100 mb-8",children:"Stats Overview"}),_.jsx("div",{className:"aspect-square max-w-2xl mx-auto p-4",children:_.jsx(N5,{data:O,options:N})})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-surface p-6 rounded-xl",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Daily Quests"}),S?_.jsx("div",{className:"text-gray-400",children:"Loading quests..."}):A?_.jsx("div",{className:"text-red-500",children:A}):G().length===0?_.jsx("div",{className:"text-gray-400",children:"No daily quests available"}):_.jsx("div",{className:"space-y-4",children:G().map(M=>_.jsx("div",{className:"bg-surface-light p-4 rounded-lg",children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-100",children:M.title}),_.jsx("p",{className:"text-gray-400 text-sm mt-1",children:M.description}),_.jsxs("div",{className:"flex gap-4 mt-2",children:[_.jsxs("div",{className:"text-primary text-sm",children:["+",M.experience," XP"]}),_.jsx("div",{className:"text-gray-400 text-sm",children:Object.entries(M.statBoosts).map(([ft,gt])=>_.jsxs("span",{className:"mr-2",children:["+",gt," ",ft]},ft))})]})]}),_.jsx("button",{onClick:()=>M.id&&L(M.id),className:"btn-primary text-sm",children:"Complete"})]})},M.id))})]}),_.jsxs("div",{className:"bg-surface p-6 rounded-xl",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Weekly Quests"}),S?_.jsx("div",{className:"text-gray-400",children:"Loading quests..."}):A?_.jsx("div",{className:"text-red-500",children:A}):F().length===0?_.jsx("div",{className:"text-gray-400",children:"No weekly quests available"}):_.jsx("div",{className:"space-y-4",children:F().map(M=>_.jsx("div",{className:"bg-surface-light p-4 rounded-lg",children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-100",children:M.title}),_.jsx("p",{className:"text-gray-400 text-sm mt-1",children:M.description}),_.jsxs("div",{className:"flex gap-4 mt-2",children:[_.jsxs("div",{className:"text-primary text-sm",children:["+",M.experience," XP"]}),_.jsx("div",{className:"text-gray-400 text-sm",children:Object.entries(M.statBoosts).map(([ft,gt])=>_.jsxs("span",{className:"mr-2",children:["+",gt," ",ft]},ft))})]})]}),_.jsx("button",{onClick:()=>M.id&&L(M.id),className:"btn-primary text-sm",children:"Complete"})]})},M.id))})]}),_.jsxs("div",{className:"bg-surface p-6 rounded-xl",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Habits"}),S?_.jsx("div",{className:"text-gray-400",children:"Loading habits..."}):A?_.jsx("div",{className:"text-red-500",children:A}):Y().length===0?_.jsx("div",{className:"text-gray-400",children:"No habits available"}):_.jsx("div",{className:"space-y-4",children:Y().map(M=>_.jsx("div",{className:"bg-surface-light p-4 rounded-lg",children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-100",children:M.title}),_.jsx("p",{className:"text-gray-400 text-sm mt-1",children:M.description}),_.jsxs("div",{className:"flex gap-4 mt-2",children:[_.jsxs("div",{className:"text-primary text-sm",children:["+",M.experience," XP"]}),_.jsx("div",{className:"text-gray-400 text-sm",children:Object.entries(M.statBoosts).map(([ft,gt])=>_.jsxs("span",{className:"mr-2",children:["+",gt," ",ft]},ft))})]})]}),_.jsx("button",{onClick:()=>M.id&&L(M.id),className:"btn-primary text-sm",children:"Complete"})]})},M.id))})]}),_.jsxs("div",{className:"bg-surface p-6 rounded-xl",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Achievements"}),S?_.jsx("div",{className:"text-gray-400",children:"Loading achievements..."}):A?_.jsx("div",{className:"text-red-500",children:A}):X().length===0?_.jsx("div",{className:"text-gray-400",children:"No achievements available"}):_.jsx("div",{className:"space-y-4",children:X().map(M=>_.jsx("div",{className:"bg-surface-light p-4 rounded-lg",children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-100",children:M.title}),_.jsx("p",{className:"text-gray-400 text-sm mt-1",children:M.description}),_.jsxs("div",{className:"flex gap-4 mt-2",children:[_.jsxs("div",{className:"text-primary text-sm",children:["+",M.experience," XP"]}),_.jsx("div",{className:"text-gray-400 text-sm",children:Object.entries(M.statBoosts).map(([ft,gt])=>_.jsxs("span",{className:"mr-2",children:["+",gt," ",ft]},ft))})]})]}),!M.completed&&_.jsx("button",{onClick:()=>M.id&&L(M.id),className:"btn-primary text-sm",children:"Complete"})]})},M.id))})]})]})]})]}),o&&_.jsx($1,{currentAvatarUrl:t==null?void 0:t.avatarUrl,onAvatarUpdate:M=>{e(ft=>ft?{...ft,avatarUrl:M}:null),l(!1)},onClose:()=>l(!1)}),u&&_.jsx(P5,{onAdd:D,onClose:()=>d(!1)}),f&&_.jsx(L5,{onClose:()=>p(!1),customStats:(t==null?void 0:t.customStats)||[]}),v&&_.jsx(QT,{currentImageUrl:t==null?void 0:t.quickImageUrl,onImageUpdate:k,onClose:()=>x(!1)}),T&&_.jsx(QT,{currentImageUrl:t==null?void 0:t.headerImageUrl,onImageUpdate:j,onClose:()=>C(!1)})]})},j3=()=>{const n=yf(),[t,e]=Q.useState(""),[i,r]=Q.useState(""),[o,l]=Q.useState(""),u=async d=>{d.preventDefault(),l("");try{await fD(qt,t,i),n("/")}catch{l("Invalid email or password")}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:_.jsxs("div",{className:"max-w-md w-full space-y-8 bg-surface p-8 rounded-xl",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-center text-primary",children:"LifeQuest"}),_.jsx("h2",{className:"mt-6 text-center text-xl text-gray-300",children:"Sign in to your account"})]}),_.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[o&&_.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 rounded-lg p-3 text-sm",children:o}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),_.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"input mt-1 block w-full",placeholder:"Enter your email"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),_.jsx("input",{id:"password",type:"password",required:!0,value:i,onChange:d=>r(d.target.value),className:"input mt-1 block w-full",placeholder:"Enter your password"})]})]}),_.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center",children:"Sign in"}),_.jsxs("div",{className:"text-center text-sm",children:[_.jsx("span",{className:"text-gray-400",children:"Don't have an account? "}),_.jsx(Qo,{to:"/signup",className:"text-primary hover:text-primary-dark",children:"Sign up"})]})]})]})})},L3=()=>{const n=yf(),[t,e]=Q.useState(""),[i,r]=Q.useState(""),[o,l]=Q.useState(""),u=async d=>{d.preventDefault(),l("");let f;try{f=await dD(qt,t,i);const p=f.user;try{await kP(Zt(Yt,"users",p.uid),{id:p.uid,email:p.email,displayName:t.split("@")[0],level:1,experience:0,hp:100,energy:100,stats:{physical:10,mental:10,social:10,creativity:10,knowledge:10,spiritual:10},createdAt:new Date}),n("/")}catch{throw await p.delete(),new Error("Failed to create user profile. Please try again.")}}catch(p){console.error("Signup error:",p),p.code==="auth/email-already-in-use"?l("Email already in use"):p.code==="auth/weak-password"?l("Password should be at least 6 characters"):p.code==="auth/network-request-failed"?l("Network error - Please check your internet connection"):p.code==="auth/invalid-email"?l("Invalid email address"):l(p.message||"Failed to create account")}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:_.jsxs("div",{className:"max-w-md w-full space-y-8 bg-surface p-8 rounded-xl",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-center text-primary",children:"LifeQuest"}),_.jsx("h2",{className:"mt-6 text-center text-xl text-gray-300",children:"Create your account"})]}),_.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[o&&_.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 rounded-lg p-3 text-sm",children:o}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),_.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"input mt-1 block w-full",placeholder:"Enter your email"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),_.jsx("input",{id:"password",type:"password",required:!0,value:i,onChange:d=>r(d.target.value),className:"input mt-1 block w-full",placeholder:"Enter your password"})]})]}),_.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center",children:"Create account"}),_.jsxs("div",{className:"text-center text-sm",children:[_.jsx("span",{className:"text-gray-400",children:"Already have an account? "}),_.jsx(Qo,{to:"/login",className:"text-primary hover:text-primary-dark",children:"Sign in"})]})]})]})})},V3=()=>{const[n]=Mu(qt),[t,e]=Q.useState([]),[i,r]=Q.useState(!0);Q.useEffect(()=>{(async()=>{if(n)try{const f=SA(rv(Yt,"quests"),AA("userId","==",n.uid)),v=(await MP(f)).docs.map(x=>({id:x.id,...x.data()}));e(v)}catch(f){console.error("Error fetching quests:",f)}finally{r(!1)}})()},[n]);const o=async d=>{if(n)try{await xe(Zt(Yt,"quests",d),{completed:!0}),e(f=>f.map(p=>p.id===d?{...p,completed:!0}:p))}catch(f){console.error("Error completing quest:",f)}},l=d=>{switch(d){case"daily":return"text-blue-400";case"weekly":return"text-purple-400";case"achievement":return"text-yellow-400";default:return"text-gray-400"}},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-orange-400";case"epic":return"text-red-400";default:return"text-gray-400"}};return i?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):_.jsxs("div",{className:"space-y-8",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Quests"}),_.jsx("p",{className:"text-gray-400",children:"Complete quests to gain experience and level up"})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"card",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Daily Quests"}),_.jsxs("div",{className:"space-y-4",children:[t.filter(d=>d.type==="daily").map(d=>_.jsx("div",{className:`p-4 rounded-lg bg-surface-light ${d.completed?"opacity-50":""}`,children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-medium text-gray-100",children:d.title}),_.jsx("p",{className:"text-sm text-gray-400",children:d.description}),_.jsxs("div",{className:"flex gap-2 mt-2",children:[_.jsx("span",{className:`text-xs ${l(d.type)}`,children:d.type}),_.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:d.difficulty}),_.jsxs("span",{className:"text-xs text-primary",children:[d.experience," XP"]})]})]}),!d.completed&&_.jsx("button",{onClick:()=>o(d.id),className:"btn-primary",children:"Complete"})]})},d.id)),t.filter(d=>d.type==="daily").length===0&&_.jsx("p",{className:"text-gray-400",children:"No daily quests available"})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Weekly Quests"}),_.jsxs("div",{className:"space-y-4",children:[t.filter(d=>d.type==="weekly").map(d=>_.jsx("div",{className:`p-4 rounded-lg bg-surface-light ${d.completed?"opacity-50":""}`,children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-medium text-gray-100",children:d.title}),_.jsx("p",{className:"text-sm text-gray-400",children:d.description}),_.jsxs("div",{className:"flex gap-2 mt-2",children:[_.jsx("span",{className:`text-xs ${l(d.type)}`,children:d.type}),_.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:d.difficulty}),_.jsxs("span",{className:"text-xs text-primary",children:[d.experience," XP"]})]})]}),!d.completed&&_.jsx("button",{onClick:()=>o(d.id),className:"btn-primary",children:"Complete"})]})},d.id)),t.filter(d=>d.type==="weekly").length===0&&_.jsx("p",{className:"text-gray-400",children:"No weekly quests available"})]})]})]})]})},Ho=[{name:"Emerald",value:"#4ADE80",hoverValue:"#22C55E"},{name:"Purple",value:"#A855F7",hoverValue:"#9333EA"},{name:"Gold",value:"#F59E0B",hoverValue:"#D97706"},{name:"Blue",value:"#3B82F6",hoverValue:"#2563EB"},{name:"Rose",value:"#F43F5E",hoverValue:"#E11D48"},{name:"Cyan",value:"#06B6D4",hoverValue:"#0891B2"}],U3=({onClose:n})=>{const[t,e]=Q.useState(Ho[0].value),[i,r]=Q.useState(""),[o,l]=Q.useState(Ho[0].value),[u,d]=Q.useState(""),[f,p]=Q.useState(!0),[v,x]=Q.useState(null),[T,C]=Q.useState(null);Q.useEffect(()=>{(async()=>{if(!qt.currentUser)return;const O=await Ya(Zt(Yt,"users",qt.currentUser.uid));if(O.exists()){const N=O.data();N.themeColor&&(e(N.themeColor),r(N.themeColor)),N.borderColor&&(l(N.borderColor),d(N.borderColor)),N.showBorders!==void 0&&p(N.showBorders),S(N.themeColor||Ho[0].value,N.borderColor||Ho[0].value,N.showBorders??!0)}})()},[]);const S=(Z,O,N)=>{const D=document.documentElement,k=z3(Z,-20);D.style.setProperty("--color-primary",Z),D.style.setProperty("--color-primary-hover",k);const j=document.createElement("style");j.textContent=`
      .btn-primary {
        background-color: ${Z};
      }
      .btn-primary:hover {
        background-color: ${k};
      }
      .text-primary {
        color: ${Z};
      }
      .bg-primary {
        background-color: ${Z};
      }
      .border-primary {
        border-color: ${O};
      }
      .card {
        border: ${N?`2px solid ${O}`:"none"};
      }
      .panel {
        border: ${N?`2px solid ${O}`:"none"};
      }
      .section {
        border: ${N?`2px solid ${O}`:"none"};
      }
    `;const U=document.getElementById("theme-styles");U&&U.remove(),j.id="theme-styles",document.head.appendChild(j)},A=async Z=>{qt.currentUser&&(e(Z),r(Z),S(Z,o,f),await xe(Zt(Yt,"users",qt.currentUser.uid),{themeColor:Z}))},L=async Z=>{qt.currentUser&&(l(Z),d(Z),S(t,Z,f),await xe(Zt(Yt,"users",qt.currentUser.uid),{borderColor:Z}))},G=async()=>{if(!qt.currentUser)return;const Z=!f;p(Z),S(t,o,Z),await xe(Zt(Yt,"users",qt.currentUser.uid),{showBorders:Z})},F=Z=>{const O=Z.target.value;r(O),X(O)?(x(null),A(O)):x("Please enter a valid hex color (e.g., #FF0000)")},Y=Z=>{const O=Z.target.value;d(O),X(O)?(C(null),L(O)):C("Please enter a valid hex color (e.g., #FF0000)")},X=Z=>/^#[0-9A-F]{6}$/i.test(Z);return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Theme Settings"}),_.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Accent Color"}),_.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ho.map(Z=>_.jsx("button",{onClick:()=>A(Z.value),className:`h-12 rounded-lg flex items-center justify-center transition-all ${t===Z.value?"ring-2 ring-offset-2 ring-offset-surface ring-white":""}`,style:{backgroundColor:Z.value},children:t===Z.value&&_.jsx("span",{className:"text-white text-lg",children:"✓"})},Z.name))}),_.jsxs("div",{className:"flex gap-3 mt-3",children:[_.jsx("input",{type:"color",value:i,onChange:F,className:"h-12 w-12 rounded-lg cursor-pointer"}),_.jsx("input",{type:"text",value:i,onChange:F,placeholder:"#000000",className:"flex-1 px-4 py-2 bg-surface-light rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"})]}),v&&_.jsx("p",{className:"mt-2 text-sm text-red-500",children:v})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Border Settings"}),_.jsx("button",{onClick:G,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f?"bg-primary":"bg-gray-600"}`,children:_.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]}),f&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ho.map(Z=>_.jsx("button",{onClick:()=>L(Z.value),className:`h-12 rounded-lg flex items-center justify-center transition-all ${o===Z.value?"ring-2 ring-offset-2 ring-offset-surface ring-white":""}`,style:{backgroundColor:Z.value},children:o===Z.value&&_.jsx("span",{className:"text-white text-lg",children:"✓"})},`border-${Z.name}`))}),_.jsxs("div",{className:"flex gap-3 mt-3",children:[_.jsx("input",{type:"color",value:u,onChange:Y,className:"h-12 w-12 rounded-lg cursor-pointer"}),_.jsx("input",{type:"text",value:u,onChange:Y,placeholder:"#000000",className:"flex-1 px-4 py-2 bg-surface-light rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"})]}),T&&_.jsx("p",{className:"mt-2 text-sm text-red-500",children:T})]})]})]})]})})};function z3(n,t){const e=n.replace("#",""),i=Math.max(0,Math.min(255,parseInt(e.substr(0,2),16)+t)),r=Math.max(0,Math.min(255,parseInt(e.substr(2,2),16)+t)),o=Math.max(0,Math.min(255,parseInt(e.substr(4,2),16)+t));return`#${i.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`}const B3=["/banners/default1.jpg","/banners/default2.jpg","/banners/default3.jpg","/banners/default4.jpg"],F3=({currentBannerUrl:n,onBannerUpdate:t,onClose:e})=>{const[i,r]=Q.useState(""),[o,l]=Q.useState(null),[u,d]=Q.useState(!1),f=async v=>{if(v.preventDefault(),!(!i||!qt.currentUser)){d(!0),l(null);try{const T=(await fetch(i)).headers.get("content-type");if(!(T!=null&&T.startsWith("image/")))throw new Error("Please provide a valid image URL");await xe(Zt(Yt,"users",qt.currentUser.uid),{bannerUrl:i}),t(i),e()}catch(x){console.error("Error setting banner:",x),l("Failed to set banner. Please provide a valid image URL.")}finally{d(!1)}}},p=async v=>{if(qt.currentUser)try{await xe(Zt(Yt,"users",qt.currentUser.uid),{bannerUrl:v}),t(v),e()}catch(x){console.error("Error setting preset banner:",x),l("Failed to set banner")}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Change Banner"}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[o&&_.jsx("div",{className:"text-red-500 text-sm",children:o}),n&&_.jsx("div",{className:"flex justify-center",children:_.jsx("img",{src:n,alt:"Current banner",className:"w-full h-32 rounded-lg object-cover"})}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Enter Image URL"}),_.jsxs("form",{onSubmit:f,className:"space-y-2",children:[_.jsx("input",{type:"url",value:i,onChange:v=>r(v.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 bg-surface-light rounded-lg text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),_.jsx("button",{type:"submit",disabled:u,className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:u?"Setting Banner...":"Set Banner"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Or Choose a Preset"}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:B3.map(v=>_.jsxs("button",{onClick:()=>p(v),className:"aspect-video rounded-lg overflow-hidden group relative",children:[_.jsx("img",{src:v,alt:"Preset banner",className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Select"})})]},v))})]})]})]})})},my=({currentImageUrl:n,onImageUpdate:t,onClose:e})=>{const[i,r]=Q.useState(n||""),[o,l]=Q.useState(null),u=v=>{try{if(v.includes("imgur.com")){v=v.replace(/\.[^/.]+$/,"");let x;if(v.includes("/a/")||v.includes("/gallery/"),x=v.split("/").pop(),x)return`https://i.imgur.com/${x}.jpg`}return v}catch(x){return console.error("Error converting URL:",x),v}},d=v=>new Promise(x=>{const T=new Image;T.onload=()=>x(!0),T.onerror=()=>x(!1),T.src=v}),f=async()=>{try{if(l(null),!i.trim()){l("Please enter an image URL");return}const v=u(i.trim());if(!await d(v)){l("Invalid image URL. Please make sure it's a direct link to an image.");return}t(v)}catch(v){console.error("Error setting image:",v),l("Failed to set image. Please try a different URL.")}},p=["https://i.imgur.com/rqvLd3N.jpg","https://i.imgur.com/Y5wBKXR.jpg","https://i.imgur.com/2Z7vvuJ.jpg","https://i.imgur.com/QxZhBdE.jpg","https://i.imgur.com/W3KwHJz.jpg","https://i.imgur.com/9zxaFdx.jpg"];return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-surface rounded-xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Change Image"}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-300",children:"✕"})]}),_.jsxs("div",{className:"space-y-6",children:[n&&_.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:_.jsx("img",{src:n,alt:"Current",className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Image URL"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",value:i,onChange:v=>r(v.target.value),placeholder:"Enter image URL...",className:"flex-1 px-4 py-2 bg-surface-light rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"}),_.jsx("button",{onClick:f,className:"px-4 py-2 bg-primary text-black rounded-lg hover:bg-primary-dark transition-colors",children:"Set"})]}),o&&_.jsx("p",{className:"text-red-500 text-sm",children:o})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Or choose a preset"}),_.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map((v,x)=>_.jsx("button",{onClick:()=>t(v),className:"aspect-video rounded-lg overflow-hidden hover:ring-2 hover:ring-primary transition-all",children:_.jsx("img",{src:v,alt:`Preset ${x+1}`,className:"w-full h-full object-cover"})},x))})]})]})]})})},H3=()=>{var T,C;const[n]=Mu(qt),[t,e]=Q.useState(null),[i,r]=Q.useState(!0),[o,l]=Q.useState(!1),[u,d]=Q.useState(!1),[f,p]=Q.useState(!1),[v,x]=Q.useState(!1);return Q.useEffect(()=>{(async()=>{if(n)try{const A=await Ya(Zt(Yt,"users",n.uid));A.exists()&&e(A.data())}catch(A){console.error("Error fetching user data:",A)}finally{r(!1)}})()},[n]),i?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):_.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[_.jsx("div",{className:"card",children:_.jsxs("div",{className:"flex items-start gap-6",children:[_.jsx("div",{className:"relative group",children:_.jsxs("div",{className:"w-32 h-32 rounded-lg overflow-hidden bg-surface-light cursor-pointer",onClick:()=>l(!0),children:[t!=null&&t.avatarUrl?_.jsx("img",{src:t.avatarUrl,alt:"Profile",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl font-bold text-primary",children:(T=t==null?void 0:t.displayName)==null?void 0:T[0].toUpperCase()}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Avatar"})})]})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-100 mb-2",children:t==null?void 0:t.displayName}),_.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-gray-400",children:"Level"}),_.jsx("span",{className:"text-primary font-bold",children:t==null?void 0:t.level})]}),_.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[_.jsx("div",{className:"h-2 bg-surface-light rounded-full flex-1",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${((t==null?void 0:t.experience)||0)/(((t==null?void 0:t.level)||1)*1e3)*100}%`}})}),_.jsxs("span",{className:"text-gray-400 text-sm",children:[t==null?void 0:t.experience,"/",((t==null?void 0:t.level)||1)*1e3," XP"]})]})]}),_.jsx("div",{className:"flex gap-2",children:_.jsx("button",{onClick:()=>d(!0),className:"btn-secondary",children:"Change Theme"})})]})]})}),_.jsxs("div",{className:"card",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-6",children:"Profile Images"}),_.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Banner Image"}),_.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden",onClick:()=>p(!0),children:[t!=null&&t.bannerUrl?_.jsx("img",{src:t.bannerUrl,alt:"Banner",className:"w-full h-32 object-cover"}):_.jsx("div",{className:"w-full h-32 bg-surface-light flex items-center justify-center",children:_.jsx("span",{className:"text-gray-400",children:"No banner image"})}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Banner"})})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Quick Nav Image"}),_.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden",onClick:()=>x(!0),children:[t!=null&&t.quickNavImageUrl?_.jsx("img",{src:t.quickNavImageUrl,alt:"Quick Nav",className:"w-full h-32 object-cover"}):_.jsx("div",{className:"w-full h-32 bg-surface-light flex items-center justify-center",children:_.jsx("span",{className:"text-gray-400",children:"No quick nav image"})}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Quick Nav Image"})})]})]})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-100 mb-6",children:"Stats Management"}),_.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Main Stats"}),_.jsx("div",{className:"space-y-4",children:Object.entries((t==null?void 0:t.stats)||{}).map(([S,A])=>_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex justify-between text-sm",children:[_.jsx("span",{className:"text-gray-300 capitalize",children:S}),_.jsx("span",{className:"text-primary",children:A})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${A}%`}})})]},S))})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Custom Stats"}),_.jsxs("div",{className:"space-y-4",children:[(C=t==null?void 0:t.customStats)==null?void 0:C.map((S,A)=>_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex justify-between text-sm",children:[_.jsx("span",{className:"text-gray-300",children:S.name}),_.jsx("span",{className:"text-primary",children:S.value})]}),_.jsx("div",{className:"h-2 bg-surface-light rounded-full",children:_.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${S.value}%`}})})]},A)),_.jsx("button",{className:"btn-secondary w-full",children:"Add Custom Stat"})]})]})]})]}),o&&_.jsx($1,{currentAvatarUrl:t==null?void 0:t.avatarUrl,onAvatarUpdate:S=>{e(A=>A?{...A,avatarUrl:S}:null),l(!1)},onClose:()=>l(!1)}),u&&_.jsx(U3,{onClose:()=>d(!1)}),f&&_.jsx(F3,{currentBannerUrl:t==null?void 0:t.bannerUrl,onBannerUpdate:S=>{e(A=>A?{...A,bannerUrl:S}:null),p(!1)},onClose:()=>p(!1)}),v&&_.jsx(my,{currentImageUrl:t==null?void 0:t.quickNavImageUrl,onImageUpdate:S=>{e(A=>A?{...A,quickNavImageUrl:S}:null),x(!1)},onClose:()=>x(!1)})]})},q3=()=>{var v;const[n]=Mu(qt),[t,e]=Q.useState(null),[i,r]=Q.useState(!1),[o,l]=Q.useState(!1),u=vl();Q.useEffect(()=>{(async()=>{if(!n)return;const T=await Ya(Zt(Yt,"users",n.uid));T.exists()&&e(T.data())})()},[n]);const d=x=>u.pathname===x,f=async x=>{n&&(await xe(Zt(Yt,"users",n.uid),{topImageUrl:x}),e(T=>T?{...T,topImageUrl:x}:null),r(!1))},p=async x=>{n&&(await xe(Zt(Yt,"users",n.uid),{sideImageUrl:x}),e(T=>T?{...T,sideImageUrl:x}:null),l(!1))};return _.jsxs("div",{className:"min-h-screen bg-background",children:[(t==null?void 0:t.bannerUrl)&&_.jsx("div",{className:"w-full h-48 relative",children:_.jsx("img",{src:t.bannerUrl,alt:"Banner",className:"w-full h-full object-cover"})}),_.jsx("div",{className:"fixed inset-y-0 left-0 w-64 bg-surface-dark",children:_.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"p-4",children:_.jsx(Qo,{to:"/",className:"text-2xl font-bold text-primary",children:"Life Quest"})}),_.jsx("div",{className:"px-4 mb-4",children:_.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden aspect-video",onClick:()=>r(!0),children:[t!=null&&t.topImageUrl?_.jsx("img",{src:t.topImageUrl,alt:"Top Image",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full bg-surface-light flex items-center justify-center",children:_.jsx("span",{className:"text-gray-400",children:"Add Top Image"})}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Image"})})]})}),_.jsx("nav",{className:"flex-1 p-4",children:_.jsxs("ul",{className:"space-y-2",children:[_.jsx("li",{children:_.jsxs(Qo,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${d("/")?"bg-primary text-black":"text-gray-300 hover:bg-surface"}`,children:[_.jsx("span",{children:"🏠"}),_.jsx("span",{children:"Dashboard"})]})}),_.jsx("li",{children:_.jsxs(Qo,{to:"/quests",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${d("/quests")?"bg-primary text-black":"text-gray-300 hover:bg-surface"}`,children:[_.jsx("span",{children:"⚔️"}),_.jsx("span",{children:"Quests"})]})}),_.jsx("li",{children:_.jsxs(Qo,{to:"/profile",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${d("/profile")?"bg-primary text-black":"text-gray-300 hover:bg-surface"}`,children:[_.jsx("span",{children:"👤"}),_.jsx("span",{children:"Profile"})]})})]})}),_.jsx("div",{className:"px-4 mb-4",children:_.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden aspect-[3/4]",onClick:()=>l(!0),children:[t!=null&&t.sideImageUrl?_.jsx("img",{src:t.sideImageUrl,alt:"Side Image",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full bg-surface-light flex items-center justify-center",children:_.jsx("span",{className:"text-gray-400",children:"Add Side Image"})}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center transition-all",children:_.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Change Image"})})]})}),_.jsx("div",{className:"p-4 bg-surface-dark",children:_.jsxs("div",{className:"flex items-center",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center text-black font-bold",children:(v=n==null?void 0:n.email)==null?void 0:v[0].toUpperCase()}),_.jsxs("div",{className:"ml-3",children:[_.jsx("p",{className:"text-sm font-medium text-gray-200",children:n==null?void 0:n.email}),_.jsx("button",{onClick:()=>qt.signOut(),className:"text-xs text-gray-400 hover:text-primary",children:"Sign out"})]})]})})]})}),_.jsx("div",{className:"pl-64",children:_.jsx("main",{className:"p-8",children:_.jsx(EI,{})})}),i&&_.jsx(my,{currentImageUrl:t==null?void 0:t.topImageUrl,onImageUpdate:f,onClose:()=>r(!1)}),o&&_.jsx(my,{currentImageUrl:t==null?void 0:t.sideImageUrl,onImageUpdate:p,onClose:()=>l(!1)})]})},Q1=[{name:"Emerald",value:"#4ADE80",hoverValue:"#22C55E"},{name:"Purple",value:"#A855F7",hoverValue:"#9333EA"},{name:"Gold",value:"#F59E0B",hoverValue:"#D97706"},{name:"Blue",value:"#3B82F6",hoverValue:"#2563EB"},{name:"Rose",value:"#F43F5E",hoverValue:"#E11D48"},{name:"Cyan",value:"#06B6D4",hoverValue:"#0891B2"}],G3=(n,t,e)=>{const i=document.documentElement,r=Q1.find(u=>u.value===n);if(!r)return;i.style.setProperty("--color-primary",r.value),i.style.setProperty("--color-primary-hover",r.hoverValue),i.style.setProperty("--color-border",t||r.value);const o=document.createElement("style");o.textContent=`
    .btn-primary {
      background-color: ${r.value};
    }
    .btn-primary:hover {
      background-color: ${r.hoverValue};
    }
    .text-primary {
      color: ${r.value};
    }
    .bg-primary {
      background-color: ${r.value};
    }
    .border-primary {
      border-color: ${t||r.value} !important;
    }
    .card {
      border: ${e?`2px solid ${t||r.value}`:"none"} !important;
    }
    .panel {
      border: ${e?`2px solid ${t||r.value}`:"none"} !important;
    }
    .section {
      border: ${e?`2px solid ${t||r.value}`:"none"} !important;
    }
  `;const l=document.getElementById("theme-styles");l&&l.remove(),o.id="theme-styles",document.head.appendChild(o)},$3=({children:n})=>{const[t,e]=Mu(qt);return Q.useEffect(()=>{(async()=>{if(!t)return;const r=await Ya(Zt(Yt,"users",t.uid));if(r.exists()){const o=r.data();G3(o.themeColor||Q1[0].value,o.borderColor,o.showBorders??!0)}})()},[t]),e?_.jsx("div",{className:"flex items-center justify-center min-h-screen",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):t?n:_.jsx(TI,{to:"/login",replace:!0})},Q3=()=>_.jsx(kI,{children:_.jsxs(AI,{children:[_.jsx(Ra,{path:"/login",element:_.jsx(j3,{})}),_.jsx(Ra,{path:"/signup",element:_.jsx(L3,{})}),_.jsxs(Ra,{path:"/",element:_.jsx($3,{children:_.jsx(q3,{})}),children:[_.jsx(Ra,{index:!0,element:_.jsx(P3,{})}),_.jsx(Ra,{path:"quests",element:_.jsx(V3,{})}),_.jsx(Ra,{path:"profile",element:_.jsx(H3,{})})]})]})});DR.createRoot(document.getElementById("root")).render(_.jsx(Q.StrictMode,{children:_.jsx(Q3,{})}));
